function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-DVHRtSeS.js","assets/index-DAhDe6BG.js","assets/index-Cv4lJzBx.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{g as M0,r as zs,c as se,b as z0,w as _l,a as bl,f as uc,t as ca,d as q0,e as Gn,h as U0,I as yi,A as k0,U as K0,i as Z,j as H0,k as ec,l as V0,_ as F0,P as B0,V as bh,m as G0,D as W0,C as J0,Z as Eh,$ as Y0,n as X0,o as sa,q as Z0,p as El,s as $r,y as Q0,u as em,X as as,v as $t,x as tr,z as vi,B as ur,E as tm,F as os,G as Il,H as rm,J as im,K as sm,L as xl,M as nm,N as Sl,Y as Pl,O as cs,Q as tc,R as Qn,S as us,T as am,W as ea,a0 as om,a1 as cm,a2 as um,a3 as hm,a4 as lm,a5 as Mo,a6 as Ih,a7 as fm,a8 as pm,a9 as dm,aa as xh,ab as gm,ac as vm,ad as ym,ae as mm,af as wm,ag as _m,ah as bm,ai as ta,aj as Cl,ak as zo,al as Em,am as Im}from"./index-DAhDe6BG.js";import{s as qs,a as ua,e as Vr,i as Sh,c as xm,b as Sm,f as hc,p as Pm,J as wi,d as lc,g as fc,h as pc,E as dc,j as gi,k as ii,l as gc,m as Ol,H as Mi}from"./http-D1fqvJwa.js";const Cm=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Om=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Am=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Tm(u,i){if(u==="__proto__"||u==="constructor"&&i&&typeof i=="object"&&"prototype"in i){Rm(u);return}return i}function Rm(u){console.warn(`[destr] Dropping "${u}" key to prevent prototype pollution.`)}function Wn(u,i={}){if(typeof u!="string")return u;const r=u.trim();if(u[0]==='"'&&u.endsWith('"')&&!u.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!Am.test(u)){if(i.strict)throw new SyntaxError("[destr] Invalid JSON");return u}try{if(Cm.test(u)||Om.test(u)){if(i.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(u,Tm)}return JSON.parse(u)}catch(n){if(i.strict)throw n;return u}}function Nm(u){return!u||typeof u.then!="function"?Promise.resolve(u):u}function kt(u,...i){try{return Nm(u(...i))}catch(r){return Promise.reject(r)}}function Dm(u){const i=typeof u;return u===null||i!=="object"&&i!=="function"}function $m(u){const i=Object.getPrototypeOf(u);return!i||i.isPrototypeOf(Object)}function ra(u){if(Dm(u))return String(u);if($m(u)||Array.isArray(u))return JSON.stringify(u);if(typeof u.toJSON=="function")return ra(u.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Al(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const rc="base64:";function Lm(u){if(typeof u=="string")return u;Al();const i=Buffer.from(u).toString("base64");return rc+i}function jm(u){return typeof u!="string"||!u.startsWith(rc)?u:(Al(),Buffer.from(u.slice(rc.length),"base64"))}function cr(u){return u?u.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Mm(...u){return cr(u.join(":"))}function Jn(u){return u=cr(u),u?u+":":""}const zm="memory",qm=()=>{const u=new Map;return{name:zm,options:{},hasItem(i){return u.has(i)},getItem(i){return u.get(i)??null},getItemRaw(i){return u.get(i)??null},setItem(i,r){u.set(i,r)},setItemRaw(i,r){u.set(i,r)},removeItem(i){u.delete(i)},getKeys(){return Array.from(u.keys())},clear(){u.clear()},dispose(){u.clear()}}};function Um(u={}){const i={mounts:{"":u.driver||qm()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=v=>{for(const x of i.mountpoints)if(v.startsWith(x))return{base:x,relativeKey:v.slice(x.length),driver:i.mounts[x]};return{base:"",relativeKey:v,driver:i.mounts[""]}},n=(v,x)=>i.mountpoints.filter(A=>A.startsWith(v)||x&&v.startsWith(A)).map(A=>({relativeBase:v.length>A.length?v.slice(A.length):void 0,mountpoint:A,driver:i.mounts[A]})),a=(v,x)=>{if(i.watching){x=cr(x);for(const A of i.watchListeners)A(v,x)}},l=async()=>{if(!i.watching){i.watching=!0;for(const v in i.mounts)i.unwatch[v]=await Ph(i.mounts[v],a,v)}},d=async()=>{if(i.watching){for(const v in i.unwatch)await i.unwatch[v]();i.unwatch={},i.watching=!1}},y=(v,x,A)=>{const D=new Map,U=L=>{let V=D.get(L.base);return V||(V={driver:L.driver,base:L.base,items:[]},D.set(L.base,V)),V};for(const L of v){const V=typeof L=="string",re=cr(V?L:L.key),ce=V?void 0:L.value,ue=V||!L.options?x:{...x,...L.options},he=r(re);U(he).items.push({key:re,value:ce,relativeKey:he.relativeKey,options:ue})}return Promise.all([...D.values()].map(L=>A(L))).then(L=>L.flat())},_={hasItem(v,x={}){v=cr(v);const{relativeKey:A,driver:D}=r(v);return kt(D.hasItem,A,x)},getItem(v,x={}){v=cr(v);const{relativeKey:A,driver:D}=r(v);return kt(D.getItem,A,x).then(U=>Wn(U))},getItems(v,x){return y(v,x,A=>A.driver.getItems?kt(A.driver.getItems,A.items.map(D=>({key:D.relativeKey,options:D.options})),x).then(D=>D.map(U=>({key:Mm(A.base,U.key),value:Wn(U.value)}))):Promise.all(A.items.map(D=>kt(A.driver.getItem,D.relativeKey,D.options).then(U=>({key:D.key,value:Wn(U)})))))},getItemRaw(v,x={}){v=cr(v);const{relativeKey:A,driver:D}=r(v);return D.getItemRaw?kt(D.getItemRaw,A,x):kt(D.getItem,A,x).then(U=>jm(U))},async setItem(v,x,A={}){if(x===void 0)return _.removeItem(v);v=cr(v);const{relativeKey:D,driver:U}=r(v);U.setItem&&(await kt(U.setItem,D,ra(x),A),U.watch||a("update",v))},async setItems(v,x){await y(v,x,async A=>{if(A.driver.setItems)return kt(A.driver.setItems,A.items.map(D=>({key:D.relativeKey,value:ra(D.value),options:D.options})),x);A.driver.setItem&&await Promise.all(A.items.map(D=>kt(A.driver.setItem,D.relativeKey,ra(D.value),D.options)))})},async setItemRaw(v,x,A={}){if(x===void 0)return _.removeItem(v,A);v=cr(v);const{relativeKey:D,driver:U}=r(v);if(U.setItemRaw)await kt(U.setItemRaw,D,x,A);else if(U.setItem)await kt(U.setItem,D,Lm(x),A);else return;U.watch||a("update",v)},async removeItem(v,x={}){typeof x=="boolean"&&(x={removeMeta:x}),v=cr(v);const{relativeKey:A,driver:D}=r(v);D.removeItem&&(await kt(D.removeItem,A,x),(x.removeMeta||x.removeMata)&&await kt(D.removeItem,A+"$",x),D.watch||a("remove",v))},async getMeta(v,x={}){typeof x=="boolean"&&(x={nativeOnly:x}),v=cr(v);const{relativeKey:A,driver:D}=r(v),U=Object.create(null);if(D.getMeta&&Object.assign(U,await kt(D.getMeta,A,x)),!x.nativeOnly){const L=await kt(D.getItem,A+"$",x).then(V=>Wn(V));L&&typeof L=="object"&&(typeof L.atime=="string"&&(L.atime=new Date(L.atime)),typeof L.mtime=="string"&&(L.mtime=new Date(L.mtime)),Object.assign(U,L))}return U},setMeta(v,x,A={}){return this.setItem(v+"$",x,A)},removeMeta(v,x={}){return this.removeItem(v+"$",x)},async getKeys(v,x={}){v=Jn(v);const A=n(v,!0);let D=[];const U=[];for(const L of A){const re=(await kt(L.driver.getKeys,L.relativeBase,x)).map(ce=>L.mountpoint+cr(ce)).filter(ce=>!D.some(ue=>ce.startsWith(ue)));U.push(...re),D=[L.mountpoint,...D.filter(ce=>!ce.startsWith(L.mountpoint))]}return v?U.filter(L=>L.startsWith(v)&&!L.endsWith("$")):U.filter(L=>!L.endsWith("$"))},async clear(v,x={}){v=Jn(v),await Promise.all(n(v,!1).map(async A=>{if(A.driver.clear)return kt(A.driver.clear,A.relativeBase,x);if(A.driver.removeItem){const D=await A.driver.getKeys(A.relativeBase||"",x);return Promise.all(D.map(U=>A.driver.removeItem(U,x)))}}))},async dispose(){await Promise.all(Object.values(i.mounts).map(v=>Ch(v)))},async watch(v){return await l(),i.watchListeners.push(v),async()=>{i.watchListeners=i.watchListeners.filter(x=>x!==v),i.watchListeners.length===0&&await d()}},async unwatch(){i.watchListeners=[],await d()},mount(v,x){if(v=Jn(v),v&&i.mounts[v])throw new Error(`already mounted at ${v}`);return v&&(i.mountpoints.push(v),i.mountpoints.sort((A,D)=>D.length-A.length)),i.mounts[v]=x,i.watching&&Promise.resolve(Ph(x,a,v)).then(A=>{i.unwatch[v]=A}).catch(console.error),_},async unmount(v,x=!0){v=Jn(v),!(!v||!i.mounts[v])&&(i.watching&&v in i.unwatch&&(i.unwatch[v](),delete i.unwatch[v]),x&&await Ch(i.mounts[v]),i.mountpoints=i.mountpoints.filter(A=>A!==v),delete i.mounts[v])},getMount(v=""){v=cr(v)+":";const x=r(v);return{driver:x.driver,base:x.base}},getMounts(v="",x={}){return v=cr(v),n(v,x.parents).map(D=>({driver:D.driver,base:D.mountpoint}))}};return _}function Ph(u,i,r){return u.watch?u.watch((n,a)=>i(n,r+a)):()=>{}}async function Ch(u){typeof u.dispose=="function"&&await kt(u.dispose)}function zi(u){return new Promise((i,r)=>{u.oncomplete=u.onsuccess=()=>i(u.result),u.onabort=u.onerror=()=>r(u.error)})}function Tl(u,i){const r=indexedDB.open(u);r.onupgradeneeded=()=>r.result.createObjectStore(i);const n=zi(r);return(a,l)=>n.then(d=>l(d.transaction(i,a).objectStore(i)))}let qo;function Us(){return qo||(qo=Tl("keyval-store","keyval")),qo}function Oh(u,i=Us()){return i("readonly",r=>zi(r.get(u)))}function km(u,i,r=Us()){return r("readwrite",n=>(n.put(i,u),zi(n.transaction)))}function Km(u,i=Us()){return i("readwrite",r=>(r.delete(u),zi(r.transaction)))}function Hm(u=Us()){return u("readwrite",i=>(i.clear(),zi(i.transaction)))}function Vm(u,i){return u.openCursor().onsuccess=function(){this.result&&(i(this.result),this.result.continue())},zi(u.transaction)}function Fm(u=Us()){return u("readonly",i=>{if(i.getAllKeys)return zi(i.getAllKeys());const r=[];return Vm(i,n=>r.push(n.key)).then(()=>r)})}const Bm="idb-keyval";var Gm=(u={})=>{const i=u.base&&u.base.length>0?`${u.base}:`:"",r=a=>i+a;let n;return u.dbName&&u.storeName&&(n=Tl(u.dbName,u.storeName)),{name:Bm,options:u,async hasItem(a){return!(typeof await Oh(r(a),n)>"u")},async getItem(a){return await Oh(r(a),n)??null},setItem(a,l){return km(r(a),l,n)},removeItem(a){return Km(r(a),n)},getKeys(){return Fm(n)},clear(){return Hm(n)}}};const Wm="WALLET_CONNECT_V2_INDEXED_DB",Jm="keyvaluestorage";let Ym=class{constructor(){this.indexedDb=Um({driver:Gm({dbName:Wm,storeName:Jm})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(i=>[i.key,i.value])}async getItem(i){const r=await this.indexedDb.getItem(i);if(r!==null)return r}async setItem(i,r){await this.indexedDb.setItem(i,qs(r))}async removeItem(i){await this.indexedDb.removeItem(i)}};var Uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ia={exports:{}};(function(){let u;function i(){}u=i,u.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},u.prototype.setItem=function(r,n){this[r]=String(n)},u.prototype.removeItem=function(r){delete this[r]},u.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},u.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},u.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Uo<"u"&&Uo.localStorage?ia.exports=Uo.localStorage:typeof window<"u"&&window.localStorage?ia.exports=window.localStorage:ia.exports=new i})();function Xm(u){var i;return[u[0],ua((i=u[1])!=null?i:"")]}let Zm=class{constructor(){this.localStorage=ia.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Xm)}async getItem(i){const r=this.localStorage.getItem(i);if(r!==null)return ua(r)}async setItem(i,r){this.localStorage.setItem(i,qs(r))}async removeItem(i){this.localStorage.removeItem(i)}};const Qm="wc_storage_version",Ah=1,ew=async(u,i,r)=>{const n=Qm,a=await i.getItem(n);if(a&&a>=Ah){r(i);return}const l=await u.getKeys();if(!l.length){r(i);return}const d=[];for(;l.length;){const y=l.shift();if(!y)continue;const _=y.toLowerCase();if(_.includes("wc@")||_.includes("walletconnect")||_.includes("wc_")||_.includes("wallet_connect")){const v=await u.getItem(y);await i.setItem(y,v),d.push(y)}}await i.setItem(n,Ah),r(i),tw(u,d)},tw=async(u,i)=>{i.length&&i.forEach(async r=>{await u.removeItem(r)})};let rw=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const i=new Zm;this.storage=i;try{const r=new Ym;ew(i,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(i){return await this.initialize(),this.storage.getItem(i)}async setItem(i,r){return await this.initialize(),this.storage.setItem(i,r)}async removeItem(i){return await this.initialize(),this.storage.removeItem(i)}async initialize(){this.initialized||await new Promise(i=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),i())},20)})}};var hs={},Ts={},ko={},Rs={};class qi{}const iw=Object.freeze(Object.defineProperty({__proto__:null,IEvents:qi},Symbol.toStringTag,{value:"Module"})),sw=M0(iw);var Th;function nw(){if(Th)return Rs;Th=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.IHeartBeat=void 0;const u=sw;class i extends u.IEvents{constructor(n){super()}}return Rs.IHeartBeat=i,Rs}var Rh;function Rl(){return Rh||(Rh=1,function(u){Object.defineProperty(u,"__esModule",{value:!0}),zs.__exportStar(nw(),u)}(ko)),ko}var Ko={},Li={},Nh;function aw(){if(Nh)return Li;Nh=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.HEARTBEAT_EVENTS=Li.HEARTBEAT_INTERVAL=void 0;const u=se;return Li.HEARTBEAT_INTERVAL=u.FIVE_SECONDS,Li.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Li}var Dh;function Nl(){return Dh||(Dh=1,function(u){Object.defineProperty(u,"__esModule",{value:!0}),zs.__exportStar(aw(),u)}(Ko)),Ko}var $h;function ow(){if($h)return Ts;$h=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.HeartBeat=void 0;const u=zs,i=Vr,r=se,n=Rl(),a=Nl();class l extends n.IHeartBeat{constructor(y){super(y),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(y==null?void 0:y.interval)||a.HEARTBEAT_INTERVAL}static init(y){return u.__awaiter(this,void 0,void 0,function*(){const _=new l(y);return yield _.init(),_})}init(){return u.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(y,_){this.events.on(y,_)}once(y,_){this.events.once(y,_)}off(y,_){this.events.off(y,_)}removeListener(y,_){this.events.removeListener(y,_)}initialize(){return u.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return Ts.HeartBeat=l,Ts}(function(u){Object.defineProperty(u,"__esModule",{value:!0});const i=zs;i.__exportStar(ow(),u),i.__exportStar(Rl(),u),i.__exportStar(Nl(),u)})(hs);var Oe={},Ho,Lh;function cw(){if(Lh)return Ho;Lh=1;function u(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Ho=i;function i(r,n,a){var l=a&&a.stringify||u,d=1;if(typeof r=="object"&&r!==null){var y=n.length+d;if(y===1)return r;var _=new Array(y);_[0]=l(r);for(var v=1;v<y;v++)_[v]=l(n[v]);return _.join(" ")}if(typeof r!="string")return r;var x=n.length;if(x===0)return r;for(var A="",D=1-d,U=-1,L=r&&r.length||0,V=0;V<L;){if(r.charCodeAt(V)===37&&V+1<L){switch(U=U>-1?U:0,r.charCodeAt(V+1)){case 100:case 102:if(D>=x||n[D]==null)break;U<V&&(A+=r.slice(U,V)),A+=Number(n[D]),U=V+2,V++;break;case 105:if(D>=x||n[D]==null)break;U<V&&(A+=r.slice(U,V)),A+=Math.floor(Number(n[D])),U=V+2,V++;break;case 79:case 111:case 106:if(D>=x||n[D]===void 0)break;U<V&&(A+=r.slice(U,V));var re=typeof n[D];if(re==="string"){A+="'"+n[D]+"'",U=V+2,V++;break}if(re==="function"){A+=n[D].name||"<anonymous>",U=V+2,V++;break}A+=l(n[D]),U=V+2,V++;break;case 115:if(D>=x)break;U<V&&(A+=r.slice(U,V)),A+=String(n[D]),U=V+2,V++;break;case 37:U<V&&(A+=r.slice(U,V)),A+="%",U=V+2,V++,D--;break}++D}++V}return U===-1?r:(U<L&&(A+=r.slice(U)),A)}return Ho}var Vo,jh;function uw(){if(jh)return Vo;jh=1;const u=cw();Vo=a;const i=pe().console||{},r={mapHttpRequest:L,mapHttpResponse:L,wrapRequestSerializer:V,wrapResponseSerializer:V,wrapErrorSerializer:V,req:L,res:L,err:D};function n(N,K){return Array.isArray(N)?N.filter(function(ve){return ve!=="!stdSerializers.err"}):N===!0?Object.keys(K):!1}function a(N){N=N||{},N.browser=N.browser||{};const K=N.browser.transmit;if(K&&typeof K.send!="function")throw Error("pino: transmit option must have a send function");const W=N.browser.write||i;N.browser.write&&(N.browser.asObject=!0);const ve=N.serializers||{},te=n(N.browser.serialize,ve);let Ee=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(Ee=!1);const Ae=["error","fatal","warn","info","debug","trace"];typeof W=="function"&&(W.error=W.fatal=W.warn=W.info=W.debug=W.trace=W),N.enabled===!1&&(N.level="silent");const et=N.level||"info",O=Object.create(W);O.log||(O.log=re),Object.defineProperty(O,"levelVal",{get:qe}),Object.defineProperty(O,"level",{get:Te,set:J});const z={transmit:K,serialize:te,asObject:N.browser.asObject,levels:Ae,timestamp:U(N)};O.levels=a.levels,O.level=et,O.setMaxListeners=O.getMaxListeners=O.emit=O.addListener=O.on=O.prependListener=O.once=O.prependOnceListener=O.removeListener=O.removeAllListeners=O.listeners=O.listenerCount=O.eventNames=O.write=O.flush=re,O.serializers=ve,O._serialize=te,O._stdErrSerialize=Ee,O.child=F,K&&(O._logEvent=A());function qe(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Te(){return this._level}function J(H){if(H!=="silent"&&!this.levels.values[H])throw Error("unknown level "+H);this._level=H,l(z,O,"error","log"),l(z,O,"fatal","error"),l(z,O,"warn","error"),l(z,O,"info","log"),l(z,O,"debug","log"),l(z,O,"trace","log")}function F(H,B){if(!H)throw new Error("missing bindings for child Pino");B=B||{},te&&H.serializers&&(B.serializers=H.serializers);const ct=B.serializers;if(te&&ct){var Ke=Object.assign({},ve,ct),Lr=N.browser.serialize===!0?Object.keys(Ke):te;delete H.serializers,_([H],Lr,Ke,this._stdErrSerialize)}function _e(xt){this._childLevel=(xt._childLevel|0)+1,this.error=v(xt,H,"error"),this.fatal=v(xt,H,"fatal"),this.warn=v(xt,H,"warn"),this.info=v(xt,H,"info"),this.debug=v(xt,H,"debug"),this.trace=v(xt,H,"trace"),Ke&&(this.serializers=Ke,this._serialize=Lr),K&&(this._logEvent=A([].concat(xt._logEvent.bindings,H)))}return _e.prototype=this,new _e(this)}return O}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:ce,epochTime:ue,unixTime:he,isoTime:fe});function l(N,K,W,ve){const te=Object.getPrototypeOf(K);K[W]=K.levelVal>K.levels.values[W]?re:te[W]?te[W]:i[W]||i[ve]||re,d(N,K,W)}function d(N,K,W){!N.transmit&&K[W]===re||(K[W]=function(ve){return function(){const Ee=N.timestamp(),Ae=new Array(arguments.length),et=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var O=0;O<Ae.length;O++)Ae[O]=arguments[O];if(N.serialize&&!N.asObject&&_(Ae,this._serialize,this.serializers,this._stdErrSerialize),N.asObject?ve.call(et,y(this,W,Ae,Ee)):ve.apply(et,Ae),N.transmit){const z=N.transmit.level||K.level,qe=a.levels.values[z],Te=a.levels.values[W];if(Te<qe)return;x(this,{ts:Ee,methodLevel:W,methodValue:Te,transmitLevel:z,transmitValue:a.levels.values[N.transmit.level||K.level],send:N.transmit.send,val:K.levelVal},Ae)}}}(K[W]))}function y(N,K,W,ve){N._serialize&&_(W,N._serialize,N.serializers,N._stdErrSerialize);const te=W.slice();let Ee=te[0];const Ae={};ve&&(Ae.time=ve),Ae.level=a.levels.values[K];let et=(N._childLevel|0)+1;if(et<1&&(et=1),Ee!==null&&typeof Ee=="object"){for(;et--&&typeof te[0]=="object";)Object.assign(Ae,te.shift());Ee=te.length?u(te.shift(),te):void 0}else typeof Ee=="string"&&(Ee=u(te.shift(),te));return Ee!==void 0&&(Ae.msg=Ee),Ae}function _(N,K,W,ve){for(const te in N)if(ve&&N[te]instanceof Error)N[te]=a.stdSerializers.err(N[te]);else if(typeof N[te]=="object"&&!Array.isArray(N[te]))for(const Ee in N[te])K&&K.indexOf(Ee)>-1&&Ee in W&&(N[te][Ee]=W[Ee](N[te][Ee]))}function v(N,K,W){return function(){const ve=new Array(1+arguments.length);ve[0]=K;for(var te=1;te<ve.length;te++)ve[te]=arguments[te-1];return N[W].apply(this,ve)}}function x(N,K,W){const ve=K.send,te=K.ts,Ee=K.methodLevel,Ae=K.methodValue,et=K.val,O=N._logEvent.bindings;_(W,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=te,N._logEvent.messages=W.filter(function(z){return O.indexOf(z)===-1}),N._logEvent.level.label=Ee,N._logEvent.level.value=Ae,ve(Ee,N._logEvent,et),N._logEvent=A(O)}function A(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function D(N){const K={type:N.constructor.name,msg:N.message,stack:N.stack};for(const W in N)K[W]===void 0&&(K[W]=N[W]);return K}function U(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?ce:ue}function L(){return{}}function V(N){return N}function re(){}function ce(){return!1}function ue(){return Date.now()}function he(){return Math.round(Date.now()/1e3)}function fe(){return new Date(Date.now()).toISOString()}function pe(){function N(K){return typeof K<"u"&&K}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return Vo}var ji={},Mh;function Dl(){return Mh||(Mh=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.PINO_CUSTOM_CONTEXT_KEY=ji.PINO_LOGGER_DEFAULTS=void 0,ji.PINO_LOGGER_DEFAULTS={level:"info"},ji.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ji}var er={},zh;function hw(){if(zh)return er;zh=1,Object.defineProperty(er,"__esModule",{value:!0}),er.generateChildLogger=er.formatChildLoggerContext=er.getLoggerContext=er.setBrowserLoggerContext=er.getBrowserLoggerContext=er.getDefaultLoggerOptions=void 0;const u=Dl();function i(y){return Object.assign(Object.assign({},y),{level:(y==null?void 0:y.level)||u.PINO_LOGGER_DEFAULTS.level})}er.getDefaultLoggerOptions=i;function r(y,_=u.PINO_CUSTOM_CONTEXT_KEY){return y[_]||""}er.getBrowserLoggerContext=r;function n(y,_,v=u.PINO_CUSTOM_CONTEXT_KEY){return y[v]=_,y}er.setBrowserLoggerContext=n;function a(y,_=u.PINO_CUSTOM_CONTEXT_KEY){let v="";return typeof y.bindings>"u"?v=r(y,_):v=y.bindings().context||"",v}er.getLoggerContext=a;function l(y,_,v=u.PINO_CUSTOM_CONTEXT_KEY){const x=a(y,v);return x.trim()?`${x}/${_}`:_}er.formatChildLoggerContext=l;function d(y,_,v=u.PINO_CUSTOM_CONTEXT_KEY){const x=l(y,_,v),A=y.child({context:x});return n(A,x,v)}return er.generateChildLogger=d,er}(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.pino=void 0;const i=zs,r=i.__importDefault(uw());Object.defineProperty(u,"pino",{enumerable:!0,get:function(){return r.default}}),i.__exportStar(Dl(),u),i.__exportStar(hw(),u)})(Oe);class lw extends qi{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}}class fw extends qi{constructor(i,r){super(),this.core=i,this.logger=r,this.records=new Map}}class pw{constructor(i,r){this.logger=i,this.core=r}}let dw=class extends qi{constructor(i,r){super(),this.relayer=i,this.logger=r}},gw=class extends qi{constructor(i){super()}},vw=class{constructor(i,r,n,a){this.core=i,this.logger=r,this.name=n}};class yw extends qi{constructor(i,r){super(),this.relayer=i,this.logger=r}}let mw=class extends qi{constructor(i,r){super(),this.core=i,this.logger=r}},ww=class{constructor(i,r){this.projectId=i,this.logger=r}},_w=class{constructor(i){this.opts=i,this.protocol="wc",this.version=2}},bw=class{constructor(i){this.client=i}};var vc={},$l={};(function(u){Object.defineProperty(u,"__esModule",{value:!0});var i=z0,r=_l;u.DIGEST_LENGTH=64,u.BLOCK_SIZE=128;var n=function(){function y(){this.digestLength=u.DIGEST_LENGTH,this.blockSize=u.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},y.prototype.update=function(_,v){if(v===void 0&&(v=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var x=0;if(this._bytesHashed+=v,this._bufferLength>0){for(;this._bufferLength<u.BLOCK_SIZE&&v>0;)this._buffer[this._bufferLength++]=_[x++],v--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(v>=this.blockSize&&(x=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,x,v),v%=this.blockSize);v>0;)this._buffer[this._bufferLength++]=_[x++],v--;return this},y.prototype.finish=function(_){if(!this._finished){var v=this._bytesHashed,x=this._bufferLength,A=v/536870912|0,D=v<<3,U=v%128<112?128:256;this._buffer[x]=128;for(var L=x+1;L<U-8;L++)this._buffer[L]=0;i.writeUint32BE(A,this._buffer,U-8),i.writeUint32BE(D,this._buffer,U-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,U),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)i.writeUint32BE(this._stateHi[L],_,L*8),i.writeUint32BE(this._stateLo[L],_,L*8+4);return this},y.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(_){r.wipe(_.stateHi),r.wipe(_.stateLo),_.buffer&&r.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},y}();u.SHA512=n;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(y,_,v,x,A,D,U){for(var L=v[0],V=v[1],re=v[2],ce=v[3],ue=v[4],he=v[5],fe=v[6],pe=v[7],N=x[0],K=x[1],W=x[2],ve=x[3],te=x[4],Ee=x[5],Ae=x[6],et=x[7],O,z,qe,Te,J,F,H,B;U>=128;){for(var ct=0;ct<16;ct++){var Ke=8*ct+D;y[ct]=i.readUint32BE(A,Ke),_[ct]=i.readUint32BE(A,Ke+4)}for(var ct=0;ct<80;ct++){var Lr=L,_e=V,xt=re,R=ce,T=ue,P=he,c=fe,b=pe,Q=N,oe=K,me=W,Re=ve,De=te,xe=Ee,St=Ae,mt=et;if(O=pe,z=et,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=(ue>>>14|te<<18)^(ue>>>18|te<<14)^(te>>>9|ue<<23),z=(te>>>14|ue<<18)^(te>>>18|ue<<14)^(ue>>>9|te<<23),J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,O=ue&he^~ue&fe,z=te&Ee^~te&Ae,J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,O=a[ct*2],z=a[ct*2+1],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,O=y[ct%16],z=_[ct%16],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,qe=H&65535|B<<16,Te=J&65535|F<<16,O=qe,z=Te,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=(L>>>28|N<<4)^(N>>>2|L<<30)^(N>>>7|L<<25),z=(N>>>28|L<<4)^(L>>>2|N<<30)^(L>>>7|N<<25),J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,O=L&V^L&re^V&re,z=N&K^N&W^K&W,J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,b=H&65535|B<<16,mt=J&65535|F<<16,O=R,z=Re,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=qe,z=Te,J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,R=H&65535|B<<16,Re=J&65535|F<<16,V=Lr,re=_e,ce=xt,ue=R,he=T,fe=P,pe=c,L=b,K=Q,W=oe,ve=me,te=Re,Ee=De,Ae=xe,et=St,N=mt,ct%16===15)for(var Ke=0;Ke<16;Ke++)O=y[Ke],z=_[Ke],J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=y[(Ke+9)%16],z=_[(Ke+9)%16],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,qe=y[(Ke+1)%16],Te=_[(Ke+1)%16],O=(qe>>>1|Te<<31)^(qe>>>8|Te<<24)^qe>>>7,z=(Te>>>1|qe<<31)^(Te>>>8|qe<<24)^(Te>>>7|qe<<25),J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,qe=y[(Ke+14)%16],Te=_[(Ke+14)%16],O=(qe>>>19|Te<<13)^(Te>>>29|qe<<3)^qe>>>6,z=(Te>>>19|qe<<13)^(qe>>>29|Te<<3)^(Te>>>6|qe<<26),J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,y[Ke]=H&65535|B<<16,_[Ke]=J&65535|F<<16}O=L,z=N,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[0],z=x[0],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[0]=L=H&65535|B<<16,x[0]=N=J&65535|F<<16,O=V,z=K,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[1],z=x[1],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[1]=V=H&65535|B<<16,x[1]=K=J&65535|F<<16,O=re,z=W,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[2],z=x[2],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[2]=re=H&65535|B<<16,x[2]=W=J&65535|F<<16,O=ce,z=ve,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[3],z=x[3],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[3]=ce=H&65535|B<<16,x[3]=ve=J&65535|F<<16,O=ue,z=te,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[4],z=x[4],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[4]=ue=H&65535|B<<16,x[4]=te=J&65535|F<<16,O=he,z=Ee,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[5],z=x[5],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[5]=he=H&65535|B<<16,x[5]=Ee=J&65535|F<<16,O=fe,z=Ae,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[6],z=x[6],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[6]=fe=H&65535|B<<16,x[6]=Ae=J&65535|F<<16,O=pe,z=et,J=z&65535,F=z>>>16,H=O&65535,B=O>>>16,O=v[7],z=x[7],J+=z&65535,F+=z>>>16,H+=O&65535,B+=O>>>16,F+=J>>>16,H+=F>>>16,B+=H>>>16,v[7]=pe=H&65535|B<<16,x[7]=et=J&65535|F<<16,D+=128,U-=128}return D}function d(y){var _=new n;_.update(y);var v=_.digest();return _.clean(),v}u.hash=d})($l);(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.convertSecretKeyToX25519=u.convertPublicKeyToX25519=u.verify=u.sign=u.extractPublicKeyFromSecretKey=u.generateKeyPair=u.generateKeyPairFromSeed=u.SEED_LENGTH=u.SECRET_KEY_LENGTH=u.PUBLIC_KEY_LENGTH=u.SIGNATURE_LENGTH=void 0;const i=bl,r=$l,n=_l;u.SIGNATURE_LENGTH=64,u.PUBLIC_KEY_LENGTH=32,u.SECRET_KEY_LENGTH=64,u.SEED_LENGTH=32;function a(R){const T=new Float64Array(16);if(R)for(let P=0;P<R.length;P++)T[P]=R[P];return T}const l=new Uint8Array(32);l[0]=9;const d=a(),y=a([1]),_=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),v=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),x=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function U(R,T){for(let P=0;P<16;P++)R[P]=T[P]|0}function L(R){let T=1;for(let P=0;P<16;P++){let c=R[P]+T+65535;T=Math.floor(c/65536),R[P]=c-T*65536}R[0]+=T-1+37*(T-1)}function V(R,T,P){const c=~(P-1);for(let b=0;b<16;b++){const Q=c&(R[b]^T[b]);R[b]^=Q,T[b]^=Q}}function re(R,T){const P=a(),c=a();for(let b=0;b<16;b++)c[b]=T[b];L(c),L(c),L(c);for(let b=0;b<2;b++){P[0]=c[0]-65517;for(let oe=1;oe<15;oe++)P[oe]=c[oe]-65535-(P[oe-1]>>16&1),P[oe-1]&=65535;P[15]=c[15]-32767-(P[14]>>16&1);const Q=P[15]>>16&1;P[14]&=65535,V(c,P,1-Q)}for(let b=0;b<16;b++)R[2*b]=c[b]&255,R[2*b+1]=c[b]>>8}function ce(R,T){let P=0;for(let c=0;c<32;c++)P|=R[c]^T[c];return(1&P-1>>>8)-1}function ue(R,T){const P=new Uint8Array(32),c=new Uint8Array(32);return re(P,R),re(c,T),ce(P,c)}function he(R){const T=new Uint8Array(32);return re(T,R),T[0]&1}function fe(R,T){for(let P=0;P<16;P++)R[P]=T[2*P]+(T[2*P+1]<<8);R[15]&=32767}function pe(R,T,P){for(let c=0;c<16;c++)R[c]=T[c]+P[c]}function N(R,T,P){for(let c=0;c<16;c++)R[c]=T[c]-P[c]}function K(R,T,P){let c,b,Q=0,oe=0,me=0,Re=0,De=0,xe=0,St=0,mt=0,st=0,Le=0,Je=0,Ye=0,nt=0,Ue=0,Xe=0,Ne=0,He=0,ut=0,Me=0,Pt=0,Lt=0,Kt=0,Ht=0,zt=0,Wt=0,rr=0,jr=0,Jt=0,Fr=0,si=0,bi=0,ht=P[0],tt=P[1],lt=P[2],ft=P[3],at=P[4],rt=P[5],Ct=P[6],Ot=P[7],pt=P[8],At=P[9],dt=P[10],wt=P[11],gt=P[12],We=P[13],Tt=P[14],Rt=P[15];c=T[0],Q+=c*ht,oe+=c*tt,me+=c*lt,Re+=c*ft,De+=c*at,xe+=c*rt,St+=c*Ct,mt+=c*Ot,st+=c*pt,Le+=c*At,Je+=c*dt,Ye+=c*wt,nt+=c*gt,Ue+=c*We,Xe+=c*Tt,Ne+=c*Rt,c=T[1],oe+=c*ht,me+=c*tt,Re+=c*lt,De+=c*ft,xe+=c*at,St+=c*rt,mt+=c*Ct,st+=c*Ot,Le+=c*pt,Je+=c*At,Ye+=c*dt,nt+=c*wt,Ue+=c*gt,Xe+=c*We,Ne+=c*Tt,He+=c*Rt,c=T[2],me+=c*ht,Re+=c*tt,De+=c*lt,xe+=c*ft,St+=c*at,mt+=c*rt,st+=c*Ct,Le+=c*Ot,Je+=c*pt,Ye+=c*At,nt+=c*dt,Ue+=c*wt,Xe+=c*gt,Ne+=c*We,He+=c*Tt,ut+=c*Rt,c=T[3],Re+=c*ht,De+=c*tt,xe+=c*lt,St+=c*ft,mt+=c*at,st+=c*rt,Le+=c*Ct,Je+=c*Ot,Ye+=c*pt,nt+=c*At,Ue+=c*dt,Xe+=c*wt,Ne+=c*gt,He+=c*We,ut+=c*Tt,Me+=c*Rt,c=T[4],De+=c*ht,xe+=c*tt,St+=c*lt,mt+=c*ft,st+=c*at,Le+=c*rt,Je+=c*Ct,Ye+=c*Ot,nt+=c*pt,Ue+=c*At,Xe+=c*dt,Ne+=c*wt,He+=c*gt,ut+=c*We,Me+=c*Tt,Pt+=c*Rt,c=T[5],xe+=c*ht,St+=c*tt,mt+=c*lt,st+=c*ft,Le+=c*at,Je+=c*rt,Ye+=c*Ct,nt+=c*Ot,Ue+=c*pt,Xe+=c*At,Ne+=c*dt,He+=c*wt,ut+=c*gt,Me+=c*We,Pt+=c*Tt,Lt+=c*Rt,c=T[6],St+=c*ht,mt+=c*tt,st+=c*lt,Le+=c*ft,Je+=c*at,Ye+=c*rt,nt+=c*Ct,Ue+=c*Ot,Xe+=c*pt,Ne+=c*At,He+=c*dt,ut+=c*wt,Me+=c*gt,Pt+=c*We,Lt+=c*Tt,Kt+=c*Rt,c=T[7],mt+=c*ht,st+=c*tt,Le+=c*lt,Je+=c*ft,Ye+=c*at,nt+=c*rt,Ue+=c*Ct,Xe+=c*Ot,Ne+=c*pt,He+=c*At,ut+=c*dt,Me+=c*wt,Pt+=c*gt,Lt+=c*We,Kt+=c*Tt,Ht+=c*Rt,c=T[8],st+=c*ht,Le+=c*tt,Je+=c*lt,Ye+=c*ft,nt+=c*at,Ue+=c*rt,Xe+=c*Ct,Ne+=c*Ot,He+=c*pt,ut+=c*At,Me+=c*dt,Pt+=c*wt,Lt+=c*gt,Kt+=c*We,Ht+=c*Tt,zt+=c*Rt,c=T[9],Le+=c*ht,Je+=c*tt,Ye+=c*lt,nt+=c*ft,Ue+=c*at,Xe+=c*rt,Ne+=c*Ct,He+=c*Ot,ut+=c*pt,Me+=c*At,Pt+=c*dt,Lt+=c*wt,Kt+=c*gt,Ht+=c*We,zt+=c*Tt,Wt+=c*Rt,c=T[10],Je+=c*ht,Ye+=c*tt,nt+=c*lt,Ue+=c*ft,Xe+=c*at,Ne+=c*rt,He+=c*Ct,ut+=c*Ot,Me+=c*pt,Pt+=c*At,Lt+=c*dt,Kt+=c*wt,Ht+=c*gt,zt+=c*We,Wt+=c*Tt,rr+=c*Rt,c=T[11],Ye+=c*ht,nt+=c*tt,Ue+=c*lt,Xe+=c*ft,Ne+=c*at,He+=c*rt,ut+=c*Ct,Me+=c*Ot,Pt+=c*pt,Lt+=c*At,Kt+=c*dt,Ht+=c*wt,zt+=c*gt,Wt+=c*We,rr+=c*Tt,jr+=c*Rt,c=T[12],nt+=c*ht,Ue+=c*tt,Xe+=c*lt,Ne+=c*ft,He+=c*at,ut+=c*rt,Me+=c*Ct,Pt+=c*Ot,Lt+=c*pt,Kt+=c*At,Ht+=c*dt,zt+=c*wt,Wt+=c*gt,rr+=c*We,jr+=c*Tt,Jt+=c*Rt,c=T[13],Ue+=c*ht,Xe+=c*tt,Ne+=c*lt,He+=c*ft,ut+=c*at,Me+=c*rt,Pt+=c*Ct,Lt+=c*Ot,Kt+=c*pt,Ht+=c*At,zt+=c*dt,Wt+=c*wt,rr+=c*gt,jr+=c*We,Jt+=c*Tt,Fr+=c*Rt,c=T[14],Xe+=c*ht,Ne+=c*tt,He+=c*lt,ut+=c*ft,Me+=c*at,Pt+=c*rt,Lt+=c*Ct,Kt+=c*Ot,Ht+=c*pt,zt+=c*At,Wt+=c*dt,rr+=c*wt,jr+=c*gt,Jt+=c*We,Fr+=c*Tt,si+=c*Rt,c=T[15],Ne+=c*ht,He+=c*tt,ut+=c*lt,Me+=c*ft,Pt+=c*at,Lt+=c*rt,Kt+=c*Ct,Ht+=c*Ot,zt+=c*pt,Wt+=c*At,rr+=c*dt,jr+=c*wt,Jt+=c*gt,Fr+=c*We,si+=c*Tt,bi+=c*Rt,Q+=38*He,oe+=38*ut,me+=38*Me,Re+=38*Pt,De+=38*Lt,xe+=38*Kt,St+=38*Ht,mt+=38*zt,st+=38*Wt,Le+=38*rr,Je+=38*jr,Ye+=38*Jt,nt+=38*Fr,Ue+=38*si,Xe+=38*bi,b=1,c=Q+b+65535,b=Math.floor(c/65536),Q=c-b*65536,c=oe+b+65535,b=Math.floor(c/65536),oe=c-b*65536,c=me+b+65535,b=Math.floor(c/65536),me=c-b*65536,c=Re+b+65535,b=Math.floor(c/65536),Re=c-b*65536,c=De+b+65535,b=Math.floor(c/65536),De=c-b*65536,c=xe+b+65535,b=Math.floor(c/65536),xe=c-b*65536,c=St+b+65535,b=Math.floor(c/65536),St=c-b*65536,c=mt+b+65535,b=Math.floor(c/65536),mt=c-b*65536,c=st+b+65535,b=Math.floor(c/65536),st=c-b*65536,c=Le+b+65535,b=Math.floor(c/65536),Le=c-b*65536,c=Je+b+65535,b=Math.floor(c/65536),Je=c-b*65536,c=Ye+b+65535,b=Math.floor(c/65536),Ye=c-b*65536,c=nt+b+65535,b=Math.floor(c/65536),nt=c-b*65536,c=Ue+b+65535,b=Math.floor(c/65536),Ue=c-b*65536,c=Xe+b+65535,b=Math.floor(c/65536),Xe=c-b*65536,c=Ne+b+65535,b=Math.floor(c/65536),Ne=c-b*65536,Q+=b-1+37*(b-1),b=1,c=Q+b+65535,b=Math.floor(c/65536),Q=c-b*65536,c=oe+b+65535,b=Math.floor(c/65536),oe=c-b*65536,c=me+b+65535,b=Math.floor(c/65536),me=c-b*65536,c=Re+b+65535,b=Math.floor(c/65536),Re=c-b*65536,c=De+b+65535,b=Math.floor(c/65536),De=c-b*65536,c=xe+b+65535,b=Math.floor(c/65536),xe=c-b*65536,c=St+b+65535,b=Math.floor(c/65536),St=c-b*65536,c=mt+b+65535,b=Math.floor(c/65536),mt=c-b*65536,c=st+b+65535,b=Math.floor(c/65536),st=c-b*65536,c=Le+b+65535,b=Math.floor(c/65536),Le=c-b*65536,c=Je+b+65535,b=Math.floor(c/65536),Je=c-b*65536,c=Ye+b+65535,b=Math.floor(c/65536),Ye=c-b*65536,c=nt+b+65535,b=Math.floor(c/65536),nt=c-b*65536,c=Ue+b+65535,b=Math.floor(c/65536),Ue=c-b*65536,c=Xe+b+65535,b=Math.floor(c/65536),Xe=c-b*65536,c=Ne+b+65535,b=Math.floor(c/65536),Ne=c-b*65536,Q+=b-1+37*(b-1),R[0]=Q,R[1]=oe,R[2]=me,R[3]=Re,R[4]=De,R[5]=xe,R[6]=St,R[7]=mt,R[8]=st,R[9]=Le,R[10]=Je,R[11]=Ye,R[12]=nt,R[13]=Ue,R[14]=Xe,R[15]=Ne}function W(R,T){K(R,T,T)}function ve(R,T){const P=a();let c;for(c=0;c<16;c++)P[c]=T[c];for(c=253;c>=0;c--)W(P,P),c!==2&&c!==4&&K(P,P,T);for(c=0;c<16;c++)R[c]=P[c]}function te(R,T){const P=a();let c;for(c=0;c<16;c++)P[c]=T[c];for(c=250;c>=0;c--)W(P,P),c!==1&&K(P,P,T);for(c=0;c<16;c++)R[c]=P[c]}function Ee(R,T){const P=a(),c=a(),b=a(),Q=a(),oe=a(),me=a(),Re=a(),De=a(),xe=a();N(P,R[1],R[0]),N(xe,T[1],T[0]),K(P,P,xe),pe(c,R[0],R[1]),pe(xe,T[0],T[1]),K(c,c,xe),K(b,R[3],T[3]),K(b,b,v),K(Q,R[2],T[2]),pe(Q,Q,Q),N(oe,c,P),N(me,Q,b),pe(Re,Q,b),pe(De,c,P),K(R[0],oe,me),K(R[1],De,Re),K(R[2],Re,me),K(R[3],oe,De)}function Ae(R,T,P){for(let c=0;c<4;c++)V(R[c],T[c],P)}function et(R,T){const P=a(),c=a(),b=a();ve(b,T[2]),K(P,T[0],b),K(c,T[1],b),re(R,c),R[31]^=he(P)<<7}function O(R,T,P){U(R[0],d),U(R[1],y),U(R[2],y),U(R[3],d);for(let c=255;c>=0;--c){const b=P[c/8|0]>>(c&7)&1;Ae(R,T,b),Ee(T,R),Ee(R,R),Ae(R,T,b)}}function z(R,T){const P=[a(),a(),a(),a()];U(P[0],x),U(P[1],A),U(P[2],y),K(P[3],x,A),O(R,P,T)}function qe(R){if(R.length!==u.SEED_LENGTH)throw new Error(`ed25519: seed must be ${u.SEED_LENGTH} bytes`);const T=(0,r.hash)(R);T[0]&=248,T[31]&=127,T[31]|=64;const P=new Uint8Array(32),c=[a(),a(),a(),a()];z(c,T),et(P,c);const b=new Uint8Array(64);return b.set(R),b.set(P,32),{publicKey:P,secretKey:b}}u.generateKeyPairFromSeed=qe;function Te(R){const T=(0,i.randomBytes)(32,R),P=qe(T);return(0,n.wipe)(T),P}u.generateKeyPair=Te;function J(R){if(R.length!==u.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${u.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}u.extractPublicKeyFromSecretKey=J;const F=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function H(R,T){let P,c,b,Q;for(c=63;c>=32;--c){for(P=0,b=c-32,Q=c-12;b<Q;++b)T[b]+=P-16*T[c]*F[b-(c-32)],P=Math.floor((T[b]+128)/256),T[b]-=P*256;T[b]+=P,T[c]=0}for(P=0,b=0;b<32;b++)T[b]+=P-(T[31]>>4)*F[b],P=T[b]>>8,T[b]&=255;for(b=0;b<32;b++)T[b]-=P*F[b];for(c=0;c<32;c++)T[c+1]+=T[c]>>8,R[c]=T[c]&255}function B(R){const T=new Float64Array(64);for(let P=0;P<64;P++)T[P]=R[P];for(let P=0;P<64;P++)R[P]=0;H(R,T)}function ct(R,T){const P=new Float64Array(64),c=[a(),a(),a(),a()],b=(0,r.hash)(R.subarray(0,32));b[0]&=248,b[31]&=127,b[31]|=64;const Q=new Uint8Array(64);Q.set(b.subarray(32),32);const oe=new r.SHA512;oe.update(Q.subarray(32)),oe.update(T);const me=oe.digest();oe.clean(),B(me),z(c,me),et(Q,c),oe.reset(),oe.update(Q.subarray(0,32)),oe.update(R.subarray(32)),oe.update(T);const Re=oe.digest();B(Re);for(let De=0;De<32;De++)P[De]=me[De];for(let De=0;De<32;De++)for(let xe=0;xe<32;xe++)P[De+xe]+=Re[De]*b[xe];return H(Q.subarray(32),P),Q}u.sign=ct;function Ke(R,T){const P=a(),c=a(),b=a(),Q=a(),oe=a(),me=a(),Re=a();return U(R[2],y),fe(R[1],T),W(b,R[1]),K(Q,b,_),N(b,b,R[2]),pe(Q,R[2],Q),W(oe,Q),W(me,oe),K(Re,me,oe),K(P,Re,b),K(P,P,Q),te(P,P),K(P,P,b),K(P,P,Q),K(P,P,Q),K(R[0],P,Q),W(c,R[0]),K(c,c,Q),ue(c,b)&&K(R[0],R[0],D),W(c,R[0]),K(c,c,Q),ue(c,b)?-1:(he(R[0])===T[31]>>7&&N(R[0],d,R[0]),K(R[3],R[0],R[1]),0)}function Lr(R,T,P){const c=new Uint8Array(32),b=[a(),a(),a(),a()],Q=[a(),a(),a(),a()];if(P.length!==u.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${u.SIGNATURE_LENGTH} bytes`);if(Ke(Q,R))return!1;const oe=new r.SHA512;oe.update(P.subarray(0,32)),oe.update(R),oe.update(T);const me=oe.digest();return B(me),O(b,Q,me),z(Q,P.subarray(32)),Ee(b,Q),et(c,b),!ce(P,c)}u.verify=Lr;function _e(R){let T=[a(),a(),a(),a()];if(Ke(T,R))throw new Error("Ed25519: invalid public key");let P=a(),c=a(),b=T[1];pe(P,y,b),N(c,y,b),ve(c,c),K(P,P,c);let Q=new Uint8Array(32);return re(Q,P),Q}u.convertPublicKeyToX25519=_e;function xt(R){const T=(0,r.hash)(R.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const P=new Uint8Array(T.subarray(0,32));return(0,n.wipe)(T),P}u.convertSecretKeyToX25519=xt})(vc);const Ew="EdDSA",Iw="JWT",Ll=".",jl="base64url",xw="utf8",Sw="utf8",Pw=":",Cw="did",Ow="key",qh="base58btc",Aw="z",Tw="K36",Rw=32;function na(u){return ca(uc(qs(u),xw),jl)}function Ml(u){const i=uc(Tw,qh),r=Aw+ca(q0([i,u]),qh);return[Cw,Ow,r].join(Pw)}function Nw(u){return ca(u,jl)}function Dw(u){return uc([na(u.header),na(u.payload)].join(Ll),Sw)}function $w(u){return[na(u.header),na(u.payload),Nw(u.signature)].join(Ll)}function Uh(u=bl.randomBytes(Rw)){return vc.generateKeyPairFromSeed(u)}async function Lw(u,i,r,n,a=se.fromMiliseconds(Date.now())){const l={alg:Ew,typ:Iw},d=Ml(n.publicKey),y=a+r,_={iss:d,sub:u,aud:i,iat:a,exp:y},v=Dw({header:l,payload:_}),x=vc.sign(n.secretKey,v);return $w({header:l,payload:_,signature:x})}const jw=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),Mw=()=>typeof window<"u",kh=u=>u.split("?")[0],Kh=10,zw=jw();class qw{constructor(i){if(this.url=i,this.events=new Vr.EventEmitter,this.registering=!1,!Sh(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),i()},this.socket.close()})}async send(i,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(qs(i))}catch(n){this.onError(i.id,n)}}register(i=this.url){if(!Sh(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=i,this.registering=!0,new Promise((r,n)=>{const a=xm.isReactNative()?void 0:{rejectUnauthorized:!Sm(i)},l=new zw(i,[],a);Mw()?l.onerror=d=>{const y=d;n(this.emitError(y.error))}:l.on("error",d=>{n(this.emitError(d))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(i){i.onmessage=r=>this.onPayload(r),i.onclose=r=>this.onClose(r),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;const r=typeof i.data=="string"?ua(i.data):i.data;this.events.emit("payload",r)}onError(i,r){const n=this.parseError(r),a=n.message||n.toString(),l=hc(i,a);this.events.emit("payload",l)}parseError(i,r=this.url){return Pm(i,kh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Kh&&this.events.setMaxListeners(Kh)}emitError(i){const r=this.parseError(new Error((i==null?void 0:i.message)||`WebSocket connection failed for host: ${kh(this.url)}`));return this.events.emit("register_error",r),r}}var aa={exports:{}};aa.exports;(function(u,i){var r=200,n="__lodash_hash_undefined__",a=1,l=2,d=9007199254740991,y="[object Arguments]",_="[object Array]",v="[object AsyncFunction]",x="[object Boolean]",A="[object Date]",D="[object Error]",U="[object Function]",L="[object GeneratorFunction]",V="[object Map]",re="[object Number]",ce="[object Null]",ue="[object Object]",he="[object Promise]",fe="[object Proxy]",pe="[object RegExp]",N="[object Set]",K="[object String]",W="[object Symbol]",ve="[object Undefined]",te="[object WeakMap]",Ee="[object ArrayBuffer]",Ae="[object DataView]",et="[object Float32Array]",O="[object Float64Array]",z="[object Int8Array]",qe="[object Int16Array]",Te="[object Int32Array]",J="[object Uint8Array]",F="[object Uint8ClampedArray]",H="[object Uint16Array]",B="[object Uint32Array]",ct=/[\\^$.*+?()[\]{}|]/g,Ke=/^\[object .+?Constructor\]$/,Lr=/^(?:0|[1-9]\d*)$/,_e={};_e[et]=_e[O]=_e[z]=_e[qe]=_e[Te]=_e[J]=_e[F]=_e[H]=_e[B]=!0,_e[y]=_e[_]=_e[Ee]=_e[x]=_e[Ae]=_e[A]=_e[D]=_e[U]=_e[V]=_e[re]=_e[ue]=_e[pe]=_e[N]=_e[K]=_e[te]=!1;var xt=typeof Gn=="object"&&Gn&&Gn.Object===Object&&Gn,R=typeof self=="object"&&self&&self.Object===Object&&self,T=xt||R||Function("return this")(),P=i&&!i.nodeType&&i,c=P&&!0&&u&&!u.nodeType&&u,b=c&&c.exports===P,Q=b&&xt.process,oe=function(){try{return Q&&Q.binding&&Q.binding("util")}catch{}}(),me=oe&&oe.isTypedArray;function Re(g,E){for(var q=-1,Y=g==null?0:g.length,Fe=0,de=[];++q<Y;){var Ze=g[q];E(Ze,q,g)&&(de[Fe++]=Ze)}return de}function De(g,E){for(var q=-1,Y=E.length,Fe=g.length;++q<Y;)g[Fe+q]=E[q];return g}function xe(g,E){for(var q=-1,Y=g==null?0:g.length;++q<Y;)if(E(g[q],q,g))return!0;return!1}function St(g,E){for(var q=-1,Y=Array(g);++q<g;)Y[q]=E(q);return Y}function mt(g){return function(E){return g(E)}}function st(g,E){return g.has(E)}function Le(g,E){return g==null?void 0:g[E]}function Je(g){var E=-1,q=Array(g.size);return g.forEach(function(Y,Fe){q[++E]=[Fe,Y]}),q}function Ye(g,E){return function(q){return g(E(q))}}function nt(g){var E=-1,q=Array(g.size);return g.forEach(function(Y){q[++E]=Y}),q}var Ue=Array.prototype,Xe=Function.prototype,Ne=Object.prototype,He=T["__core-js_shared__"],ut=Xe.toString,Me=Ne.hasOwnProperty,Pt=function(){var g=/[^.]+$/.exec(He&&He.keys&&He.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Lt=Ne.toString,Kt=RegExp("^"+ut.call(Me).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=b?T.Buffer:void 0,zt=T.Symbol,Wt=T.Uint8Array,rr=Ne.propertyIsEnumerable,jr=Ue.splice,Jt=zt?zt.toStringTag:void 0,Fr=Object.getOwnPropertySymbols,si=Ht?Ht.isBuffer:void 0,bi=Ye(Object.keys,Object),ht=hr(T,"DataView"),tt=hr(T,"Map"),lt=hr(T,"Promise"),ft=hr(T,"Set"),at=hr(T,"WeakMap"),rt=hr(Object,"create"),Ct=Gr(ht),Ot=Gr(tt),pt=Gr(lt),At=Gr(ft),dt=Gr(at),wt=zt?zt.prototype:void 0,gt=wt?wt.valueOf:void 0;function We(g){var E=-1,q=g==null?0:g.length;for(this.clear();++E<q;){var Y=g[E];this.set(Y[0],Y[1])}}function Tt(){this.__data__=rt?rt(null):{},this.size=0}function Rt(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}function fa(g){var E=this.__data__;if(rt){var q=E[g];return q===n?void 0:q}return Me.call(E,g)?E[g]:void 0}function pa(g){var E=this.__data__;return rt?E[g]!==void 0:Me.call(E,g)}function da(g,E){var q=this.__data__;return this.size+=this.has(g)?0:1,q[g]=rt&&E===void 0?n:E,this}We.prototype.clear=Tt,We.prototype.delete=Rt,We.prototype.get=fa,We.prototype.has=pa,We.prototype.set=da;function vr(g){var E=-1,q=g==null?0:g.length;for(this.clear();++E<q;){var Y=g[E];this.set(Y[0],Y[1])}}function ga(){this.__data__=[],this.size=0}function va(g){var E=this.__data__,q=Ei(E,g);if(q<0)return!1;var Y=E.length-1;return q==Y?E.pop():jr.call(E,q,1),--this.size,!0}function ya(g){var E=this.__data__,q=Ei(E,g);return q<0?void 0:E[q][1]}function ma(g){return Ei(this.__data__,g)>-1}function wa(g,E){var q=this.__data__,Y=Ei(q,g);return Y<0?(++this.size,q.push([g,E])):q[Y][1]=E,this}vr.prototype.clear=ga,vr.prototype.delete=va,vr.prototype.get=ya,vr.prototype.has=ma,vr.prototype.set=wa;function Br(g){var E=-1,q=g==null?0:g.length;for(this.clear();++E<q;){var Y=g[E];this.set(Y[0],Y[1])}}function Ui(){this.size=0,this.__data__={hash:new We,map:new(tt||vr),string:new We}}function _a(g){var E=ni(this,g).delete(g);return this.size-=E?1:0,E}function ki(g){return ni(this,g).get(g)}function ba(g){return ni(this,g).has(g)}function Ea(g,E){var q=ni(this,g),Y=q.size;return q.set(g,E),this.size+=q.size==Y?0:1,this}Br.prototype.clear=Ui,Br.prototype.delete=_a,Br.prototype.get=ki,Br.prototype.has=ba,Br.prototype.set=Ea;function Ki(g){var E=-1,q=g==null?0:g.length;for(this.__data__=new Br;++E<q;)this.add(g[E])}function Ks(g){return this.__data__.set(g,n),this}function Hs(g){return this.__data__.has(g)}Ki.prototype.add=Ki.prototype.push=Ks,Ki.prototype.has=Hs;function Or(g){var E=this.__data__=new vr(g);this.size=E.size}function Ia(){this.__data__=new vr,this.size=0}function xa(g){var E=this.__data__,q=E.delete(g);return this.size=E.size,q}function Sa(g){return this.__data__.get(g)}function Pa(g){return this.__data__.has(g)}function Vs(g,E){var q=this.__data__;if(q instanceof vr){var Y=q.__data__;if(!tt||Y.length<r-1)return Y.push([g,E]),this.size=++q.size,this;q=this.__data__=new Br(Y)}return q.set(g,E),this.size=q.size,this}Or.prototype.clear=Ia,Or.prototype.delete=xa,Or.prototype.get=Sa,Or.prototype.has=Pa,Or.prototype.set=Vs;function Fs(g,E){var q=Fi(g),Y=!q&&sn(g),Fe=!q&&!Y&&ps(g),de=!q&&!Y&&!Fe&&on(g),Ze=q||Y||Fe||de,Nt=Ze?St(g.length,String):[],Pe=Nt.length;for(var Be in g)(E||Me.call(g,Be))&&!(Ze&&(Be=="length"||Fe&&(Be=="offset"||Be=="parent")||de&&(Be=="buffer"||Be=="byteLength"||Be=="byteOffset")||Zs(Be,Pe)))&&Nt.push(Be);return Nt}function Ei(g,E){for(var q=g.length;q--;)if(rn(g[q][0],E))return q;return-1}function ls(g,E,q){var Y=E(g);return Fi(g)?Y:De(Y,q(g))}function Ii(g){return g==null?g===void 0?ve:ce:Jt&&Jt in Object(g)?Ys(g):Aa(g)}function fs(g){return Si(g)&&Ii(g)==y}function xi(g,E,q,Y,Fe){return g===E?!0:g==null||E==null||!Si(g)&&!Si(E)?g!==g&&E!==E:Bs(g,E,q,Y,xi,Fe)}function Bs(g,E,q,Y,Fe,de){var Ze=Fi(g),Nt=Fi(E),Pe=Ze?_:Mr(g),Be=Nt?_:Mr(E);Pe=Pe==y?ue:Pe,Be=Be==y?ue:Be;var _t=Pe==ue,ir=Be==ue,Dt=Pe==Be;if(Dt&&ps(g)){if(!ps(E))return!1;Ze=!0,_t=!1}if(Dt&&!_t)return de||(de=new Or),Ze||on(g)?Hi(g,E,q,Y,Fe,de):Oa(g,E,Pe,q,Y,Fe,de);if(!(q&a)){var Qe=_t&&Me.call(g,"__wrapped__"),Yt=ir&&Me.call(E,"__wrapped__");if(Qe||Yt){var Ar=Qe?g.value():g,yr=Yt?E.value():E;return de||(de=new Or),Fe(Ar,yr,q,Y,de)}}return Dt?(de||(de=new Or),Js(g,E,q,Y,Fe,de)):!1}function Ca(g){if(!an(g)||en(g))return!1;var E=Bi(g)?Kt:Ke;return E.test(Gr(g))}function Gs(g){return Si(g)&&nn(g.length)&&!!_e[Ii(g)]}function Ws(g){if(!tn(g))return bi(g);var E=[];for(var q in Object(g))Me.call(g,q)&&q!="constructor"&&E.push(q);return E}function Hi(g,E,q,Y,Fe,de){var Ze=q&a,Nt=g.length,Pe=E.length;if(Nt!=Pe&&!(Ze&&Pe>Nt))return!1;var Be=de.get(g);if(Be&&de.get(E))return Be==E;var _t=-1,ir=!0,Dt=q&l?new Ki:void 0;for(de.set(g,E),de.set(E,g);++_t<Nt;){var Qe=g[_t],Yt=E[_t];if(Y)var Ar=Ze?Y(Yt,Qe,_t,E,g,de):Y(Qe,Yt,_t,g,E,de);if(Ar!==void 0){if(Ar)continue;ir=!1;break}if(Dt){if(!xe(E,function(yr,zr){if(!st(Dt,zr)&&(Qe===yr||Fe(Qe,yr,q,Y,de)))return Dt.push(zr)})){ir=!1;break}}else if(!(Qe===Yt||Fe(Qe,Yt,q,Y,de))){ir=!1;break}}return de.delete(g),de.delete(E),ir}function Oa(g,E,q,Y,Fe,de,Ze){switch(q){case Ae:if(g.byteLength!=E.byteLength||g.byteOffset!=E.byteOffset)return!1;g=g.buffer,E=E.buffer;case Ee:return!(g.byteLength!=E.byteLength||!de(new Wt(g),new Wt(E)));case x:case A:case re:return rn(+g,+E);case D:return g.name==E.name&&g.message==E.message;case pe:case K:return g==E+"";case V:var Nt=Je;case N:var Pe=Y&a;if(Nt||(Nt=nt),g.size!=E.size&&!Pe)return!1;var Be=Ze.get(g);if(Be)return Be==E;Y|=l,Ze.set(g,E);var _t=Hi(Nt(g),Nt(E),Y,Fe,de,Ze);return Ze.delete(g),_t;case W:if(gt)return gt.call(g)==gt.call(E)}return!1}function Js(g,E,q,Y,Fe,de){var Ze=q&a,Nt=Vi(g),Pe=Nt.length,Be=Vi(E),_t=Be.length;if(Pe!=_t&&!Ze)return!1;for(var ir=Pe;ir--;){var Dt=Nt[ir];if(!(Ze?Dt in E:Me.call(E,Dt)))return!1}var Qe=de.get(g);if(Qe&&de.get(E))return Qe==E;var Yt=!0;de.set(g,E),de.set(E,g);for(var Ar=Ze;++ir<Pe;){Dt=Nt[ir];var yr=g[Dt],zr=E[Dt];if(Y)var ds=Ze?Y(zr,yr,Dt,E,g,de):Y(yr,zr,Dt,g,E,de);if(!(ds===void 0?yr===zr||Fe(yr,zr,q,Y,de):ds)){Yt=!1;break}Ar||(Ar=Dt=="constructor")}if(Yt&&!Ar){var Pi=g.constructor,qt=E.constructor;Pi!=qt&&"constructor"in g&&"constructor"in E&&!(typeof Pi=="function"&&Pi instanceof Pi&&typeof qt=="function"&&qt instanceof qt)&&(Yt=!1)}return de.delete(g),de.delete(E),Yt}function Vi(g){return ls(g,Na,Xs)}function ni(g,E){var q=g.__data__;return Qs(E)?q[typeof E=="string"?"string":"hash"]:q.map}function hr(g,E){var q=Le(g,E);return Ca(q)?q:void 0}function Ys(g){var E=Me.call(g,Jt),q=g[Jt];try{g[Jt]=void 0;var Y=!0}catch{}var Fe=Lt.call(g);return Y&&(E?g[Jt]=q:delete g[Jt]),Fe}var Xs=Fr?function(g){return g==null?[]:(g=Object(g),Re(Fr(g),function(E){return rr.call(g,E)}))}:Ve,Mr=Ii;(ht&&Mr(new ht(new ArrayBuffer(1)))!=Ae||tt&&Mr(new tt)!=V||lt&&Mr(lt.resolve())!=he||ft&&Mr(new ft)!=N||at&&Mr(new at)!=te)&&(Mr=function(g){var E=Ii(g),q=E==ue?g.constructor:void 0,Y=q?Gr(q):"";if(Y)switch(Y){case Ct:return Ae;case Ot:return V;case pt:return he;case At:return N;case dt:return te}return E});function Zs(g,E){return E=E??d,!!E&&(typeof g=="number"||Lr.test(g))&&g>-1&&g%1==0&&g<E}function Qs(g){var E=typeof g;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?g!=="__proto__":g===null}function en(g){return!!Pt&&Pt in g}function tn(g){var E=g&&g.constructor,q=typeof E=="function"&&E.prototype||Ne;return g===q}function Aa(g){return Lt.call(g)}function Gr(g){if(g!=null){try{return ut.call(g)}catch{}try{return g+""}catch{}}return""}function rn(g,E){return g===E||g!==g&&E!==E}var sn=fs(function(){return arguments}())?fs:function(g){return Si(g)&&Me.call(g,"callee")&&!rr.call(g,"callee")},Fi=Array.isArray;function Ta(g){return g!=null&&nn(g.length)&&!Bi(g)}var ps=si||ke;function Ra(g,E){return xi(g,E)}function Bi(g){if(!an(g))return!1;var E=Ii(g);return E==U||E==L||E==v||E==fe}function nn(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=d}function an(g){var E=typeof g;return g!=null&&(E=="object"||E=="function")}function Si(g){return g!=null&&typeof g=="object"}var on=me?mt(me):Gs;function Na(g){return Ta(g)?Fs(g):Ws(g)}function Ve(){return[]}function ke(){return!1}u.exports=Ra})(aa,aa.exports);var Uw=aa.exports;const kw=U0(Uw);var Kw={};function Hw(u,i){if(u.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<u.length;a++){var l=u.charAt(a),d=l.charCodeAt(0);if(r[d]!==255)throw new TypeError(l+" is ambiguous");r[d]=a}var y=u.length,_=u.charAt(0),v=Math.log(y)/Math.log(256),x=Math.log(256)/Math.log(y);function A(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var V=0,re=0,ce=0,ue=L.length;ce!==ue&&L[ce]===0;)ce++,V++;for(var he=(ue-ce)*x+1>>>0,fe=new Uint8Array(he);ce!==ue;){for(var pe=L[ce],N=0,K=he-1;(pe!==0||N<re)&&K!==-1;K--,N++)pe+=256*fe[K]>>>0,fe[K]=pe%y>>>0,pe=pe/y>>>0;if(pe!==0)throw new Error("Non-zero carry");re=N,ce++}for(var W=he-re;W!==he&&fe[W]===0;)W++;for(var ve=_.repeat(V);W<he;++W)ve+=u.charAt(fe[W]);return ve}function D(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var V=0;if(L[V]!==" "){for(var re=0,ce=0;L[V]===_;)re++,V++;for(var ue=(L.length-V)*v+1>>>0,he=new Uint8Array(ue);L[V];){var fe=r[L.charCodeAt(V)];if(fe===255)return;for(var pe=0,N=ue-1;(fe!==0||pe<ce)&&N!==-1;N--,pe++)fe+=y*he[N]>>>0,he[N]=fe%256>>>0,fe=fe/256>>>0;if(fe!==0)throw new Error("Non-zero carry");ce=pe,V++}if(L[V]!==" "){for(var K=ue-ce;K!==ue&&he[K]===0;)K++;for(var W=new Uint8Array(re+(ue-K)),ve=re;K!==ue;)W[ve++]=he[K++];return W}}}function U(L){var V=D(L);if(V)return V;throw new Error(`Non-${i} character`)}return{encode:A,decodeUnsafe:D,decode:U}}var Vw=Hw,Fw=Vw;const zl=u=>{if(u instanceof Uint8Array&&u.constructor.name==="Uint8Array")return u;if(u instanceof ArrayBuffer)return new Uint8Array(u);if(ArrayBuffer.isView(u))return new Uint8Array(u.buffer,u.byteOffset,u.byteLength);throw new Error("Unknown type, must be binary type")},Bw=u=>new TextEncoder().encode(u),Gw=u=>new TextDecoder().decode(u);class Ww{constructor(i,r,n){this.name=i,this.prefix=r,this.baseEncode=n}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}}class Jw{constructor(i,r,n){if(this.name=i,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(i){if(typeof i=="string"){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(i){return ql(this,i)}}class Yw{constructor(i){this.decoders=i}or(i){return ql(this,i)}decode(i){const r=i[0],n=this.decoders[r];if(n)return n.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ql=(u,i)=>new Yw({...u.decoders||{[u.prefix]:u},...i.decoders||{[i.prefix]:i}});class Xw{constructor(i,r,n,a){this.name=i,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new Ww(i,r,n),this.decoder=new Jw(i,r,a)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}}const ha=({name:u,prefix:i,encode:r,decode:n})=>new Xw(u,i,r,n),ks=({prefix:u,name:i,alphabet:r})=>{const{encode:n,decode:a}=Fw(r,i);return ha({prefix:u,name:i,encode:n,decode:l=>zl(a(l))})},Zw=(u,i,r,n)=>{const a={};for(let x=0;x<i.length;++x)a[i[x]]=x;let l=u.length;for(;u[l-1]==="=";)--l;const d=new Uint8Array(l*r/8|0);let y=0,_=0,v=0;for(let x=0;x<l;++x){const A=a[u[x]];if(A===void 0)throw new SyntaxError(`Non-${n} character`);_=_<<r|A,y+=r,y>=8&&(y-=8,d[v++]=255&_>>y)}if(y>=r||255&_<<8-y)throw new SyntaxError("Unexpected end of data");return d},Qw=(u,i,r)=>{const n=i[i.length-1]==="=",a=(1<<r)-1;let l="",d=0,y=0;for(let _=0;_<u.length;++_)for(y=y<<8|u[_],d+=8;d>r;)d-=r,l+=i[a&y>>d];if(d&&(l+=i[a&y<<r-d]),n)for(;l.length*r&7;)l+="=";return l},Ft=({name:u,prefix:i,bitsPerChar:r,alphabet:n})=>ha({prefix:i,name:u,encode(a){return Qw(a,n,r)},decode(a){return Zw(a,n,r,u)}}),e_=ha({prefix:"\0",name:"identity",encode:u=>Gw(u),decode:u=>Bw(u)});var t_=Object.freeze({__proto__:null,identity:e_});const r_=Ft({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var i_=Object.freeze({__proto__:null,base2:r_});const s_=Ft({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var n_=Object.freeze({__proto__:null,base8:s_});const a_=ks({prefix:"9",name:"base10",alphabet:"0123456789"});var o_=Object.freeze({__proto__:null,base10:a_});const c_=Ft({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),u_=Ft({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var h_=Object.freeze({__proto__:null,base16:c_,base16upper:u_});const l_=Ft({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),f_=Ft({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p_=Ft({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),d_=Ft({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),g_=Ft({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),v_=Ft({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),y_=Ft({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),m_=Ft({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),w_=Ft({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var __=Object.freeze({__proto__:null,base32:l_,base32upper:f_,base32pad:p_,base32padupper:d_,base32hex:g_,base32hexupper:v_,base32hexpad:y_,base32hexpadupper:m_,base32z:w_});const b_=ks({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),E_=ks({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var I_=Object.freeze({__proto__:null,base36:b_,base36upper:E_});const x_=ks({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),S_=ks({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var P_=Object.freeze({__proto__:null,base58btc:x_,base58flickr:S_});const C_=Ft({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),O_=Ft({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),A_=Ft({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),T_=Ft({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var R_=Object.freeze({__proto__:null,base64:C_,base64pad:O_,base64url:A_,base64urlpad:T_});const Ul=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),N_=Ul.reduce((u,i,r)=>(u[r]=i,u),[]),D_=Ul.reduce((u,i,r)=>(u[i.codePointAt(0)]=r,u),[]);function $_(u){return u.reduce((i,r)=>(i+=N_[r],i),"")}function L_(u){const i=[];for(const r of u){const n=D_[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);i.push(n)}return new Uint8Array(i)}const j_=ha({prefix:"🚀",name:"base256emoji",encode:$_,decode:L_});var M_=Object.freeze({__proto__:null,base256emoji:j_}),z_=kl,Hh=128,q_=127,U_=~q_,k_=Math.pow(2,31);function kl(u,i,r){i=i||[],r=r||0;for(var n=r;u>=k_;)i[r++]=u&255|Hh,u/=128;for(;u&U_;)i[r++]=u&255|Hh,u>>>=7;return i[r]=u|0,kl.bytes=r-n+1,i}var K_=ic,H_=128,Vh=127;function ic(u,n){var r=0,n=n||0,a=0,l=n,d,y=u.length;do{if(l>=y)throw ic.bytes=0,new RangeError("Could not decode varint");d=u[l++],r+=a<28?(d&Vh)<<a:(d&Vh)*Math.pow(2,a),a+=7}while(d>=H_);return ic.bytes=l-n,r}var V_=Math.pow(2,7),F_=Math.pow(2,14),B_=Math.pow(2,21),G_=Math.pow(2,28),W_=Math.pow(2,35),J_=Math.pow(2,42),Y_=Math.pow(2,49),X_=Math.pow(2,56),Z_=Math.pow(2,63),Q_=function(u){return u<V_?1:u<F_?2:u<B_?3:u<G_?4:u<W_?5:u<J_?6:u<Y_?7:u<X_?8:u<Z_?9:10},e1={encode:z_,decode:K_,encodingLength:Q_},Kl=e1;const Fh=(u,i,r=0)=>(Kl.encode(u,i,r),i),Bh=u=>Kl.encodingLength(u),sc=(u,i)=>{const r=i.byteLength,n=Bh(u),a=n+Bh(r),l=new Uint8Array(a+r);return Fh(u,l,0),Fh(r,l,n),l.set(i,a),new t1(u,r,i,l)};class t1{constructor(i,r,n,a){this.code=i,this.size=r,this.digest=n,this.bytes=a}}const Hl=({name:u,code:i,encode:r})=>new r1(u,i,r);class r1{constructor(i,r,n){this.name=i,this.code=r,this.encode=n}digest(i){if(i instanceof Uint8Array){const r=this.encode(i);return r instanceof Uint8Array?sc(this.code,r):r.then(n=>sc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Vl=u=>async i=>new Uint8Array(await crypto.subtle.digest(u,i)),i1=Hl({name:"sha2-256",code:18,encode:Vl("SHA-256")}),s1=Hl({name:"sha2-512",code:19,encode:Vl("SHA-512")});var n1=Object.freeze({__proto__:null,sha256:i1,sha512:s1});const Fl=0,a1="identity",Bl=zl,o1=u=>sc(Fl,Bl(u)),c1={code:Fl,name:a1,encode:Bl,digest:o1};var u1=Object.freeze({__proto__:null,identity:c1});new TextEncoder,new TextDecoder;const Gh={...t_,...i_,...n_,...o_,...h_,...__,...I_,...P_,...R_,...M_};({...n1,...u1});function Gl(u){return globalThis.Buffer!=null?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):u}function h1(u=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Gl(globalThis.Buffer.allocUnsafe(u)):new Uint8Array(u)}function Wl(u,i,r,n){return{name:u,prefix:i,encoder:{name:u,prefix:i,encode:r},decoder:{decode:n}}}const Wh=Wl("utf8","u",u=>"u"+new TextDecoder("utf8").decode(u),u=>new TextEncoder().encode(u.substring(1))),Fo=Wl("ascii","a",u=>{let i="a";for(let r=0;r<u.length;r++)i+=String.fromCharCode(u[r]);return i},u=>{u=u.substring(1);const i=h1(u.length);for(let r=0;r<u.length;r++)i[r]=u.charCodeAt(r);return i}),l1={utf8:Wh,"utf-8":Wh,hex:Gh.base16,latin1:Fo,ascii:Fo,binary:Fo,...Gh};function f1(u,i="utf8"){const r=l1[i];if(!r)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Gl(globalThis.Buffer.from(u,"utf-8")):r.decoder.decode(`${r.prefix}${u}`)}const Jl="wc",p1=2,yc="core",mi=`${Jl}@2:${yc}:`,d1={name:yc,logger:"error"},g1={database:":memory:"},v1="crypto",Jh="client_ed25519_seed",y1=se.ONE_DAY,m1="keychain",w1="0.3",_1="messages",b1="0.3",E1=se.SIX_HOURS,I1="publisher",Yl="irn",x1="error",Xl="wss://relay.walletconnect.com",Yh="wss://relay.walletconnect.org",S1="relayer",yt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},P1="_subscription",Ns={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},C1=se.ONE_SECOND/2,O1="2.9.0",A1=1e4,T1="0.3",R1="WALLETCONNECT_CLIENT_ID",Hr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},N1="subscription",D1="0.3",$1=se.FIVE_SECONDS*1e3,L1="pairing",j1="0.3",Ds={wc_pairingDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:se.ONE_DAY,prompt:!1,tag:0},res:{ttl:se.ONE_DAY,prompt:!1,tag:0}}},Kr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},M1="history",z1="0.3",q1="expirer",Pr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},U1="0.3",Bo="verify-api",Xh="https://verify.walletconnect.com";class k1{constructor(i,r){this.core=i,this.logger=r,this.keychain=new Map,this.name=m1,this.version=w1,this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,a)=>{this.isInitialized(),this.keychain.set(n,a),await this.persist()},this.get=n=>{this.isInitialized();const a=this.keychain.get(n);if(typeof a>"u"){const{message:l}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(l)}return a},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=i,this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,Sl(i))}async getKeyChain(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Pl(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}}class K1{constructor(i,r,n){this.core=i,this.logger=r,this.name=v1,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),l=Uh(a);return Ml(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=H0();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const l=await this.getClientSeed(),d=Uh(l),y=ec();return await Lw(y,a,y1,d)},this.generateSharedKey=(a,l,d)=>{this.isInitialized();const y=this.getPrivateKey(a),_=V0(y,l);return this.setSymKey(_,d)},this.setSymKey=async(a,l)=>{this.isInitialized();const d=l||F0(a);return await this.keychain.set(d,a),d},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,l,d)=>{this.isInitialized();const y=B0(d),_=qs(l);if(bh(y)){const D=y.senderPublicKey,U=y.receiverPublicKey;a=await this.generateSharedKey(D,U)}const v=this.getSymKey(a),{type:x,senderPublicKey:A}=y;return G0({type:x,symKey:v,message:_,senderPublicKey:A})},this.decode=async(a,l,d)=>{this.isInitialized();const y=W0(l,d);if(bh(y)){const x=y.receiverPublicKey,A=y.senderPublicKey;a=await this.generateSharedKey(x,A)}const _=this.getSymKey(a),v=J0({symKey:_,encoded:l});return ua(v)},this.getPayloadType=a=>{const l=Eh(a);return Y0(l.type)},this.getPayloadSenderPublicKey=a=>{const l=Eh(a);return l.senderPublicKey?ca(l.senderPublicKey,X0):void 0},this.core=i,this.logger=Oe.generateChildLogger(r,this.name),this.keychain=n||new k1(this.core,this.logger)}get context(){return Oe.getLoggerContext(this.logger)}async setPrivateKey(i,r){return await this.keychain.set(i,r),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(Jh)}catch{i=ec(),await this.keychain.set(Jh,i)}return f1(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}}class H1 extends pw{constructor(i,r){super(i,r),this.logger=i,this.core=r,this.messages=new Map,this.name=_1,this.version=b1,this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,a)=>{this.isInitialized();const l=cs(a);let d=this.messages.get(n);return typeof d>"u"&&(d={}),typeof d[l]<"u"||(d[l]=a,this.messages.set(n,d),await this.persist()),l},this.get=n=>{this.isInitialized();let a=this.messages.get(n);return typeof a>"u"&&(a={}),a},this.has=(n,a)=>{this.isInitialized();const l=this.get(n),d=cs(a);return typeof l[d]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Oe.generateChildLogger(i,this.name),this.core=r}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,Sl(i))}async getRelayerMessages(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Pl(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}}class V1 extends dw{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.events=new Vr.EventEmitter,this.name=I1,this.queue=new Map,this.publishTimeout=se.toMiliseconds(se.TEN_SECONDS),this.queueTimeout=se.toMiliseconds(se.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,a,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:a,opts:l}});try{const d=(l==null?void 0:l.ttl)||E1,y=tc(l),_=(l==null?void 0:l.prompt)||!1,v=(l==null?void 0:l.tag)||0,x=(l==null?void 0:l.id)||Ol().toString(),A={topic:n,message:a,opts:{ttl:d,relay:y,prompt:_,tag:v,id:x}},D=setTimeout(()=>this.queue.set(x,A),this.queueTimeout);try{await await sa(this.rpcPublish(n,a,d,y,_,v,x),this.publishTimeout),clearTimeout(D),this.relayer.events.emit(yt.publish,A)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:a,opts:l}})}catch(d){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(d),d}},this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.relayer=i,this.logger=Oe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Oe.getLoggerContext(this.logger)}rpcPublish(i,r,n,a,l,d,y){var _,v,x,A;const D={method:Qn(a.protocol).publish,params:{topic:i,message:r,ttl:n,prompt:l,tag:d},id:y};return yi((_=D.params)==null?void 0:_.prompt)&&((v=D.params)==null||delete v.prompt),yi((x=D.params)==null?void 0:x.tag)&&((A=D.params)==null||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}onPublish(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{const{topic:r,message:n,opts:a}=i;await this.publish(r,n,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(yt.connection_stalled);return}this.checkQueue()}),this.relayer.on(yt.message_ack,i=>{this.onPublish(i.id.toString())})}}class F1{constructor(){this.map=new Map,this.set=(i,r)=>{const n=this.get(i);this.exists(i,r)||this.map.set(i,[...n,r])},this.get=i=>this.map.get(i)||[],this.exists=(i,r)=>this.get(i).includes(r),this.delete=(i,r)=>{if(typeof r>"u"){this.map.delete(i);return}if(!this.map.has(i))return;const n=this.get(i);if(!this.exists(i,r))return;const a=n.filter(l=>l!==r);if(!a.length){this.map.delete(i);return}this.map.set(i,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var B1=Object.defineProperty,G1=Object.defineProperties,W1=Object.getOwnPropertyDescriptors,Zh=Object.getOwnPropertySymbols,J1=Object.prototype.hasOwnProperty,Y1=Object.prototype.propertyIsEnumerable,Qh=(u,i,r)=>i in u?B1(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,$s=(u,i)=>{for(var r in i||(i={}))J1.call(i,r)&&Qh(u,r,i[r]);if(Zh)for(var r of Zh(i))Y1.call(i,r)&&Qh(u,r,i[r]);return u},Go=(u,i)=>G1(u,W1(i));class X1 extends yw{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.subscriptions=new Map,this.topicMap=new F1,this.events=new Vr.EventEmitter,this.name=N1,this.version=D1,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=mi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:a}});try{const l=tc(a),d={topic:n,relay:l};this.pending.set(n,d);const y=await this.rpcSubscribe(n,l);return this.onSubscribe(y,d),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:a}}),y}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(n,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(n,a.id,a):await this.unsubscribeByTopic(n,a)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((a,l)=>{const d=new se.Watch;d.start(this.pendingSubscriptionWatchLabel);const y=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(y),d.stop(this.pendingSubscriptionWatchLabel),a(!0)),d.elapsed(this.pendingSubscriptionWatchLabel)>=$1&&(clearInterval(y),d.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=Oe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,r){let n=!1;try{n=this.getSubscription(i).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,r){const n=this.topicMap.get(i);await Promise.all(n.map(async a=>await this.unsubscribeById(i,a,r)))}async unsubscribeById(i,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:n}});try{const a=tc(n);await this.rpcUnsubscribe(i,r,a);const l=tr("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:n}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(i,r){const n={method:Qn(r.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await sa(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(yt.connection_stalled)}return cs(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;const r=i[0].relay,n={method:Qn(r.protocol).batchSubscribe,params:{topics:i.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await sa(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(yt.connection_stalled)}}rpcUnsubscribe(i,r,n){const a={method:Qn(n.protocol).unsubscribe,params:{topic:i,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(i,r){this.setSubscription(i,Go($s({},r),{id:i})),this.pending.delete(r.topic)}onBatchSubscribe(i){i.length&&i.forEach(r=>{this.setSubscription(r.id,$s({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(i,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,i)&&this.deleteSubscription(r,n),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,r){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:r}),this.addSubscription(i,r))}addSubscription(i,r){this.subscriptions.set(i,$s({},r)),this.topicMap.set(r.topic,i),this.events.emit(Hr.created,r)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});const r=this.subscriptions.get(i);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return r}deleteSubscription(i,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:r});const n=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(n.topic,i),this.events.emit(Hr.deleted,Go($s({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Hr.sync)}async reset(){if(this.cached.length){const i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<i;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Hr.resubscribed)}async restore(){try{const i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;const r=await this.rpcBatchSubscribe(i);us(r)&&this.onBatchSubscribe(r.map((n,a)=>Go($s({},i[a]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const i=[];this.pending.forEach(r=>{i.push(r)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(yt.connect,async()=>{await this.onConnect()}),this.relayer.on(yt.disconnect,()=>{this.onDisconnect()}),this.events.on(Hr.created,async i=>{const r=Hr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()}),this.events.on(Hr.deleted,async i=>{const r=Hr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),i())},this.pollingInterval)})}}var Z1=Object.defineProperty,el=Object.getOwnPropertySymbols,Q1=Object.prototype.hasOwnProperty,eb=Object.prototype.propertyIsEnumerable,tl=(u,i,r)=>i in u?Z1(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,tb=(u,i)=>{for(var r in i||(i={}))Q1.call(i,r)&&tl(u,r,i[r]);if(el)for(var r of el(i))eb.call(i,r)&&tl(u,r,i[r]);return u};class rb extends gw{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new Vr.EventEmitter,this.name=S1,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=i.core,this.logger=typeof i.logger<"u"&&typeof i.logger!="string"?Oe.generateChildLogger(i.logger,this.name):Oe.pino(Oe.getDefaultLoggerOptions({level:i.logger||x1})),this.messages=new H1(this.logger,i.core),this.subscriber=new X1(this,this.logger),this.publisher=new V1(this,this.logger),this.relayUrl=(i==null?void 0:i.relayUrl)||Xl,this.projectId=i.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Yh}...`),await this.restartTransport(Yh)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},A1)}get context(){return Oe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,r,n){this.isInitialized(),await this.publisher.publish(i,r,n),await this.recordMessageEvent({topic:i,message:r,publishedAt:Date.now()})}async subscribe(i,r){var n;this.isInitialized();let a=((n=this.subscriber.topicMap.get(i))==null?void 0:n[0])||"";return a||(await Promise.all([new Promise(l=>{this.subscriber.once(Hr.created,d=>{d.topic===i&&l()})}),new Promise(async l=>{a=await this.subscriber.subscribe(i,r),l()})]),a)}async unsubscribe(i,r){this.isInitialized(),await this.subscriber.unsubscribe(i,r)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(yt.transport_closed))}async transportOpen(i){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=i||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Hr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await sa(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>n(a)).then(()=>r()).finally(()=>this.removeListener(yt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(yt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(yt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(i){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=i||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(Ns.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(i){return this.staleConnectionErrors.some(r=>i.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wi(new qw(Z0({sdkVersion:O1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(i){const{topic:r,message:n}=i;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(i){const{topic:r,message:n}=i;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),lc(i)){if(!i.method.endsWith(P1))return;const r=i.params,{topic:n,message:a,publishedAt:l}=r.data,d={topic:n,message:a,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(tb({type:"event",event:r.id},d)),this.events.emit(r.id,d),await this.acknowledgePayload(i),await this.onMessageEvent(d)}else fc(i)&&this.events.emit(yt.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(yt.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){const r=pc(i.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Ns.payload,i=>this.onProviderPayload(i)),this.provider.on(Ns.connect,()=>{this.events.emit(yt.connect)}),this.provider.on(Ns.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Ns.error,i=>{this.logger.error(i),this.events.emit(yt.error,i)})}registerEventListeners(){this.events.on(yt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(yt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},se.toMiliseconds(C1))}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(i=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var ib=Object.defineProperty,rl=Object.getOwnPropertySymbols,sb=Object.prototype.hasOwnProperty,nb=Object.prototype.propertyIsEnumerable,il=(u,i,r)=>i in u?ib(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,sl=(u,i)=>{for(var r in i||(i={}))sb.call(i,r)&&il(u,r,i[r]);if(rl)for(var r of rl(i))nb.call(i,r)&&il(u,r,i[r]);return u};class la extends vw{constructor(i,r,n,a=mi,l=void 0){super(i,r,n,a),this.core=i,this.logger=r,this.name=n,this.map=new Map,this.version=T1,this.cached=[],this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(d=>{this.getKey&&d!==null&&!yi(d)?this.map.set(this.getKey(d),d):k0(d)?this.map.set(d.id,d):K0(d)&&this.map.set(d.topic,d)}),this.cached=[],this.initialized=!0)},this.set=async(d,y)=>{this.isInitialized(),this.map.has(d)?await this.update(d,y):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:d,value:y}),this.map.set(d,y),await this.persist())},this.get=d=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:d}),this.getData(d)),this.getAll=d=>(this.isInitialized(),d?this.values.filter(y=>Object.keys(d).every(_=>kw(y[_],d[_]))):this.values),this.update=async(d,y)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:d,update:y});const _=sl(sl({},this.getData(d)),y);this.map.set(d,_),await this.persist()},this.delete=async(d,y)=>{this.isInitialized(),this.map.has(d)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:d,reason:y}),this.map.delete(d),await this.persist())},this.logger=Oe.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=l}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){const r=this.map.get(i);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}}class ab{constructor(i,r){this.core=i,this.logger=r,this.name=L1,this.version=j1,this.events=new dc,this.initialized=!1,this.storagePrefix=mi,this.ignoredPayloadTypes=[El],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=ec(),a=await this.core.crypto.setSymKey(n),l=$r(se.FIVE_MINUTES),d={protocol:Yl},y={topic:a,expiry:l,relay:d,active:!1},_=Q0({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:n,relay:d});return await this.pairings.set(a,y),await this.core.relayer.subscribe(a),this.core.expirer.set(a,l),{topic:a,uri:_}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:a,symKey:l,relay:d}=em(n.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const y=$r(se.FIVE_MINUTES),_={topic:a,relay:d,expiry:y,active:!1};return await this.pairings.set(a,_),await this.core.crypto.setSymKey(l,a),await this.core.relayer.subscribe(a,{relay:d}),this.core.expirer.set(a,y),n.activatePairing&&await this.activate({topic:a}),_},this.activate=async({topic:n})=>{this.isInitialized();const a=$r(se.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:a}),this.core.expirer.set(n,a)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:a}=n;if(this.pairings.keys.includes(a)){const l=await this.sendRequest(a,"wc_pairingPing",{}),{done:d,resolve:y,reject:_}=as();this.events.once($t("pairing_ping",l),({error:v})=>{v?_(v):y()}),await d()}},this.updateExpiry=async({topic:n,expiry:a})=>{this.isInitialized(),await this.pairings.update(n,{expiry:a})},this.updateMetadata=async({topic:n,metadata:a})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:a}=n;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",tr("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(n,a,l)=>{const d=gc(a,l),y=await this.core.crypto.encode(n,d),_=Ds[a].req;return this.core.history.set(n,d),this.core.relayer.publish(n,y,_),d.id},this.sendResult=async(n,a,l)=>{const d=pc(n,l),y=await this.core.crypto.encode(a,d),_=await this.core.history.get(a,n),v=Ds[_.request.method].res;await this.core.relayer.publish(a,y,v),await this.core.history.resolve(d)},this.sendError=async(n,a,l)=>{const d=hc(n,l),y=await this.core.crypto.encode(a,d),_=await this.core.history.get(a,n),v=Ds[_.request.method]?Ds[_.request.method].res:Ds.unregistered_method.res;await this.core.relayer.publish(a,y,v),await this.core.history.resolve(d)},this.deletePairing=async(n,a)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,tr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),a?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(a=>vi(a.expiry));await Promise.all(n.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=n=>{const{topic:a,payload:l}=n,d=l.method;if(this.pairings.keys.includes(a))switch(d){case"wc_pairingPing":return this.onPairingPingRequest(a,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,l);default:return this.onUnknownRpcMethodRequest(a,l)}},this.onRelayEventResponse=async n=>{const{topic:a,payload:l}=n,d=(await this.core.history.get(a,l.id)).request.method;if(this.pairings.keys.includes(a))switch(d){case"wc_pairingPing":return this.onPairingPingResponse(a,l);default:return this.onUnknownRpcMethodResponse(d)}},this.onPairingPingRequest=async(n,a)=>{const{id:l}=a;try{this.isValidPing({topic:n}),await this.sendResult(l,n,!0),this.events.emit("pairing_ping",{id:l,topic:n})}catch(d){await this.sendError(l,n,d),this.logger.error(d)}},this.onPairingPingResponse=(n,a)=>{const{id:l}=a;setTimeout(()=>{gi(a)?this.events.emit($t("pairing_ping",l),{}):ii(a)&&this.events.emit($t("pairing_ping",l),{error:a.error})},500)},this.onPairingDeleteRequest=async(n,a)=>{const{id:l}=a;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:l,topic:n})}catch(d){await this.sendError(l,n,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(n,a)=>{const{id:l,method:d}=a;try{if(this.registeredMethods.includes(d))return;const y=tr("WC_METHOD_UNSUPPORTED",d);await this.sendError(l,n,y),this.logger.error(y)}catch(y){await this.sendError(l,n,y),this.logger.error(y)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(tr("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!ur(n)){const{message:a}=Z("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(a)}if(!tm(n.uri)){const{message:a}=Z("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(a)}},this.isValidPing=async n=>{if(!ur(n)){const{message:l}=Z("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(l)}const{topic:a}=n;await this.isValidPairingTopic(a)},this.isValidDisconnect=async n=>{if(!ur(n)){const{message:l}=Z("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(l)}const{topic:a}=n;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async n=>{if(!os(n,!1)){const{message:a}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(a)}if(!this.pairings.keys.includes(n)){const{message:a}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(a)}if(vi(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:a}=Z("EXPIRED",`pairing topic: ${n}`);throw new Error(a)}},this.core=i,this.logger=Oe.generateChildLogger(r,this.name),this.pairings=new la(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Oe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.core.relayer.on(yt.message,async i=>{const{topic:r,message:n}=i;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const a=await this.core.crypto.decode(r,n);lc(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):fc(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))})}registerExpirerEvents(){this.core.expirer.on(Pr.expired,async i=>{const{topic:r}=Il(i.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class ob extends fw{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.records=new Map,this.events=new Vr.EventEmitter,this.name=M1,this.version=z1,this.cached=[],this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,a,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:a,chainId:l}),this.records.has(a.id))return;const d={id:a.id,topic:n,request:{method:a.method,params:a.params||null},chainId:l,expiry:$r(se.THIRTY_DAYS)};this.records.set(d.id,d),this.events.emit(Kr.created,d)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const a=await this.getRecord(n.id);typeof a.response>"u"&&(a.response=ii(n)?{error:n.error}:{result:n.result},this.records.set(a.id,a),this.events.emit(Kr.updated,a))},this.get=async(n,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:a}),await this.getRecord(a)),this.delete=(n,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(l=>{if(l.topic===n){if(typeof a<"u"&&l.id!==a)return;this.records.delete(l.id),this.events.emit(Kr.deleted,l)}})},this.exists=async(n,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===n:!1),this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const i=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:gc(r.request.method,r.request.params,r.id),chainId:r.chainId};return i.push(n)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();const r=this.records.get(i);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Kr.sync)}async restore(){try{const i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(Kr.created,i=>{const r=Kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(Kr.updated,i=>{const r=Kr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(Kr.deleted,i=>{const r=Kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(i=>{se.toMiliseconds(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.delete(i.topic,i.id))})}catch(i){this.logger.warn(i)}}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}}class cb extends mw{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.expirations=new Map,this.events=new Vr.EventEmitter,this.name=q1,this.version=U1,this.cached=[],this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const a=this.formatTarget(n);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(n,a)=>{this.isInitialized();const l=this.formatTarget(n),d={target:l,expiry:a};this.expirations.set(l,d),this.checkExpiry(l,d),this.events.emit(Pr.created,{target:l,expiration:d})},this.get=n=>{this.isInitialized();const a=this.formatTarget(n);return this.getExpiration(a)},this.del=n=>{if(this.isInitialized(),this.has(n)){const a=this.formatTarget(n),l=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Pr.deleted,{target:a,expiration:l})}},this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if(typeof i=="string")return rm(i);if(typeof i=="number")return im(i);const{message:r}=Z("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw new Error(r)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Pr.sync)}async restore(){try{const i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){const r=this.expirations.get(i);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(i,r){const{expiry:n}=r;se.toMiliseconds(n)-Date.now()<=0&&this.expire(i,r)}expire(i,r){this.expirations.delete(i),this.events.emit(Pr.expired,{target:i,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,r)=>this.checkExpiry(r,i))}registerEventListeners(){this.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Pr.created,i=>{const r=Pr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(Pr.expired,i=>{const r=Pr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(Pr.deleted,i=>{const r=Pr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}}class ub extends ww{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.name=Bo,this.initialized=!1,this.init=async n=>{sm()||!xl()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||Xh,await this.createIframe())},this.register=async n=>{var a;if(this.initialized||await this.init(),!!this.iframe)try{(a=this.iframe.contentWindow)==null||a.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const l=this.startAbortTimer(se.FIVE_SECONDS),d=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),d.status===200?(a=await d.json())==null?void 0:a.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,a)=>{if(document.getElementById(Bo))return n();const l=document.createElement("iframe");l.setAttribute("id",Bo),l.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),l.style.display="none",l.addEventListener("load",()=>{this.initialized=!0,n()}),l.addEventListener("error",d=>{a(d)}),document.body.append(l),this.iframe=l}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),se.toMiliseconds(se.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Oe.generateChildLogger(r,this.name),this.verifyUrl=Xh,this.abortController=new AbortController,this.isDevEnv=nm()&&Kw.IS_VITEST}get context(){return Oe.getLoggerContext(this.logger)}startAbortTimer(i){return setTimeout(()=>this.abortController.abort(),se.toMiliseconds(i))}}var hb=Object.defineProperty,nl=Object.getOwnPropertySymbols,lb=Object.prototype.hasOwnProperty,fb=Object.prototype.propertyIsEnumerable,al=(u,i,r)=>i in u?hb(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,ol=(u,i)=>{for(var r in i||(i={}))lb.call(i,r)&&al(u,r,i[r]);if(nl)for(var r of nl(i))fb.call(i,r)&&al(u,r,i[r]);return u};class mc extends lw{constructor(i){super(i),this.protocol=Jl,this.version=p1,this.name=yc,this.events=new Vr.EventEmitter,this.initialized=!1,this.on=(n,a)=>this.events.on(n,a),this.once=(n,a)=>this.events.once(n,a),this.off=(n,a)=>this.events.off(n,a),this.removeListener=(n,a)=>this.events.removeListener(n,a),this.projectId=i==null?void 0:i.projectId,this.relayUrl=(i==null?void 0:i.relayUrl)||Xl;const r=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||d1.logger}));this.logger=Oe.generateChildLogger(r,this.name),this.heartbeat=new hs.HeartBeat,this.crypto=new K1(this,this.logger,i==null?void 0:i.keychain),this.history=new ob(this,this.logger),this.expirer=new cb(this,this.logger),this.storage=i!=null&&i.storage?i.storage:new rw(ol(ol({},g1),i==null?void 0:i.storageOptions)),this.relayer=new rb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ab(this,this.logger),this.verify=new ub(this.projectId||"",this.logger)}static async init(i){const r=new mc(i);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(R1,n),r}get context(){return Oe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}}const pb=mc,Zl="wc",Ql=2,ef="client",wc=`${Zl}@${Ql}:${ef}:`,Wo={name:ef,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},db="WALLETCONNECT_DEEPLINK_CHOICE",gb="proposal",tf="Proposal expired",vb="session",Yn=se.SEVEN_DAYS,yb="engine",Ls={wc_sessionPropose:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1115}}},Jo={min:se.FIVE_MINUTES,max:se.SEVEN_DAYS},mb="request",wb=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var _b=Object.defineProperty,bb=Object.defineProperties,Eb=Object.getOwnPropertyDescriptors,cl=Object.getOwnPropertySymbols,Ib=Object.prototype.hasOwnProperty,xb=Object.prototype.propertyIsEnumerable,ul=(u,i,r)=>i in u?_b(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,Sr=(u,i)=>{for(var r in i||(i={}))Ib.call(i,r)&&ul(u,r,i[r]);if(cl)for(var r of cl(i))xb.call(i,r)&&ul(u,r,i[r]);return u},Yo=(u,i)=>bb(u,Eb(i));class Sb extends bw{constructor(i){super(i),this.name=yb,this.events=new dc,this.initialized=!1,this.ignoredPayloadTypes=[El],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Ls)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const n=Yo(Sr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:a,requiredNamespaces:l,optionalNamespaces:d,sessionProperties:y,relays:_}=n;let v=a,x,A=!1;if(v&&(A=this.client.core.pairing.pairings.get(v).active),!v||!A){const{topic:he,uri:fe}=await this.client.core.pairing.create();v=he,x=fe}const D=await this.client.core.crypto.generateKeyPair(),U=Sr({requiredNamespaces:l,optionalNamespaces:d,relays:_??[{protocol:Yl}],proposer:{publicKey:D,metadata:this.client.metadata}},y&&{sessionProperties:y}),{reject:L,resolve:V,done:re}=as(se.FIVE_MINUTES,tf);if(this.events.once($t("session_connect"),async({error:he,session:fe})=>{if(he)L(he);else if(fe){fe.self.publicKey=D;const pe=Yo(Sr({},fe),{requiredNamespaces:fe.requiredNamespaces,optionalNamespaces:fe.optionalNamespaces});await this.client.session.set(fe.topic,pe),await this.setExpiry(fe.topic,fe.expiry),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:fe.peer.metadata}),V(pe)}}),!v){const{message:he}=Z("NO_MATCHING_KEY",`connect() pairing topic: ${v}`);throw new Error(he)}const ce=await this.sendRequest(v,"wc_sessionPropose",U),ue=$r(se.FIVE_MINUTES);return await this.setProposal(ce,Sr({id:ce,expiry:ue},U)),{uri:x,approval:re}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:a,namespaces:l,sessionProperties:d}=r,y=this.client.proposal.get(n);let{pairingTopic:_,proposer:v,requiredNamespaces:x,optionalNamespaces:A}=y;_=_||"",ea(x)||(x=om(l,"approve()"));const D=await this.client.core.crypto.generateKeyPair(),U=v.publicKey,L=await this.client.core.crypto.generateSharedKey(D,U);_&&n&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:v.metadata}),await this.sendResult(n,_,{relay:{protocol:a??"irn"},responderPublicKey:D}),await this.client.proposal.delete(n,tr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const V=Sr({relay:{protocol:a??"irn"},namespaces:l,requiredNamespaces:x,optionalNamespaces:A,pairingTopic:_,controller:{publicKey:D,metadata:this.client.metadata},expiry:$r(Yn)},d&&{sessionProperties:d});await this.client.core.relayer.subscribe(L),await this.sendRequest(L,"wc_sessionSettle",V);const re=Yo(Sr({},V),{topic:L,pairingTopic:_,acknowledged:!1,self:V.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:D});return await this.client.session.set(L,re),await this.setExpiry(L,$r(Yn)),{topic:L,acknowledged:()=>new Promise(ce=>setTimeout(()=>ce(this.client.session.get(L)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:a}=r,{pairingTopic:l}=this.client.proposal.get(n);l&&(await this.sendError(n,l,a),await this.client.proposal.delete(n,tr("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:a}=r,l=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:a}),{done:d,resolve:y,reject:_}=as();return this.events.once($t("session_update",l),({error:v})=>{v?_(v):y()}),await this.client.session.update(n,{namespaces:a}),{acknowledged:d}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,a=await this.sendRequest(n,"wc_sessionExtend",{}),{done:l,resolve:d,reject:y}=as();return this.events.once($t("session_extend",a),({error:_})=>{_?y(_):d()}),await this.setExpiry(n,$r(Yn)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:a,topic:l,expiry:d}=r,y=await this.sendRequest(l,"wc_sessionRequest",{request:a,chainId:n},d),{done:_,resolve:v,reject:x}=as(d);this.events.once($t("session_request",y),({error:D,result:U})=>{D?x(D):v(U)}),this.client.events.emit("session_request_sent",{topic:l,request:a,chainId:n,id:y});const A=await this.client.core.storage.getItem(db);return cm({id:y,topic:l,wcDeepLink:A}),await _()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:a}=r,{id:l}=a;gi(a)?await this.sendResult(l,n,a.result):ii(a)&&await this.sendError(l,n,a.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const a=await this.sendRequest(n,"wc_sessionPing",{}),{done:l,resolve:d,reject:y}=as();this.events.once($t("session_ping",a),({error:_})=>{_?y(_):d()}),await l()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:a,chainId:l}=r;await this.sendRequest(n,"wc_sessionEvent",{event:a,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const a=Ol().toString();let l;const d=y=>{(y==null?void 0:y.id.toString())===a&&(this.client.core.relayer.events.removeListener(yt.message_ack,d),l())};await Promise.all([new Promise(y=>{l=y,this.client.core.relayer.on(yt.message_ack,d)}),this.sendRequest(n,"wc_sessionDelete",tr("USER_DISCONNECTED"),void 0,a)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>um(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(l=>{var d,y;return((d=l.peerMetadata)==null?void 0:d.url)&&((y=l.peerMetadata)==null?void 0:y.url)===r.peer.metadata.url&&l.topic&&l.topic!==n.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,tr("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r)},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,tr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),a?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Ls.wc_sessionRequest.req.ttl,{id:a,topic:l,params:d}=r;await this.client.pendingRequest.set(a,{id:a,topic:l,params:d}),n&&this.client.core.expirer.set(a,$r(n))},this.sendRequest=async(r,n,a,l,d)=>{const y=gc(n,a);if(xl()&&wb.includes(n)){const x=cs(JSON.stringify(y));await this.client.core.verify.register({attestationId:x})}const _=await this.client.core.crypto.encode(r,y),v=Ls[n].req;return l&&(v.ttl=l),d&&(v.id=d),this.client.core.history.set(r,y),this.client.core.relayer.publish(r,_,v),y.id},this.sendResult=async(r,n,a)=>{const l=pc(r,a),d=await this.client.core.crypto.encode(n,l),y=await this.client.core.history.get(n,r),_=Ls[y.request.method].res;this.client.core.relayer.publish(n,d,_),await this.client.core.history.resolve(l)},this.sendError=async(r,n,a)=>{const l=hc(r,a),d=await this.client.core.crypto.encode(n,l),y=await this.client.core.history.get(n,r),_=Ls[y.request.method].res;this.client.core.relayer.publish(n,d,_),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(a=>{vi(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{vi(a.expiry)&&n.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...n.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=r=>{const{topic:n,payload:a}=r,l=a.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(n,a);case"wc_sessionSettle":return this.onSessionSettleRequest(n,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,a);case"wc_sessionExtend":return this.onSessionExtendRequest(n,a);case"wc_sessionPing":return this.onSessionPingRequest(n,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,a);case"wc_sessionRequest":return this.onSessionRequest(n,a);case"wc_sessionEvent":return this.onSessionEventRequest(n,a);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:a}=r,l=(await this.client.core.history.get(n,a.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(n,a);case"wc_sessionSettle":return this.onSessionSettleResponse(n,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,a);case"wc_sessionExtend":return this.onSessionExtendResponse(n,a);case"wc_sessionPing":return this.onSessionPingResponse(n,a);case"wc_sessionRequest":return this.onSessionRequestResponse(n,a);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:a}=Z("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,n)=>{const{params:a,id:l}=n;try{this.isValidConnect(Sr({},n.params));const d=$r(se.FIVE_MINUTES),y=Sr({id:l,pairingTopic:r,expiry:d},a);await this.setProposal(l,y);const _=cs(JSON.stringify(n)),v=await this.getVerifyContext(_,y.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:y,verifyContext:v})}catch(d){await this.sendError(l,r,d),this.client.logger.error(d)}},this.onSessionProposeResponse=async(r,n)=>{const{id:a}=n;if(gi(n)){const{result:l}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const d=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:d});const y=d.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const _=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const v=await this.client.core.crypto.generateSharedKey(y,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:v});const x=await this.client.core.relayer.subscribe(v);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:x}),await this.client.core.pairing.activate({topic:r})}else ii(n)&&(await this.client.proposal.delete(a,tr("USER_DISCONNECTED")),this.events.emit($t("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:a,params:l}=n;try{this.isValidSessionSettleRequest(l);const{relay:d,controller:y,expiry:_,namespaces:v,requiredNamespaces:x,optionalNamespaces:A,sessionProperties:D,pairingTopic:U}=n.params,L=Sr({topic:r,relay:d,expiry:_,namespaces:v,acknowledged:!0,pairingTopic:U,requiredNamespaces:x,optionalNamespaces:A,controller:y.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:y.publicKey,metadata:y.metadata}},D&&{sessionProperties:D});await this.sendResult(n.id,r,!0),this.events.emit($t("session_connect"),{session:L}),this.cleanupDuplicatePairings(L)}catch(d){await this.sendError(a,r,d),this.client.logger.error(d)}},this.onSessionSettleResponse=async(r,n)=>{const{id:a}=n;gi(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit($t("session_approve",a),{})):ii(n)&&(await this.client.session.delete(r,tr("USER_DISCONNECTED")),this.events.emit($t("session_approve",a),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:a,id:l}=n;try{this.isValidUpdate(Sr({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:a})}catch(d){await this.sendError(l,r,d),this.client.logger.error(d)}},this.onSessionUpdateResponse=(r,n)=>{const{id:a}=n;gi(n)?this.events.emit($t("session_update",a),{}):ii(n)&&this.events.emit($t("session_update",a),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:a}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,$r(Yn)),await this.sendResult(a,r,!0),this.client.events.emit("session_extend",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,n)=>{const{id:a}=n;gi(n)?this.events.emit($t("session_extend",a),{}):ii(n)&&this.events.emit($t("session_extend",a),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:a}=n;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.client.events.emit("session_ping",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,n)=>{const{id:a}=n;setTimeout(()=>{gi(n)?this.events.emit($t("session_ping",a),{}):ii(n)&&this.events.emit($t("session_ping",a),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:a}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(yt.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(a,r,!0)]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,n)=>{const{id:a,params:l}=n;try{this.isValidRequest(Sr({topic:r},l)),await this.setPendingSessionRequest({id:a,topic:r,params:l});const d=cs(JSON.stringify(n)),y=this.client.session.get(r),_=await this.getVerifyContext(d,y.peer.metadata);this.client.events.emit("session_request",{id:a,topic:r,params:l,verifyContext:_})}catch(d){await this.sendError(a,r,d),this.client.logger.error(d)}},this.onSessionRequestResponse=(r,n)=>{const{id:a}=n;gi(n)?this.events.emit($t("session_request",a),{result:n.result}):ii(n)&&this.events.emit($t("session_request",a),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:a,params:l}=n;try{this.isValidEmit(Sr({topic:r},l)),this.client.events.emit("session_event",{id:a,topic:r,params:l})}catch(d){await this.sendError(a,r,d),this.client.logger.error(d)}},this.isValidConnect=async r=>{if(!ur(r)){const{message:_}=Z("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(_)}const{pairingTopic:n,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:d,relays:y}=r;if(yi(n)||await this.isValidPairingTopic(n),!hm(y,!0)){const{message:_}=Z("MISSING_OR_INVALID",`connect() relays: ${y}`);throw new Error(_)}!yi(a)&&ea(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!yi(l)&&ea(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),yi(d)||this.validateSessionProps(d,"sessionProperties")},this.validateNamespaces=(r,n)=>{const a=lm(r,"connect()",n);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!ur(r))throw new Error(Z("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:a,relayProtocol:l,sessionProperties:d}=r;await this.isValidProposalId(n);const y=this.client.proposal.get(n),_=Mo(a,"approve()");if(_)throw new Error(_.message);const v=Ih(y.requiredNamespaces,a,"approve()");if(v)throw new Error(v.message);if(!os(l,!0)){const{message:x}=Z("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(x)}yi(d)||this.validateSessionProps(d,"sessionProperties")},this.isValidReject=async r=>{if(!ur(r)){const{message:l}=Z("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:n,reason:a}=r;if(await this.isValidProposalId(n),!fm(a)){const{message:l}=Z("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!ur(r)){const{message:v}=Z("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(v)}const{relay:n,controller:a,namespaces:l,expiry:d}=r;if(!pm(n)){const{message:v}=Z("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(v)}const y=dm(a,"onSessionSettleRequest()");if(y)throw new Error(y.message);const _=Mo(l,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(vi(d)){const{message:v}=Z("EXPIRED","onSessionSettleRequest()");throw new Error(v)}},this.isValidUpdate=async r=>{if(!ur(r)){const{message:_}=Z("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(_)}const{topic:n,namespaces:a}=r;await this.isValidSessionTopic(n);const l=this.client.session.get(n),d=Mo(a,"update()");if(d)throw new Error(d.message);const y=Ih(l.requiredNamespaces,a,"update()");if(y)throw new Error(y.message)},this.isValidExtend=async r=>{if(!ur(r)){const{message:a}=Z("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!ur(r)){const{message:_}=Z("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(_)}const{topic:n,request:a,chainId:l,expiry:d}=r;await this.isValidSessionTopic(n);const{namespaces:y}=this.client.session.get(n);if(!xh(y,l)){const{message:_}=Z("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(_)}if(!gm(a)){const{message:_}=Z("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(_)}if(!vm(y,l,a.method)){const{message:_}=Z("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(_)}if(d&&!ym(d,Jo)){const{message:_}=Z("MISSING_OR_INVALID",`request() expiry: ${d}. Expiry must be a number (in seconds) between ${Jo.min} and ${Jo.max}`);throw new Error(_)}},this.isValidRespond=async r=>{if(!ur(r)){const{message:l}=Z("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:n,response:a}=r;if(await this.isValidSessionTopic(n),!mm(a)){const{message:l}=Z("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!ur(r)){const{message:a}=Z("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!ur(r)){const{message:y}=Z("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(y)}const{topic:n,event:a,chainId:l}=r;await this.isValidSessionTopic(n);const{namespaces:d}=this.client.session.get(n);if(!xh(d,l)){const{message:y}=Z("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(y)}if(!wm(a)){const{message:y}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(y)}if(!_m(d,l,a.name)){const{message:y}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(y)}},this.isValidDisconnect=async r=>{if(!ur(r)){const{message:a}=Z("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const a={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});l&&(a.verified.origin=l,a.verified.validation=l===n.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(a=>{if(!os(a,!1)){const{message:l}=Z("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:i}=Z("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.client.core.relayer.on(yt.message,async i=>{const{topic:r,message:n}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const a=await this.client.core.crypto.decode(r,n);lc(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):fc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})})}registerExpirerEvents(){this.client.core.expirer.on(Pr.expired,async i=>{const{topic:r,id:n}=Il(i.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Z("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(i){if(!os(i,!1)){const{message:r}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(i)){const{message:r}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(r)}if(vi(this.client.core.pairing.pairings.get(i).expiry)){const{message:r}=Z("EXPIRED",`pairing topic: ${i}`);throw new Error(r)}}async isValidSessionTopic(i){if(!os(i,!1)){const{message:r}=Z("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw new Error(r)}if(!this.client.session.keys.includes(i)){const{message:r}=Z("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw new Error(r)}if(vi(this.client.session.get(i).expiry)){await this.deleteSession(i);const{message:r}=Z("EXPIRED",`session topic: ${i}`);throw new Error(r)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if(os(i,!1)){const{message:r}=Z("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw new Error(r)}else{const{message:r}=Z("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw new Error(r)}}async isValidProposalId(i){if(!bm(i)){const{message:r}=Z("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw new Error(r)}if(!this.client.proposal.keys.includes(i)){const{message:r}=Z("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw new Error(r)}if(vi(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);const{message:r}=Z("EXPIRED",`proposal id: ${i}`);throw new Error(r)}}}class Pb extends la{constructor(i,r){super(i,r,gb,wc),this.core=i,this.logger=r}}class Cb extends la{constructor(i,r){super(i,r,vb,wc),this.core=i,this.logger=r}}class Ob extends la{constructor(i,r){super(i,r,mb,wc,n=>n.id),this.core=i,this.logger=r}}let Ab=class rf extends _w{constructor(i){super(i),this.protocol=Zl,this.version=Ql,this.name=Wo.name,this.events=new Vr.EventEmitter,this.on=(n,a)=>this.events.on(n,a),this.once=(n,a)=>this.events.once(n,a),this.off=(n,a)=>this.events.off(n,a),this.removeListener=(n,a)=>this.events.removeListener(n,a),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(a){throw this.logger.error(a.message),a}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(a){throw this.logger.error(a.message),a}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(a){throw this.logger.error(a.message),a}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(a){throw this.logger.error(a.message),a}},this.update=async n=>{try{return await this.engine.update(n)}catch(a){throw this.logger.error(a.message),a}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(a){throw this.logger.error(a.message),a}},this.request=async n=>{try{return await this.engine.request(n)}catch(a){throw this.logger.error(a.message),a}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(a){throw this.logger.error(a.message),a}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(a){throw this.logger.error(a.message),a}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(a){throw this.logger.error(a.message),a}},this.find=n=>{try{return this.engine.find(n)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(i==null?void 0:i.name)||Wo.name,this.metadata=(i==null?void 0:i.metadata)||am();const r=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||Wo.logger}));this.core=(i==null?void 0:i.core)||new pb(i),this.logger=Oe.generateChildLogger(r,this.name),this.session=new Cb(this.core,this.logger),this.proposal=new Pb(this.core,this.logger),this.pendingRequest=new Ob(this.core,this.logger),this.engine=new Sb(this)}static async init(i){const r=new rf(i);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}};const hl="error",Tb="wss://relay.walletconnect.com",Rb="wc",Nb="universal_provider",ll=`${Rb}@2:${Nb}:`,Db="https://rpc.walletconnect.com/v1",_i={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(u,i){(function(){var r,n="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",y="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",v=500,x="__lodash_placeholder__",A=1,D=2,U=4,L=1,V=2,re=1,ce=2,ue=4,he=8,fe=16,pe=32,N=64,K=128,W=256,ve=512,te=30,Ee="...",Ae=800,et=16,O=1,z=2,qe=3,Te=1/0,J=9007199254740991,F=17976931348623157e292,H=NaN,B=4294967295,ct=B-1,Ke=B>>>1,Lr=[["ary",K],["bind",re],["bindKey",ce],["curry",he],["curryRight",fe],["flip",ve],["partial",pe],["partialRight",N],["rearg",W]],_e="[object Arguments]",xt="[object Array]",R="[object AsyncFunction]",T="[object Boolean]",P="[object Date]",c="[object DOMException]",b="[object Error]",Q="[object Function]",oe="[object GeneratorFunction]",me="[object Map]",Re="[object Number]",De="[object Null]",xe="[object Object]",St="[object Promise]",mt="[object Proxy]",st="[object RegExp]",Le="[object Set]",Je="[object String]",Ye="[object Symbol]",nt="[object Undefined]",Ue="[object WeakMap]",Xe="[object WeakSet]",Ne="[object ArrayBuffer]",He="[object DataView]",ut="[object Float32Array]",Me="[object Float64Array]",Pt="[object Int8Array]",Lt="[object Int16Array]",Kt="[object Int32Array]",Ht="[object Uint8Array]",zt="[object Uint8ClampedArray]",Wt="[object Uint16Array]",rr="[object Uint32Array]",jr=/\b__p \+= '';/g,Jt=/\b(__p \+=) '' \+/g,Fr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,si=/&(?:amp|lt|gt|quot|#39);/g,bi=/[&<>"']/g,ht=RegExp(si.source),tt=RegExp(bi.source),lt=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pt=/[\\^$.*+?()[\]{}|]/g,At=RegExp(pt.source),dt=/^\s+/,wt=/\s/,gt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,We=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,Rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fa=/[()=,{}\[\]\/\s]/,pa=/\\(\\)?/g,da=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vr=/\w*$/,ga=/^[-+]0x[0-9a-f]+$/i,va=/^0b[01]+$/i,ya=/^\[object .+?Constructor\]$/,ma=/^0o[0-7]+$/i,wa=/^(?:0|[1-9]\d*)$/,Br=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ui=/($^)/,_a=/['\n\r\u2028\u2029\\]/g,ki="\\ud800-\\udfff",ba="\\u0300-\\u036f",Ea="\\ufe20-\\ufe2f",Ki="\\u20d0-\\u20ff",Ks=ba+Ea+Ki,Hs="\\u2700-\\u27bf",Or="a-z\\xdf-\\xf6\\xf8-\\xff",Ia="\\xac\\xb1\\xd7\\xf7",xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sa="\\u2000-\\u206f",Pa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vs="A-Z\\xc0-\\xd6\\xd8-\\xde",Fs="\\ufe0e\\ufe0f",Ei=Ia+xa+Sa+Pa,ls="['’]",Ii="["+ki+"]",fs="["+Ei+"]",xi="["+Ks+"]",Bs="\\d+",Ca="["+Hs+"]",Gs="["+Or+"]",Ws="[^"+ki+Ei+Bs+Hs+Or+Vs+"]",Hi="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+xi+"|"+Hi+")",Js="[^"+ki+"]",Vi="(?:\\ud83c[\\udde6-\\uddff]){2}",ni="[\\ud800-\\udbff][\\udc00-\\udfff]",hr="["+Vs+"]",Ys="\\u200d",Xs="(?:"+Gs+"|"+Ws+")",Mr="(?:"+hr+"|"+Ws+")",Zs="(?:"+ls+"(?:d|ll|m|re|s|t|ve))?",Qs="(?:"+ls+"(?:D|LL|M|RE|S|T|VE))?",en=Oa+"?",tn="["+Fs+"]?",Aa="(?:"+Ys+"(?:"+[Js,Vi,ni].join("|")+")"+tn+en+")*",Gr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sn=tn+en+Aa,Fi="(?:"+[Ca,Vi,ni].join("|")+")"+sn,Ta="(?:"+[Js+xi+"?",xi,Vi,ni,Ii].join("|")+")",ps=RegExp(ls,"g"),Ra=RegExp(xi,"g"),Bi=RegExp(Hi+"(?="+Hi+")|"+Ta+sn,"g"),nn=RegExp([hr+"?"+Gs+"+"+Zs+"(?="+[fs,hr,"$"].join("|")+")",Mr+"+"+Qs+"(?="+[fs,hr+Xs,"$"].join("|")+")",hr+"?"+Xs+"+"+Zs,hr+"+"+Qs,rn,Gr,Bs,Fi].join("|"),"g"),an=RegExp("["+Ys+ki+Ks+Fs+"]"),Si=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,on=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Na=-1,Ve={};Ve[ut]=Ve[Me]=Ve[Pt]=Ve[Lt]=Ve[Kt]=Ve[Ht]=Ve[zt]=Ve[Wt]=Ve[rr]=!0,Ve[_e]=Ve[xt]=Ve[Ne]=Ve[T]=Ve[He]=Ve[P]=Ve[b]=Ve[Q]=Ve[me]=Ve[Re]=Ve[xe]=Ve[st]=Ve[Le]=Ve[Je]=Ve[Ue]=!1;var ke={};ke[_e]=ke[xt]=ke[Ne]=ke[He]=ke[T]=ke[P]=ke[ut]=ke[Me]=ke[Pt]=ke[Lt]=ke[Kt]=ke[me]=ke[Re]=ke[xe]=ke[st]=ke[Le]=ke[Je]=ke[Ye]=ke[Ht]=ke[zt]=ke[Wt]=ke[rr]=!0,ke[b]=ke[Q]=ke[Ue]=!1;var g={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},q={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Y={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fe=parseFloat,de=parseInt,Ze=typeof js=="object"&&js&&js.Object===Object&&js,Nt=typeof self=="object"&&self&&self.Object===Object&&self,Pe=Ze||Nt||Function("return this")(),Be=i&&!i.nodeType&&i,_t=Be&&!0&&u&&!u.nodeType&&u,ir=_t&&_t.exports===Be,Dt=ir&&Ze.process,Qe=function(){try{var I=_t&&_t.require&&_t.require("util").types;return I||Dt&&Dt.binding&&Dt.binding("util")}catch{}}(),Yt=Qe&&Qe.isArrayBuffer,Ar=Qe&&Qe.isDate,yr=Qe&&Qe.isMap,zr=Qe&&Qe.isRegExp,ds=Qe&&Qe.isSet,Pi=Qe&&Qe.isTypedArray;function qt(I,$,C){switch(C.length){case 0:return I.call($);case 1:return I.call($,C[0]);case 2:return I.call($,C[0],C[1]);case 3:return I.call($,C[0],C[1],C[2])}return I.apply($,C)}function af(I,$,C,X){for(var le=-1,$e=I==null?0:I.length;++le<$e;){var jt=I[le];$(X,jt,C(jt),I)}return X}function mr(I,$){for(var C=-1,X=I==null?0:I.length;++C<X&&$(I[C],C,I)!==!1;);return I}function of(I,$){for(var C=I==null?0:I.length;C--&&$(I[C],C,I)!==!1;);return I}function Ec(I,$){for(var C=-1,X=I==null?0:I.length;++C<X;)if(!$(I[C],C,I))return!1;return!0}function ai(I,$){for(var C=-1,X=I==null?0:I.length,le=0,$e=[];++C<X;){var jt=I[C];$(jt,C,I)&&($e[le++]=jt)}return $e}function cn(I,$){var C=I==null?0:I.length;return!!C&&Gi(I,$,0)>-1}function Da(I,$,C){for(var X=-1,le=I==null?0:I.length;++X<le;)if(C($,I[X]))return!0;return!1}function it(I,$){for(var C=-1,X=I==null?0:I.length,le=Array(X);++C<X;)le[C]=$(I[C],C,I);return le}function oi(I,$){for(var C=-1,X=$.length,le=I.length;++C<X;)I[le+C]=$[C];return I}function $a(I,$,C,X){var le=-1,$e=I==null?0:I.length;for(X&&$e&&(C=I[++le]);++le<$e;)C=$(C,I[le],le,I);return C}function cf(I,$,C,X){var le=I==null?0:I.length;for(X&&le&&(C=I[--le]);le--;)C=$(C,I[le],le,I);return C}function La(I,$){for(var C=-1,X=I==null?0:I.length;++C<X;)if($(I[C],C,I))return!0;return!1}var uf=ja("length");function hf(I){return I.split("")}function lf(I){return I.match(Rt)||[]}function Ic(I,$,C){var X;return C(I,function(le,$e,jt){if($(le,$e,jt))return X=$e,!1}),X}function un(I,$,C,X){for(var le=I.length,$e=C+(X?1:-1);X?$e--:++$e<le;)if($(I[$e],$e,I))return $e;return-1}function Gi(I,$,C){return $===$?If(I,$,C):un(I,xc,C)}function ff(I,$,C,X){for(var le=C-1,$e=I.length;++le<$e;)if(X(I[le],$))return le;return-1}function xc(I){return I!==I}function Sc(I,$){var C=I==null?0:I.length;return C?za(I,$)/C:H}function ja(I){return function($){return $==null?r:$[I]}}function Ma(I){return function($){return I==null?r:I[$]}}function Pc(I,$,C,X,le){return le(I,function($e,jt,Ge){C=X?(X=!1,$e):$(C,$e,jt,Ge)}),C}function pf(I,$){var C=I.length;for(I.sort($);C--;)I[C]=I[C].value;return I}function za(I,$){for(var C,X=-1,le=I.length;++X<le;){var $e=$(I[X]);$e!==r&&(C=C===r?$e:C+$e)}return C}function qa(I,$){for(var C=-1,X=Array(I);++C<I;)X[C]=$(C);return X}function df(I,$){return it($,function(C){return[C,I[C]]})}function Cc(I){return I&&I.slice(0,Rc(I)+1).replace(dt,"")}function lr(I){return function($){return I($)}}function Ua(I,$){return it($,function(C){return I[C]})}function gs(I,$){return I.has($)}function Oc(I,$){for(var C=-1,X=I.length;++C<X&&Gi($,I[C],0)>-1;);return C}function Ac(I,$){for(var C=I.length;C--&&Gi($,I[C],0)>-1;);return C}function gf(I,$){for(var C=I.length,X=0;C--;)I[C]===$&&++X;return X}var vf=Ma(g),yf=Ma(E);function mf(I){return"\\"+Y[I]}function wf(I,$){return I==null?r:I[$]}function Wi(I){return an.test(I)}function _f(I){return Si.test(I)}function bf(I){for(var $,C=[];!($=I.next()).done;)C.push($.value);return C}function ka(I){var $=-1,C=Array(I.size);return I.forEach(function(X,le){C[++$]=[le,X]}),C}function Tc(I,$){return function(C){return I($(C))}}function ci(I,$){for(var C=-1,X=I.length,le=0,$e=[];++C<X;){var jt=I[C];(jt===$||jt===x)&&(I[C]=x,$e[le++]=C)}return $e}function hn(I){var $=-1,C=Array(I.size);return I.forEach(function(X){C[++$]=X}),C}function Ef(I){var $=-1,C=Array(I.size);return I.forEach(function(X){C[++$]=[X,X]}),C}function If(I,$,C){for(var X=C-1,le=I.length;++X<le;)if(I[X]===$)return X;return-1}function xf(I,$,C){for(var X=C+1;X--;)if(I[X]===$)return X;return X}function Ji(I){return Wi(I)?Pf(I):uf(I)}function Tr(I){return Wi(I)?Cf(I):hf(I)}function Rc(I){for(var $=I.length;$--&&wt.test(I.charAt($)););return $}var Sf=Ma(q);function Pf(I){for(var $=Bi.lastIndex=0;Bi.test(I);)++$;return $}function Cf(I){return I.match(Bi)||[]}function Of(I){return I.match(nn)||[]}var Af=function I($){$=$==null?Pe:Yi.defaults(Pe.Object(),$,Yi.pick(Pe,on));var C=$.Array,X=$.Date,le=$.Error,$e=$.Function,jt=$.Math,Ge=$.Object,Ka=$.RegExp,Tf=$.String,wr=$.TypeError,ln=C.prototype,Rf=$e.prototype,Xi=Ge.prototype,fn=$["__core-js_shared__"],pn=Rf.toString,ze=Xi.hasOwnProperty,Nf=0,Nc=function(){var e=/[^.]+$/.exec(fn&&fn.keys&&fn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dn=Xi.toString,Df=pn.call(Ge),$f=Pe._,Lf=Ka("^"+pn.call(ze).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gn=ir?$.Buffer:r,ui=$.Symbol,vn=$.Uint8Array,Dc=gn?gn.allocUnsafe:r,yn=Tc(Ge.getPrototypeOf,Ge),$c=Ge.create,Lc=Xi.propertyIsEnumerable,mn=ln.splice,jc=ui?ui.isConcatSpreadable:r,vs=ui?ui.iterator:r,Ci=ui?ui.toStringTag:r,wn=function(){try{var e=Ni(Ge,"defineProperty");return e({},"",{}),e}catch{}}(),jf=$.clearTimeout!==Pe.clearTimeout&&$.clearTimeout,Mf=X&&X.now!==Pe.Date.now&&X.now,zf=$.setTimeout!==Pe.setTimeout&&$.setTimeout,_n=jt.ceil,bn=jt.floor,Ha=Ge.getOwnPropertySymbols,qf=gn?gn.isBuffer:r,Mc=$.isFinite,Uf=ln.join,kf=Tc(Ge.keys,Ge),Mt=jt.max,Bt=jt.min,Kf=X.now,Hf=$.parseInt,zc=jt.random,Vf=ln.reverse,Va=Ni($,"DataView"),ys=Ni($,"Map"),Fa=Ni($,"Promise"),Zi=Ni($,"Set"),ms=Ni($,"WeakMap"),ws=Ni(Ge,"create"),En=ms&&new ms,Qi={},Ff=Di(Va),Bf=Di(ys),Gf=Di(Fa),Wf=Di(Zi),Jf=Di(ms),In=ui?ui.prototype:r,_s=In?In.valueOf:r,qc=In?In.toString:r;function f(e){if(vt(e)&&!ge(e)&&!(e instanceof Se)){if(e instanceof _r)return e;if(ze.call(e,"__wrapped__"))return Uu(e)}return new _r(e)}var es=function(){function e(){}return function(t){if(!ot(t))return{};if($c)return $c(t);e.prototype=t;var s=new e;return e.prototype=r,s}}();function xn(){}function _r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}f.templateSettings={escape:lt,evaluate:ft,interpolate:at,variable:"",imports:{_:f}},f.prototype=xn.prototype,f.prototype.constructor=f,_r.prototype=es(xn.prototype),_r.prototype.constructor=_r;function Se(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Yf(){var e=new Se(this.__wrapped__);return e.__actions__=sr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=sr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=sr(this.__views__),e}function Xf(){if(this.__filtered__){var e=new Se(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Zf(){var e=this.__wrapped__.value(),t=this.__dir__,s=ge(e),o=t<0,h=s?e.length:0,p=hd(0,h,this.__views__),m=p.start,w=p.end,S=w-m,j=o?w:m-1,M=this.__iteratees__,k=M.length,G=0,ee=Bt(S,this.__takeCount__);if(!s||!o&&h==S&&ee==S)return uu(e,this.__actions__);var ne=[];e:for(;S--&&G<ee;){j+=t;for(var we=-1,ae=e[j];++we<k;){var Ie=M[we],Ce=Ie.iteratee,dr=Ie.type,Qt=Ce(ae);if(dr==z)ae=Qt;else if(!Qt){if(dr==O)continue e;break e}}ne[G++]=ae}return ne}Se.prototype=es(xn.prototype),Se.prototype.constructor=Se;function Oi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function Qf(){this.__data__=ws?ws(null):{},this.size=0}function ep(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function tp(e){var t=this.__data__;if(ws){var s=t[e];return s===_?r:s}return ze.call(t,e)?t[e]:r}function rp(e){var t=this.__data__;return ws?t[e]!==r:ze.call(t,e)}function ip(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=ws&&t===r?_:t,this}Oi.prototype.clear=Qf,Oi.prototype.delete=ep,Oi.prototype.get=tp,Oi.prototype.has=rp,Oi.prototype.set=ip;function Wr(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function sp(){this.__data__=[],this.size=0}function np(e){var t=this.__data__,s=Sn(t,e);if(s<0)return!1;var o=t.length-1;return s==o?t.pop():mn.call(t,s,1),--this.size,!0}function ap(e){var t=this.__data__,s=Sn(t,e);return s<0?r:t[s][1]}function op(e){return Sn(this.__data__,e)>-1}function cp(e,t){var s=this.__data__,o=Sn(s,e);return o<0?(++this.size,s.push([e,t])):s[o][1]=t,this}Wr.prototype.clear=sp,Wr.prototype.delete=np,Wr.prototype.get=ap,Wr.prototype.has=op,Wr.prototype.set=cp;function Jr(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var o=e[t];this.set(o[0],o[1])}}function up(){this.size=0,this.__data__={hash:new Oi,map:new(ys||Wr),string:new Oi}}function hp(e){var t=Mn(this,e).delete(e);return this.size-=t?1:0,t}function lp(e){return Mn(this,e).get(e)}function fp(e){return Mn(this,e).has(e)}function pp(e,t){var s=Mn(this,e),o=s.size;return s.set(e,t),this.size+=s.size==o?0:1,this}Jr.prototype.clear=up,Jr.prototype.delete=hp,Jr.prototype.get=lp,Jr.prototype.has=fp,Jr.prototype.set=pp;function Ai(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new Jr;++t<s;)this.add(e[t])}function dp(e){return this.__data__.set(e,_),this}function gp(e){return this.__data__.has(e)}Ai.prototype.add=Ai.prototype.push=dp,Ai.prototype.has=gp;function Rr(e){var t=this.__data__=new Wr(e);this.size=t.size}function vp(){this.__data__=new Wr,this.size=0}function yp(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function mp(e){return this.__data__.get(e)}function wp(e){return this.__data__.has(e)}function _p(e,t){var s=this.__data__;if(s instanceof Wr){var o=s.__data__;if(!ys||o.length<a-1)return o.push([e,t]),this.size=++s.size,this;s=this.__data__=new Jr(o)}return s.set(e,t),this.size=s.size,this}Rr.prototype.clear=vp,Rr.prototype.delete=yp,Rr.prototype.get=mp,Rr.prototype.has=wp,Rr.prototype.set=_p;function Uc(e,t){var s=ge(e),o=!s&&$i(e),h=!s&&!o&&di(e),p=!s&&!o&&!h&&ss(e),m=s||o||h||p,w=m?qa(e.length,Tf):[],S=w.length;for(var j in e)(t||ze.call(e,j))&&!(m&&(j=="length"||h&&(j=="offset"||j=="parent")||p&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||Qr(j,S)))&&w.push(j);return w}function kc(e){var t=e.length;return t?e[ro(0,t-1)]:r}function bp(e,t){return zn(sr(e),Ti(t,0,e.length))}function Ep(e){return zn(sr(e))}function Ba(e,t,s){(s!==r&&!Nr(e[t],s)||s===r&&!(t in e))&&Yr(e,t,s)}function bs(e,t,s){var o=e[t];(!(ze.call(e,t)&&Nr(o,s))||s===r&&!(t in e))&&Yr(e,t,s)}function Sn(e,t){for(var s=e.length;s--;)if(Nr(e[s][0],t))return s;return-1}function Ip(e,t,s,o){return hi(e,function(h,p,m){t(o,h,s(h),m)}),o}function Kc(e,t){return e&&Ur(t,Ut(t),e)}function xp(e,t){return e&&Ur(t,ar(t),e)}function Yr(e,t,s){t=="__proto__"&&wn?wn(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function Ga(e,t){for(var s=-1,o=t.length,h=C(o),p=e==null;++s<o;)h[s]=p?r:Oo(e,t[s]);return h}function Ti(e,t,s){return e===e&&(s!==r&&(e=e<=s?e:s),t!==r&&(e=e>=t?e:t)),e}function br(e,t,s,o,h,p){var m,w=t&A,S=t&D,j=t&U;if(s&&(m=h?s(e,o,h,p):s(e)),m!==r)return m;if(!ot(e))return e;var M=ge(e);if(M){if(m=fd(e),!w)return sr(e,m)}else{var k=Gt(e),G=k==Q||k==oe;if(di(e))return fu(e,w);if(k==xe||k==_e||G&&!h){if(m=S||G?{}:Ru(e),!w)return S?td(e,xp(m,e)):ed(e,Kc(m,e))}else{if(!ke[k])return h?e:{};m=pd(e,k,w)}}p||(p=new Rr);var ee=p.get(e);if(ee)return ee;p.set(e,m),ah(e)?e.forEach(function(ae){m.add(br(ae,t,s,ae,e,p))}):sh(e)&&e.forEach(function(ae,Ie){m.set(Ie,br(ae,t,s,Ie,e,p))});var ne=j?S?po:fo:S?ar:Ut,we=M?r:ne(e);return mr(we||e,function(ae,Ie){we&&(Ie=ae,ae=e[Ie]),bs(m,Ie,br(ae,t,s,Ie,e,p))}),m}function Sp(e){var t=Ut(e);return function(s){return Hc(s,e,t)}}function Hc(e,t,s){var o=s.length;if(e==null)return!o;for(e=Ge(e);o--;){var h=s[o],p=t[h],m=e[h];if(m===r&&!(h in e)||!p(m))return!1}return!0}function Vc(e,t,s){if(typeof e!="function")throw new wr(d);return Os(function(){e.apply(r,s)},t)}function Es(e,t,s,o){var h=-1,p=cn,m=!0,w=e.length,S=[],j=t.length;if(!w)return S;s&&(t=it(t,lr(s))),o?(p=Da,m=!1):t.length>=a&&(p=gs,m=!1,t=new Ai(t));e:for(;++h<w;){var M=e[h],k=s==null?M:s(M);if(M=o||M!==0?M:0,m&&k===k){for(var G=j;G--;)if(t[G]===k)continue e;S.push(M)}else p(t,k,o)||S.push(M)}return S}var hi=yu(qr),Fc=yu(Ja,!0);function Pp(e,t){var s=!0;return hi(e,function(o,h,p){return s=!!t(o,h,p),s}),s}function Pn(e,t,s){for(var o=-1,h=e.length;++o<h;){var p=e[o],m=t(p);if(m!=null&&(w===r?m===m&&!pr(m):s(m,w)))var w=m,S=p}return S}function Cp(e,t,s,o){var h=e.length;for(s=ye(s),s<0&&(s=-s>h?0:h+s),o=o===r||o>h?h:ye(o),o<0&&(o+=h),o=s>o?0:ch(o);s<o;)e[s++]=t;return e}function Bc(e,t){var s=[];return hi(e,function(o,h,p){t(o,h,p)&&s.push(o)}),s}function Vt(e,t,s,o,h){var p=-1,m=e.length;for(s||(s=gd),h||(h=[]);++p<m;){var w=e[p];t>0&&s(w)?t>1?Vt(w,t-1,s,o,h):oi(h,w):o||(h[h.length]=w)}return h}var Wa=mu(),Gc=mu(!0);function qr(e,t){return e&&Wa(e,t,Ut)}function Ja(e,t){return e&&Gc(e,t,Ut)}function Cn(e,t){return ai(t,function(s){return ei(e[s])})}function Ri(e,t){t=fi(t,e);for(var s=0,o=t.length;e!=null&&s<o;)e=e[kr(t[s++])];return s&&s==o?e:r}function Wc(e,t,s){var o=t(e);return ge(e)?o:oi(o,s(e))}function Xt(e){return e==null?e===r?nt:De:Ci&&Ci in Ge(e)?ud(e):Ed(e)}function Ya(e,t){return e>t}function Op(e,t){return e!=null&&ze.call(e,t)}function Ap(e,t){return e!=null&&t in Ge(e)}function Tp(e,t,s){return e>=Bt(t,s)&&e<Mt(t,s)}function Xa(e,t,s){for(var o=s?Da:cn,h=e[0].length,p=e.length,m=p,w=C(p),S=1/0,j=[];m--;){var M=e[m];m&&t&&(M=it(M,lr(t))),S=Bt(M.length,S),w[m]=!s&&(t||h>=120&&M.length>=120)?new Ai(m&&M):r}M=e[0];var k=-1,G=w[0];e:for(;++k<h&&j.length<S;){var ee=M[k],ne=t?t(ee):ee;if(ee=s||ee!==0?ee:0,!(G?gs(G,ne):o(j,ne,s))){for(m=p;--m;){var we=w[m];if(!(we?gs(we,ne):o(e[m],ne,s)))continue e}G&&G.push(ne),j.push(ee)}}return j}function Rp(e,t,s,o){return qr(e,function(h,p,m){t(o,s(h),p,m)}),o}function Is(e,t,s){t=fi(t,e),e=Lu(e,t);var o=e==null?e:e[kr(Ir(t))];return o==null?r:qt(o,e,s)}function Jc(e){return vt(e)&&Xt(e)==_e}function Np(e){return vt(e)&&Xt(e)==Ne}function Dp(e){return vt(e)&&Xt(e)==P}function xs(e,t,s,o,h){return e===t?!0:e==null||t==null||!vt(e)&&!vt(t)?e!==e&&t!==t:$p(e,t,s,o,xs,h)}function $p(e,t,s,o,h,p){var m=ge(e),w=ge(t),S=m?xt:Gt(e),j=w?xt:Gt(t);S=S==_e?xe:S,j=j==_e?xe:j;var M=S==xe,k=j==xe,G=S==j;if(G&&di(e)){if(!di(t))return!1;m=!0,M=!1}if(G&&!M)return p||(p=new Rr),m||ss(e)?Ou(e,t,s,o,h,p):od(e,t,S,s,o,h,p);if(!(s&L)){var ee=M&&ze.call(e,"__wrapped__"),ne=k&&ze.call(t,"__wrapped__");if(ee||ne){var we=ee?e.value():e,ae=ne?t.value():t;return p||(p=new Rr),h(we,ae,s,o,p)}}return G?(p||(p=new Rr),cd(e,t,s,o,h,p)):!1}function Lp(e){return vt(e)&&Gt(e)==me}function Za(e,t,s,o){var h=s.length,p=h,m=!o;if(e==null)return!p;for(e=Ge(e);h--;){var w=s[h];if(m&&w[2]?w[1]!==e[w[0]]:!(w[0]in e))return!1}for(;++h<p;){w=s[h];var S=w[0],j=e[S],M=w[1];if(m&&w[2]){if(j===r&&!(S in e))return!1}else{var k=new Rr;if(o)var G=o(j,M,S,e,t,k);if(!(G===r?xs(M,j,L|V,o,k):G))return!1}}return!0}function Yc(e){if(!ot(e)||yd(e))return!1;var t=ei(e)?Lf:ya;return t.test(Di(e))}function jp(e){return vt(e)&&Xt(e)==st}function Mp(e){return vt(e)&&Gt(e)==Le}function zp(e){return vt(e)&&Vn(e.length)&&!!Ve[Xt(e)]}function Xc(e){return typeof e=="function"?e:e==null?or:typeof e=="object"?ge(e)?eu(e[0],e[1]):Qc(e):wh(e)}function Qa(e){if(!Cs(e))return kf(e);var t=[];for(var s in Ge(e))ze.call(e,s)&&s!="constructor"&&t.push(s);return t}function qp(e){if(!ot(e))return bd(e);var t=Cs(e),s=[];for(var o in e)o=="constructor"&&(t||!ze.call(e,o))||s.push(o);return s}function eo(e,t){return e<t}function Zc(e,t){var s=-1,o=nr(e)?C(e.length):[];return hi(e,function(h,p,m){o[++s]=t(h,p,m)}),o}function Qc(e){var t=vo(e);return t.length==1&&t[0][2]?Du(t[0][0],t[0][1]):function(s){return s===e||Za(s,e,t)}}function eu(e,t){return mo(e)&&Nu(t)?Du(kr(e),t):function(s){var o=Oo(s,e);return o===r&&o===t?Ao(s,e):xs(t,o,L|V)}}function On(e,t,s,o,h){e!==t&&Wa(t,function(p,m){if(h||(h=new Rr),ot(p))Up(e,t,m,s,On,o,h);else{var w=o?o(_o(e,m),p,m+"",e,t,h):r;w===r&&(w=p),Ba(e,m,w)}},ar)}function Up(e,t,s,o,h,p,m){var w=_o(e,s),S=_o(t,s),j=m.get(S);if(j){Ba(e,s,j);return}var M=p?p(w,S,s+"",e,t,m):r,k=M===r;if(k){var G=ge(S),ee=!G&&di(S),ne=!G&&!ee&&ss(S);M=S,G||ee||ne?ge(w)?M=w:bt(w)?M=sr(w):ee?(k=!1,M=fu(S,!0)):ne?(k=!1,M=pu(S,!0)):M=[]:As(S)||$i(S)?(M=w,$i(w)?M=uh(w):(!ot(w)||ei(w))&&(M=Ru(S))):k=!1}k&&(m.set(S,M),h(M,S,o,p,m),m.delete(S)),Ba(e,s,M)}function tu(e,t){var s=e.length;if(s)return t+=t<0?s:0,Qr(t,s)?e[t]:r}function ru(e,t,s){t.length?t=it(t,function(p){return ge(p)?function(m){return Ri(m,p.length===1?p[0]:p)}:p}):t=[or];var o=-1;t=it(t,lr(ie()));var h=Zc(e,function(p,m,w){var S=it(t,function(j){return j(p)});return{criteria:S,index:++o,value:p}});return pf(h,function(p,m){return Qp(p,m,s)})}function kp(e,t){return iu(e,t,function(s,o){return Ao(e,o)})}function iu(e,t,s){for(var o=-1,h=t.length,p={};++o<h;){var m=t[o],w=Ri(e,m);s(w,m)&&Ss(p,fi(m,e),w)}return p}function Kp(e){return function(t){return Ri(t,e)}}function to(e,t,s,o){var h=o?ff:Gi,p=-1,m=t.length,w=e;for(e===t&&(t=sr(t)),s&&(w=it(e,lr(s)));++p<m;)for(var S=0,j=t[p],M=s?s(j):j;(S=h(w,M,S,o))>-1;)w!==e&&mn.call(w,S,1),mn.call(e,S,1);return e}function su(e,t){for(var s=e?t.length:0,o=s-1;s--;){var h=t[s];if(s==o||h!==p){var p=h;Qr(h)?mn.call(e,h,1):no(e,h)}}return e}function ro(e,t){return e+bn(zc()*(t-e+1))}function Hp(e,t,s,o){for(var h=-1,p=Mt(_n((t-e)/(s||1)),0),m=C(p);p--;)m[o?p:++h]=e,e+=s;return m}function io(e,t){var s="";if(!e||t<1||t>J)return s;do t%2&&(s+=e),t=bn(t/2),t&&(e+=e);while(t);return s}function be(e,t){return bo($u(e,t,or),e+"")}function Vp(e){return kc(ns(e))}function Fp(e,t){var s=ns(e);return zn(s,Ti(t,0,s.length))}function Ss(e,t,s,o){if(!ot(e))return e;t=fi(t,e);for(var h=-1,p=t.length,m=p-1,w=e;w!=null&&++h<p;){var S=kr(t[h]),j=s;if(S==="__proto__"||S==="constructor"||S==="prototype")return e;if(h!=m){var M=w[S];j=o?o(M,S,w):r,j===r&&(j=ot(M)?M:Qr(t[h+1])?[]:{})}bs(w,S,j),w=w[S]}return e}var nu=En?function(e,t){return En.set(e,t),e}:or,Bp=wn?function(e,t){return wn(e,"toString",{configurable:!0,enumerable:!1,value:Ro(t),writable:!0})}:or;function Gp(e){return zn(ns(e))}function Er(e,t,s){var o=-1,h=e.length;t<0&&(t=-t>h?0:h+t),s=s>h?h:s,s<0&&(s+=h),h=t>s?0:s-t>>>0,t>>>=0;for(var p=C(h);++o<h;)p[o]=e[o+t];return p}function Wp(e,t){var s;return hi(e,function(o,h,p){return s=t(o,h,p),!s}),!!s}function An(e,t,s){var o=0,h=e==null?o:e.length;if(typeof t=="number"&&t===t&&h<=Ke){for(;o<h;){var p=o+h>>>1,m=e[p];m!==null&&!pr(m)&&(s?m<=t:m<t)?o=p+1:h=p}return h}return so(e,t,or,s)}function so(e,t,s,o){var h=0,p=e==null?0:e.length;if(p===0)return 0;t=s(t);for(var m=t!==t,w=t===null,S=pr(t),j=t===r;h<p;){var M=bn((h+p)/2),k=s(e[M]),G=k!==r,ee=k===null,ne=k===k,we=pr(k);if(m)var ae=o||ne;else j?ae=ne&&(o||G):w?ae=ne&&G&&(o||!ee):S?ae=ne&&G&&!ee&&(o||!we):ee||we?ae=!1:ae=o?k<=t:k<t;ae?h=M+1:p=M}return Bt(p,ct)}function au(e,t){for(var s=-1,o=e.length,h=0,p=[];++s<o;){var m=e[s],w=t?t(m):m;if(!s||!Nr(w,S)){var S=w;p[h++]=m===0?0:m}}return p}function ou(e){return typeof e=="number"?e:pr(e)?H:+e}function fr(e){if(typeof e=="string")return e;if(ge(e))return it(e,fr)+"";if(pr(e))return qc?qc.call(e):"";var t=e+"";return t=="0"&&1/e==-Te?"-0":t}function li(e,t,s){var o=-1,h=cn,p=e.length,m=!0,w=[],S=w;if(s)m=!1,h=Da;else if(p>=a){var j=t?null:nd(e);if(j)return hn(j);m=!1,h=gs,S=new Ai}else S=t?[]:w;e:for(;++o<p;){var M=e[o],k=t?t(M):M;if(M=s||M!==0?M:0,m&&k===k){for(var G=S.length;G--;)if(S[G]===k)continue e;t&&S.push(k),w.push(M)}else h(S,k,s)||(S!==w&&S.push(k),w.push(M))}return w}function no(e,t){return t=fi(t,e),e=Lu(e,t),e==null||delete e[kr(Ir(t))]}function cu(e,t,s,o){return Ss(e,t,s(Ri(e,t)),o)}function Tn(e,t,s,o){for(var h=e.length,p=o?h:-1;(o?p--:++p<h)&&t(e[p],p,e););return s?Er(e,o?0:p,o?p+1:h):Er(e,o?p+1:0,o?h:p)}function uu(e,t){var s=e;return s instanceof Se&&(s=s.value()),$a(t,function(o,h){return h.func.apply(h.thisArg,oi([o],h.args))},s)}function ao(e,t,s){var o=e.length;if(o<2)return o?li(e[0]):[];for(var h=-1,p=C(o);++h<o;)for(var m=e[h],w=-1;++w<o;)w!=h&&(p[h]=Es(p[h]||m,e[w],t,s));return li(Vt(p,1),t,s)}function hu(e,t,s){for(var o=-1,h=e.length,p=t.length,m={};++o<h;){var w=o<p?t[o]:r;s(m,e[o],w)}return m}function oo(e){return bt(e)?e:[]}function co(e){return typeof e=="function"?e:or}function fi(e,t){return ge(e)?e:mo(e,t)?[e]:qu(je(e))}var Jp=be;function pi(e,t,s){var o=e.length;return s=s===r?o:s,!t&&s>=o?e:Er(e,t,s)}var lu=jf||function(e){return Pe.clearTimeout(e)};function fu(e,t){if(t)return e.slice();var s=e.length,o=Dc?Dc(s):new e.constructor(s);return e.copy(o),o}function uo(e){var t=new e.constructor(e.byteLength);return new vn(t).set(new vn(e)),t}function Yp(e,t){var s=t?uo(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function Xp(e){var t=new e.constructor(e.source,vr.exec(e));return t.lastIndex=e.lastIndex,t}function Zp(e){return _s?Ge(_s.call(e)):{}}function pu(e,t){var s=t?uo(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function du(e,t){if(e!==t){var s=e!==r,o=e===null,h=e===e,p=pr(e),m=t!==r,w=t===null,S=t===t,j=pr(t);if(!w&&!j&&!p&&e>t||p&&m&&S&&!w&&!j||o&&m&&S||!s&&S||!h)return 1;if(!o&&!p&&!j&&e<t||j&&s&&h&&!o&&!p||w&&s&&h||!m&&h||!S)return-1}return 0}function Qp(e,t,s){for(var o=-1,h=e.criteria,p=t.criteria,m=h.length,w=s.length;++o<m;){var S=du(h[o],p[o]);if(S){if(o>=w)return S;var j=s[o];return S*(j=="desc"?-1:1)}}return e.index-t.index}function gu(e,t,s,o){for(var h=-1,p=e.length,m=s.length,w=-1,S=t.length,j=Mt(p-m,0),M=C(S+j),k=!o;++w<S;)M[w]=t[w];for(;++h<m;)(k||h<p)&&(M[s[h]]=e[h]);for(;j--;)M[w++]=e[h++];return M}function vu(e,t,s,o){for(var h=-1,p=e.length,m=-1,w=s.length,S=-1,j=t.length,M=Mt(p-w,0),k=C(M+j),G=!o;++h<M;)k[h]=e[h];for(var ee=h;++S<j;)k[ee+S]=t[S];for(;++m<w;)(G||h<p)&&(k[ee+s[m]]=e[h++]);return k}function sr(e,t){var s=-1,o=e.length;for(t||(t=C(o));++s<o;)t[s]=e[s];return t}function Ur(e,t,s,o){var h=!s;s||(s={});for(var p=-1,m=t.length;++p<m;){var w=t[p],S=o?o(s[w],e[w],w,s,e):r;S===r&&(S=e[w]),h?Yr(s,w,S):bs(s,w,S)}return s}function ed(e,t){return Ur(e,yo(e),t)}function td(e,t){return Ur(e,Au(e),t)}function Rn(e,t){return function(s,o){var h=ge(s)?af:Ip,p=t?t():{};return h(s,e,ie(o,2),p)}}function ts(e){return be(function(t,s){var o=-1,h=s.length,p=h>1?s[h-1]:r,m=h>2?s[2]:r;for(p=e.length>3&&typeof p=="function"?(h--,p):r,m&&Zt(s[0],s[1],m)&&(p=h<3?r:p,h=1),t=Ge(t);++o<h;){var w=s[o];w&&e(t,w,o,p)}return t})}function yu(e,t){return function(s,o){if(s==null)return s;if(!nr(s))return e(s,o);for(var h=s.length,p=t?h:-1,m=Ge(s);(t?p--:++p<h)&&o(m[p],p,m)!==!1;);return s}}function mu(e){return function(t,s,o){for(var h=-1,p=Ge(t),m=o(t),w=m.length;w--;){var S=m[e?w:++h];if(s(p[S],S,p)===!1)break}return t}}function rd(e,t,s){var o=t&re,h=Ps(e);function p(){var m=this&&this!==Pe&&this instanceof p?h:e;return m.apply(o?s:this,arguments)}return p}function wu(e){return function(t){t=je(t);var s=Wi(t)?Tr(t):r,o=s?s[0]:t.charAt(0),h=s?pi(s,1).join(""):t.slice(1);return o[e]()+h}}function rs(e){return function(t){return $a(yh(vh(t).replace(ps,"")),e,"")}}function Ps(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=es(e.prototype),o=e.apply(s,t);return ot(o)?o:s}}function id(e,t,s){var o=Ps(e);function h(){for(var p=arguments.length,m=C(p),w=p,S=is(h);w--;)m[w]=arguments[w];var j=p<3&&m[0]!==S&&m[p-1]!==S?[]:ci(m,S);if(p-=j.length,p<s)return xu(e,t,Nn,h.placeholder,r,m,j,r,r,s-p);var M=this&&this!==Pe&&this instanceof h?o:e;return qt(M,this,m)}return h}function _u(e){return function(t,s,o){var h=Ge(t);if(!nr(t)){var p=ie(s,3);t=Ut(t),s=function(w){return p(h[w],w,h)}}var m=e(t,s,o);return m>-1?h[p?t[m]:m]:r}}function bu(e){return Zr(function(t){var s=t.length,o=s,h=_r.prototype.thru;for(e&&t.reverse();o--;){var p=t[o];if(typeof p!="function")throw new wr(d);if(h&&!m&&jn(p)=="wrapper")var m=new _r([],!0)}for(o=m?o:s;++o<s;){p=t[o];var w=jn(p),S=w=="wrapper"?go(p):r;S&&wo(S[0])&&S[1]==(K|he|pe|W)&&!S[4].length&&S[9]==1?m=m[jn(S[0])].apply(m,S[3]):m=p.length==1&&wo(p)?m[w]():m.thru(p)}return function(){var j=arguments,M=j[0];if(m&&j.length==1&&ge(M))return m.plant(M).value();for(var k=0,G=s?t[k].apply(this,j):M;++k<s;)G=t[k].call(this,G);return G}})}function Nn(e,t,s,o,h,p,m,w,S,j){var M=t&K,k=t&re,G=t&ce,ee=t&(he|fe),ne=t&ve,we=G?r:Ps(e);function ae(){for(var Ie=arguments.length,Ce=C(Ie),dr=Ie;dr--;)Ce[dr]=arguments[dr];if(ee)var Qt=is(ae),gr=gf(Ce,Qt);if(o&&(Ce=gu(Ce,o,h,ee)),p&&(Ce=vu(Ce,p,m,ee)),Ie-=gr,ee&&Ie<j){var Et=ci(Ce,Qt);return xu(e,t,Nn,ae.placeholder,s,Ce,Et,w,S,j-Ie)}var Dr=k?s:this,ri=G?Dr[e]:e;return Ie=Ce.length,w?Ce=Id(Ce,w):ne&&Ie>1&&Ce.reverse(),M&&S<Ie&&(Ce.length=S),this&&this!==Pe&&this instanceof ae&&(ri=we||Ps(ri)),ri.apply(Dr,Ce)}return ae}function Eu(e,t){return function(s,o){return Rp(s,e,t(o),{})}}function Dn(e,t){return function(s,o){var h;if(s===r&&o===r)return t;if(s!==r&&(h=s),o!==r){if(h===r)return o;typeof s=="string"||typeof o=="string"?(s=fr(s),o=fr(o)):(s=ou(s),o=ou(o)),h=e(s,o)}return h}}function ho(e){return Zr(function(t){return t=it(t,lr(ie())),be(function(s){var o=this;return e(t,function(h){return qt(h,o,s)})})})}function $n(e,t){t=t===r?" ":fr(t);var s=t.length;if(s<2)return s?io(t,e):t;var o=io(t,_n(e/Ji(t)));return Wi(t)?pi(Tr(o),0,e).join(""):o.slice(0,e)}function sd(e,t,s,o){var h=t&re,p=Ps(e);function m(){for(var w=-1,S=arguments.length,j=-1,M=o.length,k=C(M+S),G=this&&this!==Pe&&this instanceof m?p:e;++j<M;)k[j]=o[j];for(;S--;)k[j++]=arguments[++w];return qt(G,h?s:this,k)}return m}function Iu(e){return function(t,s,o){return o&&typeof o!="number"&&Zt(t,s,o)&&(s=o=r),t=ti(t),s===r?(s=t,t=0):s=ti(s),o=o===r?t<s?1:-1:ti(o),Hp(t,s,o,e)}}function Ln(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=xr(t),s=xr(s)),e(t,s)}}function xu(e,t,s,o,h,p,m,w,S,j){var M=t&he,k=M?m:r,G=M?r:m,ee=M?p:r,ne=M?r:p;t|=M?pe:N,t&=~(M?N:pe),t&ue||(t&=~(re|ce));var we=[e,t,h,ee,k,ne,G,w,S,j],ae=s.apply(r,we);return wo(e)&&ju(ae,we),ae.placeholder=o,Mu(ae,e,t)}function lo(e){var t=jt[e];return function(s,o){if(s=xr(s),o=o==null?0:Bt(ye(o),292),o&&Mc(s)){var h=(je(s)+"e").split("e"),p=t(h[0]+"e"+(+h[1]+o));return h=(je(p)+"e").split("e"),+(h[0]+"e"+(+h[1]-o))}return t(s)}}var nd=Zi&&1/hn(new Zi([,-0]))[1]==Te?function(e){return new Zi(e)}:$o;function Su(e){return function(t){var s=Gt(t);return s==me?ka(t):s==Le?Ef(t):df(t,e(t))}}function Xr(e,t,s,o,h,p,m,w){var S=t&ce;if(!S&&typeof e!="function")throw new wr(d);var j=o?o.length:0;if(j||(t&=~(pe|N),o=h=r),m=m===r?m:Mt(ye(m),0),w=w===r?w:ye(w),j-=h?h.length:0,t&N){var M=o,k=h;o=h=r}var G=S?r:go(e),ee=[e,t,s,o,h,M,k,p,m,w];if(G&&_d(ee,G),e=ee[0],t=ee[1],s=ee[2],o=ee[3],h=ee[4],w=ee[9]=ee[9]===r?S?0:e.length:Mt(ee[9]-j,0),!w&&t&(he|fe)&&(t&=~(he|fe)),!t||t==re)var ne=rd(e,t,s);else t==he||t==fe?ne=id(e,t,w):(t==pe||t==(re|pe))&&!h.length?ne=sd(e,t,s,o):ne=Nn.apply(r,ee);var we=G?nu:ju;return Mu(we(ne,ee),e,t)}function Pu(e,t,s,o){return e===r||Nr(e,Xi[s])&&!ze.call(o,s)?t:e}function Cu(e,t,s,o,h,p){return ot(e)&&ot(t)&&(p.set(t,e),On(e,t,r,Cu,p),p.delete(t)),e}function ad(e){return As(e)?r:e}function Ou(e,t,s,o,h,p){var m=s&L,w=e.length,S=t.length;if(w!=S&&!(m&&S>w))return!1;var j=p.get(e),M=p.get(t);if(j&&M)return j==t&&M==e;var k=-1,G=!0,ee=s&V?new Ai:r;for(p.set(e,t),p.set(t,e);++k<w;){var ne=e[k],we=t[k];if(o)var ae=m?o(we,ne,k,t,e,p):o(ne,we,k,e,t,p);if(ae!==r){if(ae)continue;G=!1;break}if(ee){if(!La(t,function(Ie,Ce){if(!gs(ee,Ce)&&(ne===Ie||h(ne,Ie,s,o,p)))return ee.push(Ce)})){G=!1;break}}else if(!(ne===we||h(ne,we,s,o,p))){G=!1;break}}return p.delete(e),p.delete(t),G}function od(e,t,s,o,h,p,m){switch(s){case He:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ne:return!(e.byteLength!=t.byteLength||!p(new vn(e),new vn(t)));case T:case P:case Re:return Nr(+e,+t);case b:return e.name==t.name&&e.message==t.message;case st:case Je:return e==t+"";case me:var w=ka;case Le:var S=o&L;if(w||(w=hn),e.size!=t.size&&!S)return!1;var j=m.get(e);if(j)return j==t;o|=V,m.set(e,t);var M=Ou(w(e),w(t),o,h,p,m);return m.delete(e),M;case Ye:if(_s)return _s.call(e)==_s.call(t)}return!1}function cd(e,t,s,o,h,p){var m=s&L,w=fo(e),S=w.length,j=fo(t),M=j.length;if(S!=M&&!m)return!1;for(var k=S;k--;){var G=w[k];if(!(m?G in t:ze.call(t,G)))return!1}var ee=p.get(e),ne=p.get(t);if(ee&&ne)return ee==t&&ne==e;var we=!0;p.set(e,t),p.set(t,e);for(var ae=m;++k<S;){G=w[k];var Ie=e[G],Ce=t[G];if(o)var dr=m?o(Ce,Ie,G,t,e,p):o(Ie,Ce,G,e,t,p);if(!(dr===r?Ie===Ce||h(Ie,Ce,s,o,p):dr)){we=!1;break}ae||(ae=G=="constructor")}if(we&&!ae){var Qt=e.constructor,gr=t.constructor;Qt!=gr&&"constructor"in e&&"constructor"in t&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof gr=="function"&&gr instanceof gr)&&(we=!1)}return p.delete(e),p.delete(t),we}function Zr(e){return bo($u(e,r,Hu),e+"")}function fo(e){return Wc(e,Ut,yo)}function po(e){return Wc(e,ar,Au)}var go=En?function(e){return En.get(e)}:$o;function jn(e){for(var t=e.name+"",s=Qi[t],o=ze.call(Qi,t)?s.length:0;o--;){var h=s[o],p=h.func;if(p==null||p==e)return h.name}return t}function is(e){var t=ze.call(f,"placeholder")?f:e;return t.placeholder}function ie(){var e=f.iteratee||No;return e=e===No?Xc:e,arguments.length?e(arguments[0],arguments[1]):e}function Mn(e,t){var s=e.__data__;return vd(t)?s[typeof t=="string"?"string":"hash"]:s.map}function vo(e){for(var t=Ut(e),s=t.length;s--;){var o=t[s],h=e[o];t[s]=[o,h,Nu(h)]}return t}function Ni(e,t){var s=wf(e,t);return Yc(s)?s:r}function ud(e){var t=ze.call(e,Ci),s=e[Ci];try{e[Ci]=r;var o=!0}catch{}var h=dn.call(e);return o&&(t?e[Ci]=s:delete e[Ci]),h}var yo=Ha?function(e){return e==null?[]:(e=Ge(e),ai(Ha(e),function(t){return Lc.call(e,t)}))}:Lo,Au=Ha?function(e){for(var t=[];e;)oi(t,yo(e)),e=yn(e);return t}:Lo,Gt=Xt;(Va&&Gt(new Va(new ArrayBuffer(1)))!=He||ys&&Gt(new ys)!=me||Fa&&Gt(Fa.resolve())!=St||Zi&&Gt(new Zi)!=Le||ms&&Gt(new ms)!=Ue)&&(Gt=function(e){var t=Xt(e),s=t==xe?e.constructor:r,o=s?Di(s):"";if(o)switch(o){case Ff:return He;case Bf:return me;case Gf:return St;case Wf:return Le;case Jf:return Ue}return t});function hd(e,t,s){for(var o=-1,h=s.length;++o<h;){var p=s[o],m=p.size;switch(p.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Bt(t,e+m);break;case"takeRight":e=Mt(e,t-m);break}}return{start:e,end:t}}function ld(e){var t=e.match(We);return t?t[1].split(Tt):[]}function Tu(e,t,s){t=fi(t,e);for(var o=-1,h=t.length,p=!1;++o<h;){var m=kr(t[o]);if(!(p=e!=null&&s(e,m)))break;e=e[m]}return p||++o!=h?p:(h=e==null?0:e.length,!!h&&Vn(h)&&Qr(m,h)&&(ge(e)||$i(e)))}function fd(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&ze.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Ru(e){return typeof e.constructor=="function"&&!Cs(e)?es(yn(e)):{}}function pd(e,t,s){var o=e.constructor;switch(t){case Ne:return uo(e);case T:case P:return new o(+e);case He:return Yp(e,s);case ut:case Me:case Pt:case Lt:case Kt:case Ht:case zt:case Wt:case rr:return pu(e,s);case me:return new o;case Re:case Je:return new o(e);case st:return Xp(e);case Le:return new o;case Ye:return Zp(e)}}function dd(e,t){var s=t.length;if(!s)return e;var o=s-1;return t[o]=(s>1?"& ":"")+t[o],t=t.join(s>2?", ":" "),e.replace(gt,`{
/* [wrapped with `+t+`] */
`)}function gd(e){return ge(e)||$i(e)||!!(jc&&e&&e[jc])}function Qr(e,t){var s=typeof e;return t=t??J,!!t&&(s=="number"||s!="symbol"&&wa.test(e))&&e>-1&&e%1==0&&e<t}function Zt(e,t,s){if(!ot(s))return!1;var o=typeof t;return(o=="number"?nr(s)&&Qr(t,s.length):o=="string"&&t in s)?Nr(s[t],e):!1}function mo(e,t){if(ge(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||pr(e)?!0:Ct.test(e)||!rt.test(e)||t!=null&&e in Ge(t)}function vd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function wo(e){var t=jn(e),s=f[t];if(typeof s!="function"||!(t in Se.prototype))return!1;if(e===s)return!0;var o=go(s);return!!o&&e===o[0]}function yd(e){return!!Nc&&Nc in e}var md=fn?ei:jo;function Cs(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||Xi;return e===s}function Nu(e){return e===e&&!ot(e)}function Du(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==r||e in Ge(s))}}function wd(e){var t=Kn(e,function(o){return s.size===v&&s.clear(),o}),s=t.cache;return t}function _d(e,t){var s=e[1],o=t[1],h=s|o,p=h<(re|ce|K),m=o==K&&s==he||o==K&&s==W&&e[7].length<=t[8]||o==(K|W)&&t[7].length<=t[8]&&s==he;if(!(p||m))return e;o&re&&(e[2]=t[2],h|=s&re?0:ue);var w=t[3];if(w){var S=e[3];e[3]=S?gu(S,w,t[4]):w,e[4]=S?ci(e[3],x):t[4]}return w=t[5],w&&(S=e[5],e[5]=S?vu(S,w,t[6]):w,e[6]=S?ci(e[5],x):t[6]),w=t[7],w&&(e[7]=w),o&K&&(e[8]=e[8]==null?t[8]:Bt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=h,e}function bd(e){var t=[];if(e!=null)for(var s in Ge(e))t.push(s);return t}function Ed(e){return dn.call(e)}function $u(e,t,s){return t=Mt(t===r?e.length-1:t,0),function(){for(var o=arguments,h=-1,p=Mt(o.length-t,0),m=C(p);++h<p;)m[h]=o[t+h];h=-1;for(var w=C(t+1);++h<t;)w[h]=o[h];return w[t]=s(m),qt(e,this,w)}}function Lu(e,t){return t.length<2?e:Ri(e,Er(t,0,-1))}function Id(e,t){for(var s=e.length,o=Bt(t.length,s),h=sr(e);o--;){var p=t[o];e[o]=Qr(p,s)?h[p]:r}return e}function _o(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ju=zu(nu),Os=zf||function(e,t){return Pe.setTimeout(e,t)},bo=zu(Bp);function Mu(e,t,s){var o=t+"";return bo(e,dd(o,xd(ld(o),s)))}function zu(e){var t=0,s=0;return function(){var o=Kf(),h=et-(o-s);if(s=o,h>0){if(++t>=Ae)return arguments[0]}else t=0;return e.apply(r,arguments)}}function zn(e,t){var s=-1,o=e.length,h=o-1;for(t=t===r?o:t;++s<t;){var p=ro(s,h),m=e[p];e[p]=e[s],e[s]=m}return e.length=t,e}var qu=wd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ot,function(s,o,h,p){t.push(h?p.replace(pa,"$1"):o||s)}),t});function kr(e){if(typeof e=="string"||pr(e))return e;var t=e+"";return t=="0"&&1/e==-Te?"-0":t}function Di(e){if(e!=null){try{return pn.call(e)}catch{}try{return e+""}catch{}}return""}function xd(e,t){return mr(Lr,function(s){var o="_."+s[0];t&s[1]&&!cn(e,o)&&e.push(o)}),e.sort()}function Uu(e){if(e instanceof Se)return e.clone();var t=new _r(e.__wrapped__,e.__chain__);return t.__actions__=sr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Sd(e,t,s){(s?Zt(e,t,s):t===r)?t=1:t=Mt(ye(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var h=0,p=0,m=C(_n(o/t));h<o;)m[p++]=Er(e,h,h+=t);return m}function Pd(e){for(var t=-1,s=e==null?0:e.length,o=0,h=[];++t<s;){var p=e[t];p&&(h[o++]=p)}return h}function Cd(){var e=arguments.length;if(!e)return[];for(var t=C(e-1),s=arguments[0],o=e;o--;)t[o-1]=arguments[o];return oi(ge(s)?sr(s):[s],Vt(t,1))}var Od=be(function(e,t){return bt(e)?Es(e,Vt(t,1,bt,!0)):[]}),Ad=be(function(e,t){var s=Ir(t);return bt(s)&&(s=r),bt(e)?Es(e,Vt(t,1,bt,!0),ie(s,2)):[]}),Td=be(function(e,t){var s=Ir(t);return bt(s)&&(s=r),bt(e)?Es(e,Vt(t,1,bt,!0),r,s):[]});function Rd(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===r?1:ye(t),Er(e,t<0?0:t,o)):[]}function Nd(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===r?1:ye(t),t=o-t,Er(e,0,t<0?0:t)):[]}function Dd(e,t){return e&&e.length?Tn(e,ie(t,3),!0,!0):[]}function $d(e,t){return e&&e.length?Tn(e,ie(t,3),!0):[]}function Ld(e,t,s,o){var h=e==null?0:e.length;return h?(s&&typeof s!="number"&&Zt(e,t,s)&&(s=0,o=h),Cp(e,t,s,o)):[]}function ku(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=s==null?0:ye(s);return h<0&&(h=Mt(o+h,0)),un(e,ie(t,3),h)}function Ku(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=o-1;return s!==r&&(h=ye(s),h=s<0?Mt(o+h,0):Bt(h,o-1)),un(e,ie(t,3),h,!0)}function Hu(e){var t=e==null?0:e.length;return t?Vt(e,1):[]}function jd(e){var t=e==null?0:e.length;return t?Vt(e,Te):[]}function Md(e,t){var s=e==null?0:e.length;return s?(t=t===r?1:ye(t),Vt(e,t)):[]}function zd(e){for(var t=-1,s=e==null?0:e.length,o={};++t<s;){var h=e[t];o[h[0]]=h[1]}return o}function Vu(e){return e&&e.length?e[0]:r}function qd(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=s==null?0:ye(s);return h<0&&(h=Mt(o+h,0)),Gi(e,t,h)}function Ud(e){var t=e==null?0:e.length;return t?Er(e,0,-1):[]}var kd=be(function(e){var t=it(e,oo);return t.length&&t[0]===e[0]?Xa(t):[]}),Kd=be(function(e){var t=Ir(e),s=it(e,oo);return t===Ir(s)?t=r:s.pop(),s.length&&s[0]===e[0]?Xa(s,ie(t,2)):[]}),Hd=be(function(e){var t=Ir(e),s=it(e,oo);return t=typeof t=="function"?t:r,t&&s.pop(),s.length&&s[0]===e[0]?Xa(s,r,t):[]});function Vd(e,t){return e==null?"":Uf.call(e,t)}function Ir(e){var t=e==null?0:e.length;return t?e[t-1]:r}function Fd(e,t,s){var o=e==null?0:e.length;if(!o)return-1;var h=o;return s!==r&&(h=ye(s),h=h<0?Mt(o+h,0):Bt(h,o-1)),t===t?xf(e,t,h):un(e,xc,h,!0)}function Bd(e,t){return e&&e.length?tu(e,ye(t)):r}var Gd=be(Fu);function Fu(e,t){return e&&e.length&&t&&t.length?to(e,t):e}function Wd(e,t,s){return e&&e.length&&t&&t.length?to(e,t,ie(s,2)):e}function Jd(e,t,s){return e&&e.length&&t&&t.length?to(e,t,r,s):e}var Yd=Zr(function(e,t){var s=e==null?0:e.length,o=Ga(e,t);return su(e,it(t,function(h){return Qr(h,s)?+h:h}).sort(du)),o});function Xd(e,t){var s=[];if(!(e&&e.length))return s;var o=-1,h=[],p=e.length;for(t=ie(t,3);++o<p;){var m=e[o];t(m,o,e)&&(s.push(m),h.push(o))}return su(e,h),s}function Eo(e){return e==null?e:Vf.call(e)}function Zd(e,t,s){var o=e==null?0:e.length;return o?(s&&typeof s!="number"&&Zt(e,t,s)?(t=0,s=o):(t=t==null?0:ye(t),s=s===r?o:ye(s)),Er(e,t,s)):[]}function Qd(e,t){return An(e,t)}function eg(e,t,s){return so(e,t,ie(s,2))}function tg(e,t){var s=e==null?0:e.length;if(s){var o=An(e,t);if(o<s&&Nr(e[o],t))return o}return-1}function rg(e,t){return An(e,t,!0)}function ig(e,t,s){return so(e,t,ie(s,2),!0)}function sg(e,t){var s=e==null?0:e.length;if(s){var o=An(e,t,!0)-1;if(Nr(e[o],t))return o}return-1}function ng(e){return e&&e.length?au(e):[]}function ag(e,t){return e&&e.length?au(e,ie(t,2)):[]}function og(e){var t=e==null?0:e.length;return t?Er(e,1,t):[]}function cg(e,t,s){return e&&e.length?(t=s||t===r?1:ye(t),Er(e,0,t<0?0:t)):[]}function ug(e,t,s){var o=e==null?0:e.length;return o?(t=s||t===r?1:ye(t),t=o-t,Er(e,t<0?0:t,o)):[]}function hg(e,t){return e&&e.length?Tn(e,ie(t,3),!1,!0):[]}function lg(e,t){return e&&e.length?Tn(e,ie(t,3)):[]}var fg=be(function(e){return li(Vt(e,1,bt,!0))}),pg=be(function(e){var t=Ir(e);return bt(t)&&(t=r),li(Vt(e,1,bt,!0),ie(t,2))}),dg=be(function(e){var t=Ir(e);return t=typeof t=="function"?t:r,li(Vt(e,1,bt,!0),r,t)});function gg(e){return e&&e.length?li(e):[]}function vg(e,t){return e&&e.length?li(e,ie(t,2)):[]}function yg(e,t){return t=typeof t=="function"?t:r,e&&e.length?li(e,r,t):[]}function Io(e){if(!(e&&e.length))return[];var t=0;return e=ai(e,function(s){if(bt(s))return t=Mt(s.length,t),!0}),qa(t,function(s){return it(e,ja(s))})}function Bu(e,t){if(!(e&&e.length))return[];var s=Io(e);return t==null?s:it(s,function(o){return qt(t,r,o)})}var mg=be(function(e,t){return bt(e)?Es(e,t):[]}),wg=be(function(e){return ao(ai(e,bt))}),_g=be(function(e){var t=Ir(e);return bt(t)&&(t=r),ao(ai(e,bt),ie(t,2))}),bg=be(function(e){var t=Ir(e);return t=typeof t=="function"?t:r,ao(ai(e,bt),r,t)}),Eg=be(Io);function Ig(e,t){return hu(e||[],t||[],bs)}function xg(e,t){return hu(e||[],t||[],Ss)}var Sg=be(function(e){var t=e.length,s=t>1?e[t-1]:r;return s=typeof s=="function"?(e.pop(),s):r,Bu(e,s)});function Gu(e){var t=f(e);return t.__chain__=!0,t}function Pg(e,t){return t(e),e}function qn(e,t){return t(e)}var Cg=Zr(function(e){var t=e.length,s=t?e[0]:0,o=this.__wrapped__,h=function(p){return Ga(p,e)};return t>1||this.__actions__.length||!(o instanceof Se)||!Qr(s)?this.thru(h):(o=o.slice(s,+s+(t?1:0)),o.__actions__.push({func:qn,args:[h],thisArg:r}),new _r(o,this.__chain__).thru(function(p){return t&&!p.length&&p.push(r),p}))});function Og(){return Gu(this)}function Ag(){return new _r(this.value(),this.__chain__)}function Tg(){this.__values__===r&&(this.__values__=oh(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Rg(){return this}function Ng(e){for(var t,s=this;s instanceof xn;){var o=Uu(s);o.__index__=0,o.__values__=r,t?h.__wrapped__=o:t=o;var h=o;s=s.__wrapped__}return h.__wrapped__=e,t}function Dg(){var e=this.__wrapped__;if(e instanceof Se){var t=e;return this.__actions__.length&&(t=new Se(this)),t=t.reverse(),t.__actions__.push({func:qn,args:[Eo],thisArg:r}),new _r(t,this.__chain__)}return this.thru(Eo)}function $g(){return uu(this.__wrapped__,this.__actions__)}var Lg=Rn(function(e,t,s){ze.call(e,s)?++e[s]:Yr(e,s,1)});function jg(e,t,s){var o=ge(e)?Ec:Pp;return s&&Zt(e,t,s)&&(t=r),o(e,ie(t,3))}function Mg(e,t){var s=ge(e)?ai:Bc;return s(e,ie(t,3))}var zg=_u(ku),qg=_u(Ku);function Ug(e,t){return Vt(Un(e,t),1)}function kg(e,t){return Vt(Un(e,t),Te)}function Kg(e,t,s){return s=s===r?1:ye(s),Vt(Un(e,t),s)}function Wu(e,t){var s=ge(e)?mr:hi;return s(e,ie(t,3))}function Ju(e,t){var s=ge(e)?of:Fc;return s(e,ie(t,3))}var Hg=Rn(function(e,t,s){ze.call(e,s)?e[s].push(t):Yr(e,s,[t])});function Vg(e,t,s,o){e=nr(e)?e:ns(e),s=s&&!o?ye(s):0;var h=e.length;return s<0&&(s=Mt(h+s,0)),Fn(e)?s<=h&&e.indexOf(t,s)>-1:!!h&&Gi(e,t,s)>-1}var Fg=be(function(e,t,s){var o=-1,h=typeof t=="function",p=nr(e)?C(e.length):[];return hi(e,function(m){p[++o]=h?qt(t,m,s):Is(m,t,s)}),p}),Bg=Rn(function(e,t,s){Yr(e,s,t)});function Un(e,t){var s=ge(e)?it:Zc;return s(e,ie(t,3))}function Gg(e,t,s,o){return e==null?[]:(ge(t)||(t=t==null?[]:[t]),s=o?r:s,ge(s)||(s=s==null?[]:[s]),ru(e,t,s))}var Wg=Rn(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function Jg(e,t,s){var o=ge(e)?$a:Pc,h=arguments.length<3;return o(e,ie(t,4),s,h,hi)}function Yg(e,t,s){var o=ge(e)?cf:Pc,h=arguments.length<3;return o(e,ie(t,4),s,h,Fc)}function Xg(e,t){var s=ge(e)?ai:Bc;return s(e,Hn(ie(t,3)))}function Zg(e){var t=ge(e)?kc:Vp;return t(e)}function Qg(e,t,s){(s?Zt(e,t,s):t===r)?t=1:t=ye(t);var o=ge(e)?bp:Fp;return o(e,t)}function ev(e){var t=ge(e)?Ep:Gp;return t(e)}function tv(e){if(e==null)return 0;if(nr(e))return Fn(e)?Ji(e):e.length;var t=Gt(e);return t==me||t==Le?e.size:Qa(e).length}function rv(e,t,s){var o=ge(e)?La:Wp;return s&&Zt(e,t,s)&&(t=r),o(e,ie(t,3))}var iv=be(function(e,t){if(e==null)return[];var s=t.length;return s>1&&Zt(e,t[0],t[1])?t=[]:s>2&&Zt(t[0],t[1],t[2])&&(t=[t[0]]),ru(e,Vt(t,1),[])}),kn=Mf||function(){return Pe.Date.now()};function sv(e,t){if(typeof t!="function")throw new wr(d);return e=ye(e),function(){if(--e<1)return t.apply(this,arguments)}}function Yu(e,t,s){return t=s?r:t,t=e&&t==null?e.length:t,Xr(e,K,r,r,r,r,t)}function Xu(e,t){var s;if(typeof t!="function")throw new wr(d);return e=ye(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=r),s}}var xo=be(function(e,t,s){var o=re;if(s.length){var h=ci(s,is(xo));o|=pe}return Xr(e,o,t,s,h)}),Zu=be(function(e,t,s){var o=re|ce;if(s.length){var h=ci(s,is(Zu));o|=pe}return Xr(t,o,e,s,h)});function Qu(e,t,s){t=s?r:t;var o=Xr(e,he,r,r,r,r,r,t);return o.placeholder=Qu.placeholder,o}function eh(e,t,s){t=s?r:t;var o=Xr(e,fe,r,r,r,r,r,t);return o.placeholder=eh.placeholder,o}function th(e,t,s){var o,h,p,m,w,S,j=0,M=!1,k=!1,G=!0;if(typeof e!="function")throw new wr(d);t=xr(t)||0,ot(s)&&(M=!!s.leading,k="maxWait"in s,p=k?Mt(xr(s.maxWait)||0,t):p,G="trailing"in s?!!s.trailing:G);function ee(Et){var Dr=o,ri=h;return o=h=r,j=Et,m=e.apply(ri,Dr),m}function ne(Et){return j=Et,w=Os(Ie,t),M?ee(Et):m}function we(Et){var Dr=Et-S,ri=Et-j,_h=t-Dr;return k?Bt(_h,p-ri):_h}function ae(Et){var Dr=Et-S,ri=Et-j;return S===r||Dr>=t||Dr<0||k&&ri>=p}function Ie(){var Et=kn();if(ae(Et))return Ce(Et);w=Os(Ie,we(Et))}function Ce(Et){return w=r,G&&o?ee(Et):(o=h=r,m)}function dr(){w!==r&&lu(w),j=0,o=S=h=w=r}function Qt(){return w===r?m:Ce(kn())}function gr(){var Et=kn(),Dr=ae(Et);if(o=arguments,h=this,S=Et,Dr){if(w===r)return ne(S);if(k)return lu(w),w=Os(Ie,t),ee(S)}return w===r&&(w=Os(Ie,t)),m}return gr.cancel=dr,gr.flush=Qt,gr}var nv=be(function(e,t){return Vc(e,1,t)}),av=be(function(e,t,s){return Vc(e,xr(t)||0,s)});function ov(e){return Xr(e,ve)}function Kn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new wr(d);var s=function(){var o=arguments,h=t?t.apply(this,o):o[0],p=s.cache;if(p.has(h))return p.get(h);var m=e.apply(this,o);return s.cache=p.set(h,m)||p,m};return s.cache=new(Kn.Cache||Jr),s}Kn.Cache=Jr;function Hn(e){if(typeof e!="function")throw new wr(d);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function cv(e){return Xu(2,e)}var uv=Jp(function(e,t){t=t.length==1&&ge(t[0])?it(t[0],lr(ie())):it(Vt(t,1),lr(ie()));var s=t.length;return be(function(o){for(var h=-1,p=Bt(o.length,s);++h<p;)o[h]=t[h].call(this,o[h]);return qt(e,this,o)})}),So=be(function(e,t){var s=ci(t,is(So));return Xr(e,pe,r,t,s)}),rh=be(function(e,t){var s=ci(t,is(rh));return Xr(e,N,r,t,s)}),hv=Zr(function(e,t){return Xr(e,W,r,r,r,t)});function lv(e,t){if(typeof e!="function")throw new wr(d);return t=t===r?t:ye(t),be(e,t)}function fv(e,t){if(typeof e!="function")throw new wr(d);return t=t==null?0:Mt(ye(t),0),be(function(s){var o=s[t],h=pi(s,0,t);return o&&oi(h,o),qt(e,this,h)})}function pv(e,t,s){var o=!0,h=!0;if(typeof e!="function")throw new wr(d);return ot(s)&&(o="leading"in s?!!s.leading:o,h="trailing"in s?!!s.trailing:h),th(e,t,{leading:o,maxWait:t,trailing:h})}function dv(e){return Yu(e,1)}function gv(e,t){return So(co(t),e)}function vv(){if(!arguments.length)return[];var e=arguments[0];return ge(e)?e:[e]}function yv(e){return br(e,U)}function mv(e,t){return t=typeof t=="function"?t:r,br(e,U,t)}function wv(e){return br(e,A|U)}function _v(e,t){return t=typeof t=="function"?t:r,br(e,A|U,t)}function bv(e,t){return t==null||Hc(e,t,Ut(t))}function Nr(e,t){return e===t||e!==e&&t!==t}var Ev=Ln(Ya),Iv=Ln(function(e,t){return e>=t}),$i=Jc(function(){return arguments}())?Jc:function(e){return vt(e)&&ze.call(e,"callee")&&!Lc.call(e,"callee")},ge=C.isArray,xv=Yt?lr(Yt):Np;function nr(e){return e!=null&&Vn(e.length)&&!ei(e)}function bt(e){return vt(e)&&nr(e)}function Sv(e){return e===!0||e===!1||vt(e)&&Xt(e)==T}var di=qf||jo,Pv=Ar?lr(Ar):Dp;function Cv(e){return vt(e)&&e.nodeType===1&&!As(e)}function Ov(e){if(e==null)return!0;if(nr(e)&&(ge(e)||typeof e=="string"||typeof e.splice=="function"||di(e)||ss(e)||$i(e)))return!e.length;var t=Gt(e);if(t==me||t==Le)return!e.size;if(Cs(e))return!Qa(e).length;for(var s in e)if(ze.call(e,s))return!1;return!0}function Av(e,t){return xs(e,t)}function Tv(e,t,s){s=typeof s=="function"?s:r;var o=s?s(e,t):r;return o===r?xs(e,t,r,s):!!o}function Po(e){if(!vt(e))return!1;var t=Xt(e);return t==b||t==c||typeof e.message=="string"&&typeof e.name=="string"&&!As(e)}function Rv(e){return typeof e=="number"&&Mc(e)}function ei(e){if(!ot(e))return!1;var t=Xt(e);return t==Q||t==oe||t==R||t==mt}function ih(e){return typeof e=="number"&&e==ye(e)}function Vn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J}function ot(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function vt(e){return e!=null&&typeof e=="object"}var sh=yr?lr(yr):Lp;function Nv(e,t){return e===t||Za(e,t,vo(t))}function Dv(e,t,s){return s=typeof s=="function"?s:r,Za(e,t,vo(t),s)}function $v(e){return nh(e)&&e!=+e}function Lv(e){if(md(e))throw new le(l);return Yc(e)}function jv(e){return e===null}function Mv(e){return e==null}function nh(e){return typeof e=="number"||vt(e)&&Xt(e)==Re}function As(e){if(!vt(e)||Xt(e)!=xe)return!1;var t=yn(e);if(t===null)return!0;var s=ze.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&pn.call(s)==Df}var Co=zr?lr(zr):jp;function zv(e){return ih(e)&&e>=-J&&e<=J}var ah=ds?lr(ds):Mp;function Fn(e){return typeof e=="string"||!ge(e)&&vt(e)&&Xt(e)==Je}function pr(e){return typeof e=="symbol"||vt(e)&&Xt(e)==Ye}var ss=Pi?lr(Pi):zp;function qv(e){return e===r}function Uv(e){return vt(e)&&Gt(e)==Ue}function kv(e){return vt(e)&&Xt(e)==Xe}var Kv=Ln(eo),Hv=Ln(function(e,t){return e<=t});function oh(e){if(!e)return[];if(nr(e))return Fn(e)?Tr(e):sr(e);if(vs&&e[vs])return bf(e[vs]());var t=Gt(e),s=t==me?ka:t==Le?hn:ns;return s(e)}function ti(e){if(!e)return e===0?e:0;if(e=xr(e),e===Te||e===-Te){var t=e<0?-1:1;return t*F}return e===e?e:0}function ye(e){var t=ti(e),s=t%1;return t===t?s?t-s:t:0}function ch(e){return e?Ti(ye(e),0,B):0}function xr(e){if(typeof e=="number")return e;if(pr(e))return H;if(ot(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ot(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Cc(e);var s=va.test(e);return s||ma.test(e)?de(e.slice(2),s?2:8):ga.test(e)?H:+e}function uh(e){return Ur(e,ar(e))}function Vv(e){return e?Ti(ye(e),-J,J):e===0?e:0}function je(e){return e==null?"":fr(e)}var Fv=ts(function(e,t){if(Cs(t)||nr(t)){Ur(t,Ut(t),e);return}for(var s in t)ze.call(t,s)&&bs(e,s,t[s])}),hh=ts(function(e,t){Ur(t,ar(t),e)}),Bn=ts(function(e,t,s,o){Ur(t,ar(t),e,o)}),Bv=ts(function(e,t,s,o){Ur(t,Ut(t),e,o)}),Gv=Zr(Ga);function Wv(e,t){var s=es(e);return t==null?s:Kc(s,t)}var Jv=be(function(e,t){e=Ge(e);var s=-1,o=t.length,h=o>2?t[2]:r;for(h&&Zt(t[0],t[1],h)&&(o=1);++s<o;)for(var p=t[s],m=ar(p),w=-1,S=m.length;++w<S;){var j=m[w],M=e[j];(M===r||Nr(M,Xi[j])&&!ze.call(e,j))&&(e[j]=p[j])}return e}),Yv=be(function(e){return e.push(r,Cu),qt(lh,r,e)});function Xv(e,t){return Ic(e,ie(t,3),qr)}function Zv(e,t){return Ic(e,ie(t,3),Ja)}function Qv(e,t){return e==null?e:Wa(e,ie(t,3),ar)}function ey(e,t){return e==null?e:Gc(e,ie(t,3),ar)}function ty(e,t){return e&&qr(e,ie(t,3))}function ry(e,t){return e&&Ja(e,ie(t,3))}function iy(e){return e==null?[]:Cn(e,Ut(e))}function sy(e){return e==null?[]:Cn(e,ar(e))}function Oo(e,t,s){var o=e==null?r:Ri(e,t);return o===r?s:o}function ny(e,t){return e!=null&&Tu(e,t,Op)}function Ao(e,t){return e!=null&&Tu(e,t,Ap)}var ay=Eu(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=dn.call(t)),e[t]=s},Ro(or)),oy=Eu(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=dn.call(t)),ze.call(e,t)?e[t].push(s):e[t]=[s]},ie),cy=be(Is);function Ut(e){return nr(e)?Uc(e):Qa(e)}function ar(e){return nr(e)?Uc(e,!0):qp(e)}function uy(e,t){var s={};return t=ie(t,3),qr(e,function(o,h,p){Yr(s,t(o,h,p),o)}),s}function hy(e,t){var s={};return t=ie(t,3),qr(e,function(o,h,p){Yr(s,h,t(o,h,p))}),s}var ly=ts(function(e,t,s){On(e,t,s)}),lh=ts(function(e,t,s,o){On(e,t,s,o)}),fy=Zr(function(e,t){var s={};if(e==null)return s;var o=!1;t=it(t,function(p){return p=fi(p,e),o||(o=p.length>1),p}),Ur(e,po(e),s),o&&(s=br(s,A|D|U,ad));for(var h=t.length;h--;)no(s,t[h]);return s});function py(e,t){return fh(e,Hn(ie(t)))}var dy=Zr(function(e,t){return e==null?{}:kp(e,t)});function fh(e,t){if(e==null)return{};var s=it(po(e),function(o){return[o]});return t=ie(t),iu(e,s,function(o,h){return t(o,h[0])})}function gy(e,t,s){t=fi(t,e);var o=-1,h=t.length;for(h||(h=1,e=r);++o<h;){var p=e==null?r:e[kr(t[o])];p===r&&(o=h,p=s),e=ei(p)?p.call(e):p}return e}function vy(e,t,s){return e==null?e:Ss(e,t,s)}function yy(e,t,s,o){return o=typeof o=="function"?o:r,e==null?e:Ss(e,t,s,o)}var ph=Su(Ut),dh=Su(ar);function my(e,t,s){var o=ge(e),h=o||di(e)||ss(e);if(t=ie(t,4),s==null){var p=e&&e.constructor;h?s=o?new p:[]:ot(e)?s=ei(p)?es(yn(e)):{}:s={}}return(h?mr:qr)(e,function(m,w,S){return t(s,m,w,S)}),s}function wy(e,t){return e==null?!0:no(e,t)}function _y(e,t,s){return e==null?e:cu(e,t,co(s))}function by(e,t,s,o){return o=typeof o=="function"?o:r,e==null?e:cu(e,t,co(s),o)}function ns(e){return e==null?[]:Ua(e,Ut(e))}function Ey(e){return e==null?[]:Ua(e,ar(e))}function Iy(e,t,s){return s===r&&(s=t,t=r),s!==r&&(s=xr(s),s=s===s?s:0),t!==r&&(t=xr(t),t=t===t?t:0),Ti(xr(e),t,s)}function xy(e,t,s){return t=ti(t),s===r?(s=t,t=0):s=ti(s),e=xr(e),Tp(e,t,s)}function Sy(e,t,s){if(s&&typeof s!="boolean"&&Zt(e,t,s)&&(t=s=r),s===r&&(typeof t=="boolean"?(s=t,t=r):typeof e=="boolean"&&(s=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ti(e),t===r?(t=e,e=0):t=ti(t)),e>t){var o=e;e=t,t=o}if(s||e%1||t%1){var h=zc();return Bt(e+h*(t-e+Fe("1e-"+((h+"").length-1))),t)}return ro(e,t)}var Py=rs(function(e,t,s){return t=t.toLowerCase(),e+(s?gh(t):t)});function gh(e){return To(je(e).toLowerCase())}function vh(e){return e=je(e),e&&e.replace(Br,vf).replace(Ra,"")}function Cy(e,t,s){e=je(e),t=fr(t);var o=e.length;s=s===r?o:Ti(ye(s),0,o);var h=s;return s-=t.length,s>=0&&e.slice(s,h)==t}function Oy(e){return e=je(e),e&&tt.test(e)?e.replace(bi,yf):e}function Ay(e){return e=je(e),e&&At.test(e)?e.replace(pt,"\\$&"):e}var Ty=rs(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),Ry=rs(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),Ny=wu("toLowerCase");function Dy(e,t,s){e=je(e),t=ye(t);var o=t?Ji(e):0;if(!t||o>=t)return e;var h=(t-o)/2;return $n(bn(h),s)+e+$n(_n(h),s)}function $y(e,t,s){e=je(e),t=ye(t);var o=t?Ji(e):0;return t&&o<t?e+$n(t-o,s):e}function Ly(e,t,s){e=je(e),t=ye(t);var o=t?Ji(e):0;return t&&o<t?$n(t-o,s)+e:e}function jy(e,t,s){return s||t==null?t=0:t&&(t=+t),Hf(je(e).replace(dt,""),t||0)}function My(e,t,s){return(s?Zt(e,t,s):t===r)?t=1:t=ye(t),io(je(e),t)}function zy(){var e=arguments,t=je(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var qy=rs(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function Uy(e,t,s){return s&&typeof s!="number"&&Zt(e,t,s)&&(t=s=r),s=s===r?B:s>>>0,s?(e=je(e),e&&(typeof t=="string"||t!=null&&!Co(t))&&(t=fr(t),!t&&Wi(e))?pi(Tr(e),0,s):e.split(t,s)):[]}var ky=rs(function(e,t,s){return e+(s?" ":"")+To(t)});function Ky(e,t,s){return e=je(e),s=s==null?0:Ti(ye(s),0,e.length),t=fr(t),e.slice(s,s+t.length)==t}function Hy(e,t,s){var o=f.templateSettings;s&&Zt(e,t,s)&&(t=r),e=je(e),t=Bn({},t,o,Pu);var h=Bn({},t.imports,o.imports,Pu),p=Ut(h),m=Ua(h,p),w,S,j=0,M=t.interpolate||Ui,k="__p += '",G=Ka((t.escape||Ui).source+"|"+M.source+"|"+(M===at?da:Ui).source+"|"+(t.evaluate||Ui).source+"|$","g"),ee="//# sourceURL="+(ze.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Na+"]")+`
`;e.replace(G,function(ae,Ie,Ce,dr,Qt,gr){return Ce||(Ce=dr),k+=e.slice(j,gr).replace(_a,mf),Ie&&(w=!0,k+=`' +
__e(`+Ie+`) +
'`),Qt&&(S=!0,k+=`';
`+Qt+`;
__p += '`),Ce&&(k+=`' +
((__t = (`+Ce+`)) == null ? '' : __t) +
'`),j=gr+ae.length,ae}),k+=`';
`;var ne=ze.call(t,"variable")&&t.variable;if(!ne)k=`with (obj) {
`+k+`
}
`;else if(fa.test(ne))throw new le(y);k=(S?k.replace(jr,""):k).replace(Jt,"$1").replace(Fr,"$1;"),k="function("+(ne||"obj")+`) {
`+(ne?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(w?", __e = _.escape":"")+(S?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+k+`return __p
}`;var we=mh(function(){return $e(p,ee+"return "+k).apply(r,m)});if(we.source=k,Po(we))throw we;return we}function Vy(e){return je(e).toLowerCase()}function Fy(e){return je(e).toUpperCase()}function By(e,t,s){if(e=je(e),e&&(s||t===r))return Cc(e);if(!e||!(t=fr(t)))return e;var o=Tr(e),h=Tr(t),p=Oc(o,h),m=Ac(o,h)+1;return pi(o,p,m).join("")}function Gy(e,t,s){if(e=je(e),e&&(s||t===r))return e.slice(0,Rc(e)+1);if(!e||!(t=fr(t)))return e;var o=Tr(e),h=Ac(o,Tr(t))+1;return pi(o,0,h).join("")}function Wy(e,t,s){if(e=je(e),e&&(s||t===r))return e.replace(dt,"");if(!e||!(t=fr(t)))return e;var o=Tr(e),h=Oc(o,Tr(t));return pi(o,h).join("")}function Jy(e,t){var s=te,o=Ee;if(ot(t)){var h="separator"in t?t.separator:h;s="length"in t?ye(t.length):s,o="omission"in t?fr(t.omission):o}e=je(e);var p=e.length;if(Wi(e)){var m=Tr(e);p=m.length}if(s>=p)return e;var w=s-Ji(o);if(w<1)return o;var S=m?pi(m,0,w).join(""):e.slice(0,w);if(h===r)return S+o;if(m&&(w+=S.length-w),Co(h)){if(e.slice(w).search(h)){var j,M=S;for(h.global||(h=Ka(h.source,je(vr.exec(h))+"g")),h.lastIndex=0;j=h.exec(M);)var k=j.index;S=S.slice(0,k===r?w:k)}}else if(e.indexOf(fr(h),w)!=w){var G=S.lastIndexOf(h);G>-1&&(S=S.slice(0,G))}return S+o}function Yy(e){return e=je(e),e&&ht.test(e)?e.replace(si,Sf):e}var Xy=rs(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),To=wu("toUpperCase");function yh(e,t,s){return e=je(e),t=s?r:t,t===r?_f(e)?Of(e):lf(e):e.match(t)||[]}var mh=be(function(e,t){try{return qt(e,r,t)}catch(s){return Po(s)?s:new le(s)}}),Zy=Zr(function(e,t){return mr(t,function(s){s=kr(s),Yr(e,s,xo(e[s],e))}),e});function Qy(e){var t=e==null?0:e.length,s=ie();return e=t?it(e,function(o){if(typeof o[1]!="function")throw new wr(d);return[s(o[0]),o[1]]}):[],be(function(o){for(var h=-1;++h<t;){var p=e[h];if(qt(p[0],this,o))return qt(p[1],this,o)}})}function e0(e){return Sp(br(e,A))}function Ro(e){return function(){return e}}function t0(e,t){return e==null||e!==e?t:e}var r0=bu(),i0=bu(!0);function or(e){return e}function No(e){return Xc(typeof e=="function"?e:br(e,A))}function s0(e){return Qc(br(e,A))}function n0(e,t){return eu(e,br(t,A))}var a0=be(function(e,t){return function(s){return Is(s,e,t)}}),o0=be(function(e,t){return function(s){return Is(e,s,t)}});function Do(e,t,s){var o=Ut(t),h=Cn(t,o);s==null&&!(ot(t)&&(h.length||!o.length))&&(s=t,t=e,e=this,h=Cn(t,Ut(t)));var p=!(ot(s)&&"chain"in s)||!!s.chain,m=ei(e);return mr(h,function(w){var S=t[w];e[w]=S,m&&(e.prototype[w]=function(){var j=this.__chain__;if(p||j){var M=e(this.__wrapped__),k=M.__actions__=sr(this.__actions__);return k.push({func:S,args:arguments,thisArg:e}),M.__chain__=j,M}return S.apply(e,oi([this.value()],arguments))})}),e}function c0(){return Pe._===this&&(Pe._=$f),this}function $o(){}function u0(e){return e=ye(e),be(function(t){return tu(t,e)})}var h0=ho(it),l0=ho(Ec),f0=ho(La);function wh(e){return mo(e)?ja(kr(e)):Kp(e)}function p0(e){return function(t){return e==null?r:Ri(e,t)}}var d0=Iu(),g0=Iu(!0);function Lo(){return[]}function jo(){return!1}function v0(){return{}}function y0(){return""}function m0(){return!0}function w0(e,t){if(e=ye(e),e<1||e>J)return[];var s=B,o=Bt(e,B);t=ie(t),e-=B;for(var h=qa(o,t);++s<e;)t(s);return h}function _0(e){return ge(e)?it(e,kr):pr(e)?[e]:sr(qu(je(e)))}function b0(e){var t=++Nf;return je(e)+t}var E0=Dn(function(e,t){return e+t},0),I0=lo("ceil"),x0=Dn(function(e,t){return e/t},1),S0=lo("floor");function P0(e){return e&&e.length?Pn(e,or,Ya):r}function C0(e,t){return e&&e.length?Pn(e,ie(t,2),Ya):r}function O0(e){return Sc(e,or)}function A0(e,t){return Sc(e,ie(t,2))}function T0(e){return e&&e.length?Pn(e,or,eo):r}function R0(e,t){return e&&e.length?Pn(e,ie(t,2),eo):r}var N0=Dn(function(e,t){return e*t},1),D0=lo("round"),$0=Dn(function(e,t){return e-t},0);function L0(e){return e&&e.length?za(e,or):0}function j0(e,t){return e&&e.length?za(e,ie(t,2)):0}return f.after=sv,f.ary=Yu,f.assign=Fv,f.assignIn=hh,f.assignInWith=Bn,f.assignWith=Bv,f.at=Gv,f.before=Xu,f.bind=xo,f.bindAll=Zy,f.bindKey=Zu,f.castArray=vv,f.chain=Gu,f.chunk=Sd,f.compact=Pd,f.concat=Cd,f.cond=Qy,f.conforms=e0,f.constant=Ro,f.countBy=Lg,f.create=Wv,f.curry=Qu,f.curryRight=eh,f.debounce=th,f.defaults=Jv,f.defaultsDeep=Yv,f.defer=nv,f.delay=av,f.difference=Od,f.differenceBy=Ad,f.differenceWith=Td,f.drop=Rd,f.dropRight=Nd,f.dropRightWhile=Dd,f.dropWhile=$d,f.fill=Ld,f.filter=Mg,f.flatMap=Ug,f.flatMapDeep=kg,f.flatMapDepth=Kg,f.flatten=Hu,f.flattenDeep=jd,f.flattenDepth=Md,f.flip=ov,f.flow=r0,f.flowRight=i0,f.fromPairs=zd,f.functions=iy,f.functionsIn=sy,f.groupBy=Hg,f.initial=Ud,f.intersection=kd,f.intersectionBy=Kd,f.intersectionWith=Hd,f.invert=ay,f.invertBy=oy,f.invokeMap=Fg,f.iteratee=No,f.keyBy=Bg,f.keys=Ut,f.keysIn=ar,f.map=Un,f.mapKeys=uy,f.mapValues=hy,f.matches=s0,f.matchesProperty=n0,f.memoize=Kn,f.merge=ly,f.mergeWith=lh,f.method=a0,f.methodOf=o0,f.mixin=Do,f.negate=Hn,f.nthArg=u0,f.omit=fy,f.omitBy=py,f.once=cv,f.orderBy=Gg,f.over=h0,f.overArgs=uv,f.overEvery=l0,f.overSome=f0,f.partial=So,f.partialRight=rh,f.partition=Wg,f.pick=dy,f.pickBy=fh,f.property=wh,f.propertyOf=p0,f.pull=Gd,f.pullAll=Fu,f.pullAllBy=Wd,f.pullAllWith=Jd,f.pullAt=Yd,f.range=d0,f.rangeRight=g0,f.rearg=hv,f.reject=Xg,f.remove=Xd,f.rest=lv,f.reverse=Eo,f.sampleSize=Qg,f.set=vy,f.setWith=yy,f.shuffle=ev,f.slice=Zd,f.sortBy=iv,f.sortedUniq=ng,f.sortedUniqBy=ag,f.split=Uy,f.spread=fv,f.tail=og,f.take=cg,f.takeRight=ug,f.takeRightWhile=hg,f.takeWhile=lg,f.tap=Pg,f.throttle=pv,f.thru=qn,f.toArray=oh,f.toPairs=ph,f.toPairsIn=dh,f.toPath=_0,f.toPlainObject=uh,f.transform=my,f.unary=dv,f.union=fg,f.unionBy=pg,f.unionWith=dg,f.uniq=gg,f.uniqBy=vg,f.uniqWith=yg,f.unset=wy,f.unzip=Io,f.unzipWith=Bu,f.update=_y,f.updateWith=by,f.values=ns,f.valuesIn=Ey,f.without=mg,f.words=yh,f.wrap=gv,f.xor=wg,f.xorBy=_g,f.xorWith=bg,f.zip=Eg,f.zipObject=Ig,f.zipObjectDeep=xg,f.zipWith=Sg,f.entries=ph,f.entriesIn=dh,f.extend=hh,f.extendWith=Bn,Do(f,f),f.add=E0,f.attempt=mh,f.camelCase=Py,f.capitalize=gh,f.ceil=I0,f.clamp=Iy,f.clone=yv,f.cloneDeep=wv,f.cloneDeepWith=_v,f.cloneWith=mv,f.conformsTo=bv,f.deburr=vh,f.defaultTo=t0,f.divide=x0,f.endsWith=Cy,f.eq=Nr,f.escape=Oy,f.escapeRegExp=Ay,f.every=jg,f.find=zg,f.findIndex=ku,f.findKey=Xv,f.findLast=qg,f.findLastIndex=Ku,f.findLastKey=Zv,f.floor=S0,f.forEach=Wu,f.forEachRight=Ju,f.forIn=Qv,f.forInRight=ey,f.forOwn=ty,f.forOwnRight=ry,f.get=Oo,f.gt=Ev,f.gte=Iv,f.has=ny,f.hasIn=Ao,f.head=Vu,f.identity=or,f.includes=Vg,f.indexOf=qd,f.inRange=xy,f.invoke=cy,f.isArguments=$i,f.isArray=ge,f.isArrayBuffer=xv,f.isArrayLike=nr,f.isArrayLikeObject=bt,f.isBoolean=Sv,f.isBuffer=di,f.isDate=Pv,f.isElement=Cv,f.isEmpty=Ov,f.isEqual=Av,f.isEqualWith=Tv,f.isError=Po,f.isFinite=Rv,f.isFunction=ei,f.isInteger=ih,f.isLength=Vn,f.isMap=sh,f.isMatch=Nv,f.isMatchWith=Dv,f.isNaN=$v,f.isNative=Lv,f.isNil=Mv,f.isNull=jv,f.isNumber=nh,f.isObject=ot,f.isObjectLike=vt,f.isPlainObject=As,f.isRegExp=Co,f.isSafeInteger=zv,f.isSet=ah,f.isString=Fn,f.isSymbol=pr,f.isTypedArray=ss,f.isUndefined=qv,f.isWeakMap=Uv,f.isWeakSet=kv,f.join=Vd,f.kebabCase=Ty,f.last=Ir,f.lastIndexOf=Fd,f.lowerCase=Ry,f.lowerFirst=Ny,f.lt=Kv,f.lte=Hv,f.max=P0,f.maxBy=C0,f.mean=O0,f.meanBy=A0,f.min=T0,f.minBy=R0,f.stubArray=Lo,f.stubFalse=jo,f.stubObject=v0,f.stubString=y0,f.stubTrue=m0,f.multiply=N0,f.nth=Bd,f.noConflict=c0,f.noop=$o,f.now=kn,f.pad=Dy,f.padEnd=$y,f.padStart=Ly,f.parseInt=jy,f.random=Sy,f.reduce=Jg,f.reduceRight=Yg,f.repeat=My,f.replace=zy,f.result=gy,f.round=D0,f.runInContext=I,f.sample=Zg,f.size=tv,f.snakeCase=qy,f.some=rv,f.sortedIndex=Qd,f.sortedIndexBy=eg,f.sortedIndexOf=tg,f.sortedLastIndex=rg,f.sortedLastIndexBy=ig,f.sortedLastIndexOf=sg,f.startCase=ky,f.startsWith=Ky,f.subtract=$0,f.sum=L0,f.sumBy=j0,f.template=Hy,f.times=w0,f.toFinite=ti,f.toInteger=ye,f.toLength=ch,f.toLower=Vy,f.toNumber=xr,f.toSafeInteger=Vv,f.toString=je,f.toUpper=Fy,f.trim=By,f.trimEnd=Gy,f.trimStart=Wy,f.truncate=Jy,f.unescape=Yy,f.uniqueId=b0,f.upperCase=Xy,f.upperFirst=To,f.each=Wu,f.eachRight=Ju,f.first=Vu,Do(f,function(){var e={};return qr(f,function(t,s){ze.call(f.prototype,s)||(e[s]=t)}),e}(),{chain:!1}),f.VERSION=n,mr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),mr(["drop","take"],function(e,t){Se.prototype[e]=function(s){s=s===r?1:Mt(ye(s),0);var o=this.__filtered__&&!t?new Se(this):this.clone();return o.__filtered__?o.__takeCount__=Bt(s,o.__takeCount__):o.__views__.push({size:Bt(s,B),type:e+(o.__dir__<0?"Right":"")}),o},Se.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),mr(["filter","map","takeWhile"],function(e,t){var s=t+1,o=s==O||s==qe;Se.prototype[e]=function(h){var p=this.clone();return p.__iteratees__.push({iteratee:ie(h,3),type:s}),p.__filtered__=p.__filtered__||o,p}}),mr(["head","last"],function(e,t){var s="take"+(t?"Right":"");Se.prototype[e]=function(){return this[s](1).value()[0]}}),mr(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");Se.prototype[e]=function(){return this.__filtered__?new Se(this):this[s](1)}}),Se.prototype.compact=function(){return this.filter(or)},Se.prototype.find=function(e){return this.filter(e).head()},Se.prototype.findLast=function(e){return this.reverse().find(e)},Se.prototype.invokeMap=be(function(e,t){return typeof e=="function"?new Se(this):this.map(function(s){return Is(s,e,t)})}),Se.prototype.reject=function(e){return this.filter(Hn(ie(e)))},Se.prototype.slice=function(e,t){e=ye(e);var s=this;return s.__filtered__&&(e>0||t<0)?new Se(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==r&&(t=ye(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},Se.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Se.prototype.toArray=function(){return this.take(B)},qr(Se.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),h=f[o?"take"+(t=="last"?"Right":""):t],p=o||/^find/.test(t);h&&(f.prototype[t]=function(){var m=this.__wrapped__,w=o?[1]:arguments,S=m instanceof Se,j=w[0],M=S||ge(m),k=function(Ie){var Ce=h.apply(f,oi([Ie],w));return o&&G?Ce[0]:Ce};M&&s&&typeof j=="function"&&j.length!=1&&(S=M=!1);var G=this.__chain__,ee=!!this.__actions__.length,ne=p&&!G,we=S&&!ee;if(!p&&M){m=we?m:new Se(this);var ae=e.apply(m,w);return ae.__actions__.push({func:qn,args:[k],thisArg:r}),new _r(ae,G)}return ne&&we?e.apply(this,w):(ae=this.thru(k),ne?o?ae.value()[0]:ae.value():ae)})}),mr(["pop","push","shift","sort","splice","unshift"],function(e){var t=ln[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var h=arguments;if(o&&!this.__chain__){var p=this.value();return t.apply(ge(p)?p:[],h)}return this[s](function(m){return t.apply(ge(m)?m:[],h)})}}),qr(Se.prototype,function(e,t){var s=f[t];if(s){var o=s.name+"";ze.call(Qi,o)||(Qi[o]=[]),Qi[o].push({name:t,func:s})}}),Qi[Nn(r,ce).name]=[{name:"wrapper",func:r}],Se.prototype.clone=Yf,Se.prototype.reverse=Xf,Se.prototype.value=Zf,f.prototype.at=Cg,f.prototype.chain=Og,f.prototype.commit=Ag,f.prototype.next=Tg,f.prototype.plant=Ng,f.prototype.reverse=Dg,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=$g,f.prototype.first=f.prototype.head,vs&&(f.prototype[vs]=Rg),f},Yi=Af();_t?((_t.exports=Yi)._=Yi,Be._=Yi):Pe._=Yi}).call(js)})(nc,nc.exports);var $b=Object.defineProperty,Lb=Object.defineProperties,jb=Object.getOwnPropertyDescriptors,fl=Object.getOwnPropertySymbols,Mb=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,pl=(u,i,r)=>i in u?$b(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,Xn=(u,i)=>{for(var r in i||(i={}))Mb.call(i,r)&&pl(u,r,i[r]);if(fl)for(var r of fl(i))zb.call(i,r)&&pl(u,r,i[r]);return u},qb=(u,i)=>Lb(u,jb(i));function Cr(u,i,r){let n;const a=ac(u);return i.rpcMap&&(n=i.rpcMap[a]),n||(n=`${Db}?chainId=eip155:${a}&projectId=${r}`),n}function ac(u){return u.includes("eip155")?Number(u.split(":")[1]):Number(u)}function sf(u){return u.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function Ub(u,i){const r=Object.keys(i.namespaces).filter(a=>a.includes(u));if(!r.length)return[];const n=[];return r.forEach(a=>{const l=i.namespaces[a].accounts;n.push(...l)}),n}function kb(u={},i={}){const r=dl(u),n=dl(i);return nc.exports.merge(r,n)}function dl(u){var i,r,n,a;const l={};if(!ea(u))return l;for(const[d,y]of Object.entries(u)){const _=Cl(d)?[d]:y.chains,v=y.methods||[],x=y.events||[],A=y.rpcMap||{},D=ta(d);l[D]=qb(Xn(Xn({},l[D]),y),{chains:zo(_,(i=l[D])==null?void 0:i.chains),methods:zo(v,(r=l[D])==null?void 0:r.methods),events:zo(x,(n=l[D])==null?void 0:n.events),rpcMap:Xn(Xn({},A),(a=l[D])==null?void 0:a.rpcMap)})}return l}function Kb(u){return u.includes(":")?u.split(":")[2]:u}function Hb(u){const i={};for(const[r,n]of Object.entries(u)){const a=n.methods||[],l=n.events||[],d=n.accounts||[],y=Cl(r)?[r]:n.chains?n.chains:sf(n.accounts);i[r]={chains:y,methods:a,events:l,accounts:d}}return i}const nf={},It=u=>nf[u],Xo=(u,i)=>{nf[u]=i};class Vb{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const n=r||Cr(`${this.name}:${i}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,n)}this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var n;i[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProvider(i,r){const n=r||Cr(i,this.namespace);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}}class Fb{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){switch(i.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(i);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,r){const n=ac(i);if(!this.httpProviders[n]){const a=r||Cr(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,a)}this.chainId=n,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,r){const n=r||Cr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var n;const a=ac(r);i[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),i}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const i=this.chainId,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}async handleSwitchChain(i){var r,n;let a=i.request.params?(r=i.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const l=parseInt(a,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:i.topic,request:{method:i.request.method,params:[{chainId:a}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${l}`);else throw new Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(i){return this.namespace.chains.includes(`${this.name}:${i}`)}}class Bb{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(!this.httpProviders[i]){const n=r||Cr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,n)}this.chainId=i,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var n;i[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProvider(i,r){const n=r||Cr(i,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}}class Gb{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const n=r||Cr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,n)}this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var n;i[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProvider(i,r){const n=r||Cr(i,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}}class Wb{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const n=r||this.getCardanoRPCUrl(i);if(!n)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,n)}this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r);i[r]=this.createHttpProvider(r,n)}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}getCardanoRPCUrl(i){const r=this.namespace.rpcMap;if(r)return r[i]}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProvider(i,r){const n=r||this.getCardanoRPCUrl(i);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}}class Jb{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(!this.httpProviders[i]){const n=r||Cr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,n)}this.chainId=i,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var n;i[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProvider(i,r){const n=r||Cr(i,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}}class Yb{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(!this.httpProviders[i]){const n=r||Cr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,n)}this.chainId=i,this.events.emit(_i.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var n;i[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const n=this.createHttpProvider(i,r);n&&(this.httpProviders[i]=n)}createHttpProvider(i,r){const n=r||Cr(i,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new wi(new Mi(n,It("disableProviderPing")))}}var Xb=Object.defineProperty,Zb=Object.defineProperties,Qb=Object.getOwnPropertyDescriptors,gl=Object.getOwnPropertySymbols,eE=Object.prototype.hasOwnProperty,tE=Object.prototype.propertyIsEnumerable,vl=(u,i,r)=>i in u?Xb(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,Zn=(u,i)=>{for(var r in i||(i={}))eE.call(i,r)&&vl(u,r,i[r]);if(gl)for(var r of gl(i))tE.call(i,r)&&vl(u,r,i[r]);return u},Zo=(u,i)=>Zb(u,Qb(i));class _c{constructor(i){this.events=new dc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||hl})),this.disableProviderPing=(i==null?void 0:i.disableProviderPing)||!1}static async init(i){const r=new _c(i);return await r.initialize(),r}async request(i,r){const[n,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Zn({},i),chainId:`${n}:${a}`,topic:this.session.topic})}sendAsync(i,r,n){this.request(i,n).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(i=this.session)==null?void 0:i.topic,reason:tr("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}removeListener(i,r){this.events.removeListener(i,r)}off(i,r){this.events.off(i,r)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:a}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await a().then(l=>{this.session=l,this.namespaces||(this.namespaces=Hb(l.namespaces),this.persist("namespaces",this.namespaces))}).catch(l=>{if(l.message!==tf)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,r){try{if(!this.session)return;const[n,a]=this.validateChain(i);this.getProvider(n).setDefaultChain(a,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(us(r)){for(const n of r)i.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Ab.init({logger:this.providerOpts.logger||hl,relayUrl:this.providerOpts.relayUrl||Tb,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const i=[...new Set(Object.keys(this.session.namespaces).map(r=>ta(r)))];Xo("client",this.client),Xo("events",this.events),Xo("disableProviderPing",this.disableProviderPing),i.forEach(r=>{if(!this.session)return;const n=Ub(r,this.session),a=sf(n),l=kb(this.namespaces,this.optionalNamespaces),d=Zo(Zn({},l[r]),{accounts:n,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new Fb({namespace:d});break;case"solana":this.rpcProviders[r]=new Bb({namespace:d});break;case"cosmos":this.rpcProviders[r]=new Gb({namespace:d});break;case"polkadot":this.rpcProviders[r]=new Vb({namespace:d});break;case"cip34":this.rpcProviders[r]=new Wb({namespace:d});break;case"elrond":this.rpcProviders[r]=new Jb({namespace:d});break;case"multiversx":this.rpcProviders[r]=new Yb({namespace:d});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{const{params:r}=i,{event:n}=r;if(n.name==="accountsChanged"){const a=n.data;a&&us(a)&&this.events.emit("accountsChanged",a.map(Kb))}else n.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(n.name,n.data);this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:r})=>{var n;const{namespaces:a}=r,l=(n=this.client)==null?void 0:n.session.get(i);this.session=Zo(Zn({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:r})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",Zo(Zn({},tr("USER_DISCONNECTED")),{data:i.topic}))}),this.on(_i.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw new Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var r;this.getProvider(i).updateNamespace((r=this.session)==null?void 0:r.namespaces[i])})}setNamespaces(i){const{namespaces:r,optionalNamespaces:n,sessionProperties:a}=i;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(i){const[r,n]=(i==null?void 0:i.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(d=>ta(d)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const a=ta(Object.keys(this.namespaces)[0]),l=this.rpcProviders[a].getDefaultChain();return[a,l]}async requestAccounts(){const[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,r=!1){var n;if(!this.namespaces)return;const[a,l]=this.validateChain(i);r||this.getProvider(a).setDefaultChain(l),((n=this.namespaces[a])!=null?n:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(i,r){this.client.core.storage.setItem(`${ll}/${i}`,r)}async getFromStore(i){return await this.client.core.storage.getItem(`${ll}/${i}`)}}const rE=_c,iE="wc",sE="ethereum_provider",nE=`${iE}@2:${sE}:`,aE="https://rpc.walletconnect.com/v1/",oc=["eth_sendTransaction","personal_sign"],oE=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],cc=["chainChanged","accountsChanged"],cE=["message","disconnect","connect"];var uE=Object.defineProperty,hE=Object.defineProperties,lE=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertySymbols,fE=Object.prototype.hasOwnProperty,pE=Object.prototype.propertyIsEnumerable,ml=(u,i,r)=>i in u?uE(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r,Ms=(u,i)=>{for(var r in i||(i={}))fE.call(i,r)&&ml(u,r,i[r]);if(yl)for(var r of yl(i))pE.call(i,r)&&ml(u,r,i[r]);return u},wl=(u,i)=>hE(u,lE(i));function oa(u){return Number(u[0].split(":")[1])}function Qo(u){return`0x${u.toString(16)}`}function dE(u){const{chains:i,optionalChains:r,methods:n,optionalMethods:a,events:l,optionalEvents:d,rpcMap:y}=u;if(!us(i))throw new Error("Invalid chains");const _={chains:i,methods:n||oc,events:l||cc,rpcMap:Ms({},i.length?{[oa(i)]:y[oa(i)]}:{})},v=l==null?void 0:l.filter(U=>!cc.includes(U)),x=n==null?void 0:n.filter(U=>!oc.includes(U));if(!r&&!d&&!a&&!(v!=null&&v.length)&&!(x!=null&&x.length))return{required:i.length?_:void 0};const A=(v==null?void 0:v.length)&&(x==null?void 0:x.length)||!r,D={chains:[...new Set(A?_.chains.concat(r||[]):r)],methods:[...new Set(_.methods.concat(a!=null&&a.length?a:oE))],events:[...new Set(_.events.concat(d||cE))],rpcMap:y};return{required:i.length?_:void 0,optional:r.length?D:void 0}}class bc{constructor(){this.events=new Vr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=nE,this.on=(i,r)=>(this.events.on(i,r),this),this.once=(i,r)=>(this.events.once(i,r),this),this.removeListener=(i,r)=>(this.events.removeListener(i,r),this),this.off=(i,r)=>(this.events.off(i,r),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){const r=new bc;return await r.initialize(i),r}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,r){this.signer.sendAsync(i,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);const{required:r,optional:n}=dE(this.rpc);try{const a=await new Promise(async(d,y)=>{var _;this.rpc.showQrModal&&((_=this.modal)==null||_.subscribeModal(v=>{!v.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),y(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(wl(Ms({namespaces:Ms({},r&&{[this.namespace]:r})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:i==null?void 0:i.pairingTopic})).then(v=>{d(v)}).catch(v=>{y(new Error(v.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const l=Em(a.namespaces,[this.namespace]);this.setAccounts(l),this.events.emit("connect",{chainId:Qo(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{const{params:r}=i,{event:n}=r;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{const r=parseInt(i);this.chainId=r,this.events.emit("chainChanged",Qo(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",wl(Ms({},tr("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var r,n;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(n=this.modal)==null||n.openModal({uri:i})),this.events.emit("display_uri",i)})}switchEthereumChain(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return typeof i=="string"?i.startsWith(`${this.namespace}:`):!1}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){const r=i.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Qo(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){const r=this.parseChainId(i);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(i){const[r,n,a]=i.split(":");return{chainId:`${r}:${n}`,address:a}}setAccounts(i){this.accounts=i.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var r,n;const a=(r=i==null?void 0:i.chains)!=null?r:[],l=(n=i==null?void 0:i.optionalChains)!=null?n:[],d=a.concat(l);if(!d.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const y=a.length?(i==null?void 0:i.methods)||oc:[],_=a.length?(i==null?void 0:i.events)||cc:[],v=(i==null?void 0:i.optionalMethods)||[],x=(i==null?void 0:i.optionalEvents)||[],A=(i==null?void 0:i.rpcMap)||this.buildRpcMap(d,i.projectId),D=(i==null?void 0:i.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(U=>this.formatChainId(U)),optionalChains:l.map(U=>this.formatChainId(U)),methods:y,events:_,optionalMethods:v,optionalEvents:x,rpcMap:A,showQrModal:!!(i!=null&&i.showQrModal),qrModalOptions:D,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,r){const n={};return i.forEach(a=>{n[a]=this.getRpcUrl(a,r)}),n}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=this.rpc.chains.length?oa(this.rpc.chains):oa(this.rpc.optionalChains),this.signer=await rE.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing,relayUrl:i.relayUrl,storageOptions:i.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:n}=await Im(()=>import("./index-DVHRtSeS.js").then(a=>a.a),__vite__mapDeps([0,1,2]));r=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Ms({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;const{chains:r,optionalChains:n,rpcMap:a}=i;r&&us(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=(a==null?void 0:a[l])||this.getRpcUrl(l)})),n&&us(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(l=>this.formatChainId(l)),n.forEach(l=>{this.rpc.rpcMap[l]=(a==null?void 0:a[l])||this.getRpcUrl(l)}))}getRpcUrl(i,r){var n;return((n=this.rpc.rpcMap)==null?void 0:n[i])||`${aE}?chainId=eip155:${i}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${i}`]?this.session.namespaces[`${this.namespace}:${i}`]:this.session.namespaces[this.namespace];this.setChainIds(i?[this.formatChainId(i)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return typeof i=="string"||i instanceof String?[this.parseAccount(i)]:i.map(r=>this.parseAccount(r))}}const CE=bc;export{CE as EthereumProvider,cE as OPTIONAL_EVENTS,oE as OPTIONAL_METHODS,cc as REQUIRED_EVENTS,oc as REQUIRED_METHODS,bc as default};
